!function(){"use strict";function r(e){return e.getParam("save_enablewhendirty",!0)}function o(e,t){e.notificationManager.open({text:t,type:"error"})}function n(n){n.addCommand("mceSave",function(){!function(e){var t=a.DOM.getParent(e.id,"form");if(!r(e)||e.isDirty()){if(e.save(),e.getParam("save_onsavecallback"))return e.execCallback("save_onsavecallback",e),e.nodeChanged();t?(e.setDirty(!1),t.onsubmit&&!t.onsubmit()||("function"==typeof t.submit?t.submit():o(e,"Error: Form submit field collision.")),e.nodeChanged()):o(e,"Error: No form element found.")}}(n)}),n.addCommand("mceCancel",function(){var e=n,t=u.trim(e.startContent);e.getParam("save_oncancelcallback")?e.execCallback("save_oncancelcallback",e):e.resetContent(t)})}function i(n){return function(e){function t(){e.setDisabled(r(n)&&!n.isDirty())}return n.on("NodeChange dirty",t),function(){return n.off("NodeChange dirty",t)}}}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),a=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),u=tinymce.util.Tools.resolve("tinymce.util.Tools");e.add("save",function(e){var t;(t=e).ui.registry.addButton("save",{icon:"save",tooltip:"Save",disabled:!0,onAction:function(){return t.execCommand("mceSave")},onSetup:i(t)}),t.ui.registry.addButton("cancel",{icon:"cancel",tooltip:"Cancel",disabled:!0,onAction:function(){return t.execCommand("mceCancel")},onSetup:i(t)}),t.addShortcut("Meta+S","","mceSave"),n(e)})}(),function(){"use strict";function f(e){var t=e;return{get:function(){return t},set:function(e){t=e}}}function i(e){return function(){return e}}function u(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r}function d(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}function t(e,t){for(var n=e.length-1;0<=n;n--)t(e[n],n)}function m(e,t){return function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!ee(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);oe.apply(t,e[n])}return t}(u(e,t))}function n(e,t){return ie.call(e,t)}function a(e,t,n){!function(e,t,n){if(!(Q(n)||te(n)||ne(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")}(e.dom,t,n)}function e(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}}function r(e,t){return{element:e,offset:t}}function c(e,t){var n,r;n=e,r=t,X.from(n.dom.parentNode).map(ae).each(function(e){e.dom.insertBefore(r.dom,n.dom)}),t.dom.appendChild(e.dom)}function s(e){return ue.get(e)}function l(e,t){return e.isBlock(t)||n(e.schema.getShortEndedElements(),t.nodeName)}function g(e,t){return"false"===e.getContentEditable(t)}function p(e,t){return!e.isBlock(t)&&n(e.schema.getWhiteSpaceElements(),t.nodeName)}function h(){return{sOffset:0,fOffset:0,elements:[]}}function v(e,t){return n=ae(e),e=t,0<(t=u(n.dom.childNodes,ae)).length&&e<t.length?r(t[e],0):r(n,e);var n}function b(e,t,n,r,o,i){for(var a=(i=void 0===i?!0:i)?t(!1):n;a;){var u=g(e,a);if(u||p(e,a)){if(u?r.cef(a):r.boundary(a))break;a=t(!0)}else{if(l(e,a)){if(r.boundary(a))break}else 3===a.nodeType&&r.text(a);if(a===o)break;a=t(!1)}}}function y(e,t,n,r,o){var i,a;l(i=e,a=n)||g(i,a)||p(i,a)||(a=a,"true"===(i=i).getContentEditable(a)&&"false"===i.getContentEditableParent(a.parentNode))||(r=e.getParent(r,e.isBlock),r=new ce(n,r),r=(o?r.next:r.prev).bind(r),b(e,r,n,{boundary:H,cef:H,text:function(e){o?t.fOffset+=e.length:t.sOffset+=e.length,t.elements.push(ae(e))}}))}function w(e,t,n,r,o,i){void 0===i&&(i=!0);var a=new ce(n,t),u=[],c=h();function s(){return 0<c.elements.length&&(u.push(c),c=h()),!1}return y(e,c,n,t,!1),b(e,a.next.bind(a),n,{boundary:s,cef:function(e){return s(),o&&u.push.apply(u,o.cef(e)),!1},text:function(e){c.elements.push(ae(e)),o&&o.text(e,c)}},r,i),r&&y(e,c,r,t,!0),s(),u}function o(n,e){var r=v(e.startContainer,e.startOffset),o=r.element.dom,i=v(e.endContainer,e.endOffset),a=i.element.dom;return w(n,e.commonAncestorContainer,o,a,{text:function(e,t){e===a?t.fOffset+=e.length-i.offset:e===o&&(t.sOffset+=r.offset)},cef:function(e){var t=m((t=ae(e),e="*[contenteditable=true]",1!==(t=void 0===t?document:t.dom).nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount?[]:u(t.querySelectorAll(e),ae)),function(e){e=e.dom;return w(n,e,e)}),e=function(e,t){return n=e.elements[0].dom,e=t.elements[0].dom,t=Node.DOCUMENT_POSITION_PRECEDING,0!=(n.compareDocumentPosition(e)&t)?1:-1;var n};return(t=re.call(t,0)).sort(e),t}},!1)}function x(e,t){return t.collapsed?[]:o(e,t)}function S(e,t){var n=e.createRng();return n.selectNode(t),x(e,n)}function C(a,e){return m(e,function(e){var i,t,n,r=e.elements,o=u(r,s).join(""),e=function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=e.length);var o=t.regex;o.lastIndex=n;for(var i=[];u=o.exec(e);){var a=u[t.matchIndex],u=u.index+u[0].indexOf(a),a=u+a.length;if(r<a)break;i.push({start:u,finish:a}),o.lastIndex=a}return i}(o,a,e.sOffset,o.length-e.fOffset);return i=e,function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,a=e.length;i<a;i++){var u=e[i],c=t(u);c!==n&&(r.push(o),o=[]),n=c,o.push(u)}return 0!==o.length&&r.push(o),r}((t=function(e,n){var t=s(n),r=e.last,o=r+t.length,t=m(i,function(e,t){return e.start<o&&e.finish>r?[{element:n,start:Math.max(r,e.start)-r,finish:Math.min(o,e.finish)-r,matchId:t}]:[]});return{results:e.results.concat(t),last:o}},n={results:[],last:0},d(r,function(e){n=t(n,e)}),n.results),function(e){return e.matchId})})}function k(e,o){t(e,function(e,r){t(e,function(e){var t=ae(o.cloneNode(!1));a(t,"data-mce-index",r);var n=e.element.dom;n.length===e.finish&&0===e.start?c(e.element,t):(n.length!==e.finish&&n.splitText(e.finish),e=n.splitText(e.start),c(ae(e),t))})})}function O(e){return"number"==typeof(e=e.getAttribute("data-mce-index"))?""+e:e}function T(e,t,n,r){var o=e.dom.create("span",{"data-mce-bogus":1});o.className="mce-match-marker";var i,a,u,c,s,l=e.getBody();return se(e,t,!1),r?(i=e.dom,a=n,u=e.selection,c=o,t=u.getBookmark(),i=0<(r=i.select("td[data-mce-selected],th[data-mce-selected]")).length?(s=i,m(r,function(e){return S(s,e)})):x(i,u.getRng()),i=C(a,i),k(i,c),u.moveToBookmark(t),i.length):(e=e.dom,n=n,o=o,l=S(e,l),l=C(n,l),k(l,o),l.length)}function A(e){var t=e.parentNode;e.firstChild&&t.insertBefore(e.firstChild,e),e.parentNode.removeChild(e)}function R(e,t){var n=[],r=J.toArray(e.getBody().getElementsByTagName("span"));if(r.length)for(var o=0;o<r.length;o++){var i=O(r[o]);null!==i&&i.length&&i===t.toString()&&n.push(r[o])}return n}function D(e,t,n){var r=t.get(),o=r.index,t=e.dom;return(n=!1!==n)?o+1===r.count?o=0:o++:o-1==-1?o=r.count-1:o--,t.removeClass(R(e,r.index),"mce-match-marker-selected"),(r=R(e,o)).length?(t.addClass(R(e,o),"mce-match-marker-selected"),e.selection.scrollIntoView(r[0]),o):-1}function _(e,t){var n=t.parentNode;e.remove(t),e.isEmpty(n)&&e.remove(n)}function N(e,t,n,r,o,i){var a,u=(a=o,u="("+n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(/\s/g,"[^\\S\\r\\n\\uFEFF]")+")",a?"(?:^|\\s|"+Y()+")"+u+"(?=$|\\s|"+Y()+")":u),u={regex:new RegExp(u,r?"g":"gi"),matchIndex:1};return(u=T(e,t,u,i))&&(e=D(e,t,!0),t.set({index:e,count:u,text:n,matchCase:r,wholeWord:o,inSelection:i})),u}function P(e,t){e=D(e,t,!0),t.set($($({},t.get()),{index:e}))}function E(e,t){e=D(e,t,!1),t.set($($({},t.get()),{index:e}))}function I(e){return null!==(e=O(e))&&0<e.length}function B(e,t,n,r,o){var i,a=t.get(),u=a.index,c=u;r=!1!==r;for(var s=e.getBody(),l=J.grep(J.toArray(s.getElementsByTagName("span")),I),f=0;f<l.length;f++){var d=O(l[f]),m=i=parseInt(d,10);if(o||m===a.index){for(n.length?(l[f].firstChild.nodeValue=n,A(l[f])):_(e.dom,l[f]);l[++f];){if((m=parseInt(O(l[f]),10))!==i){f--;break}_(e.dom,l[f])}r&&c--}else u<i&&l[f].setAttribute("data-mce-index",String(i-1))}return t.set($($({},a),{count:o?0:a.count-1,index:c})),(r?P:E)(e,t),!o&&0<t.get().count}function M(i,a){var t,e=(t=f(X.none()),{clear:function(){return t.set(X.none())},set:function(e){return t.set(X.some(e))},isSet:function(){return t.get().isSome()},on:function(e){return t.get().each(e)}});function u(e){(1<a.get().count?e.enable:e.disable)("next"),(1<a.get().count?e.enable:e.disable)("prev")}function o(e,t){e=t?e.disable:e.enable,d(["replace","replaceall","prev","next"],e)}function c(e,t){le.browser.isSafari()&&le.deviceType.isTouch()&&("find"===t||"replace"===t||"replaceall"===t)&&e.focus(t)}function s(e){se(i,a,!1),o(e,!0),u(e)}function l(e){var t,n=e.getData(),r=a.get();n.findtext.length?(r.text===n.findtext&&r.matchCase===n.matchcase&&r.wholeWord===n.wholewords?P(i,a):((n=N(i,a,n.findtext,n.matchcase,n.wholewords,n.inselection))<=0&&(t=e,i.windowManager.alert("Could not find the specified string.",function(){t.focus("findtext")})),o(e,0===n)),u(e)):s(e)}i.undoManager.add();var n=J.trim(i.selection.getContent({format:"text"})),r=a.get(),r={title:"Find and Replace",size:"normal",body:{type:"panel",items:[{type:"bar",items:[{type:"input",name:"findtext",placeholder:"Find",maximized:!0,inputMode:"search"},{type:"button",name:"prev",text:"Previous",icon:"action-prev",disabled:!0,borderless:!0},{type:"button",name:"next",text:"Next",icon:"action-next",disabled:!0,borderless:!0}]},{type:"input",name:"replacetext",placeholder:"Replace with",inputMode:"search"}]},buttons:[{type:"menu",name:"options",icon:"preferences",tooltip:"Preferences",align:"start",items:[{type:"togglemenuitem",name:"matchcase",text:"Match case"},{type:"togglemenuitem",name:"wholewords",text:"Find whole words only"},{type:"togglemenuitem",name:"inselection",text:"Find in selection"}]},{type:"custom",name:"find",text:"Find",primary:!0},{type:"custom",name:"replace",text:"Replace",disabled:!0},{type:"custom",name:"replaceall",text:"Replace All",disabled:!0}],initialData:{findtext:n,replacetext:"",wholewords:r.wholeWord,matchcase:r.matchCase,inselection:r.inSelection},onChange:function(e,t){"findtext"===t.name&&0<a.get().count&&s(e)},onAction:function(e,t){var n,r,o=e.getData();switch(t.name){case"find":l(e);break;case"replace":(B(i,a,o.replacetext)?u:s)(e);break;case"replaceall":B(i,a,o.replacetext,!0,!0),s(e);break;case"prev":E(i,a),u(e);break;case"next":P(i,a),u(e);break;case"matchcase":case"wholewords":case"inselection":n=e.getData(),r=a.get(),a.set($($({},r),{matchCase:n.matchcase,wholeWord:n.wholewords,inSelection:n.inselection})),s(e)}c(e,t.name)},onSubmit:function(e){l(e),c(e,"find")},onClose:function(){i.focus(),se(i,a),i.undoManager.add()}};e.set(i.windowManager.open(r,{inline:"toolbar"}))}function L(e,t){return function(){M(e,t)}}var j,F,z,U,q=tinymce.util.Tools.resolve("tinymce.PluginManager"),$=function(){return($=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},W=i(!1),H=i(!0),V=i("[!-#%-*,-\\/:;?@\\[-\\]_{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]"),K=function(){return G},G={fold:function(e,t){return e()},is:W,isSome:W,isNone:H,getOr:F=function(e){return e},getOrThunk:j=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:i(null),getOrUndefined:i(void 0),or:F,orThunk:j,map:K,each:function(){},bind:K,exists:W,forall:H,filter:K,equals:j=function(e){return e.isNone()},equals_:j,toArray:function(){return[]},toString:i("none()")},Z=function(n){function e(){return o}function t(e){return e(n)}var r=i(n),o={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:H,isNone:W,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return Z(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:G},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(W,function(e){return t(n,e)})}};return o},X={some:Z,none:K,from:function(e){return null==e?G:Z(e)}},Y=V,J=tinymce.util.Tools.resolve("tinymce.util.Tools"),Q=(K=function(n){return function(e){return e=typeof(t=e),(null===t?"null":"object"==e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"==e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e)===n;var t}})("string"),ee=K("array"),te=(V=function(t){return function(e){return typeof e===t}})("boolean"),ne=V("number"),re=Array.prototype.slice,oe=Array.prototype.push,ie=Object.hasOwnProperty,V=("undefined"!=typeof window||Function("return this;")(),function(e){return 3===e.dom.nodeType}),ae=e,ue=(z=V,{get:function(e){if(!z(e))throw new Error("Can only get text value of a text node");return U(e).getOr("")},getOption:U=function(e){return z(e)?X.from(e.dom.nodeValue):X.none()},set:function(e,t){if(!z(e))throw new Error("Can only set raw text value of a text node");e.dom.nodeValue=t}}),ce=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),se=function(e,t,n){for(var r,o,i=t.get(),a=J.toArray(e.getBody().getElementsByTagName("span")),u=0;u<a.length;u++){var c=O(a[u]);null!==c&&c.length&&(c===i.index.toString()&&(r=r||a[u].firstChild,o=a[u].firstChild),A(a[u]))}if(t.set($($({},i),{index:-1,count:0,text:""})),r&&o){t=e.dom.createRng();return t.setStart(r,0),t.setEnd(o,o.data.length),!1!==n&&e.selection.setRng(t),t}},le=tinymce.util.Tools.resolve("tinymce.Env");q.add("searchreplace",function(e){var t,n,r,o,i,a=f({index:-1,count:0,text:"",matchCase:!1,wholeWord:!1,inSelection:!1}),u=a;return(t=e).addCommand("SearchReplace",function(){M(t,u)}),r=a,(n=e).ui.registry.addMenuItem("searchreplace",{text:"Find and replace...",shortcut:"Meta+F",onAction:L(n,r),icon:"search"}),n.ui.registry.addButton("searchreplace",{tooltip:"Find and replace",onAction:L(n,r),icon:"search"}),n.shortcuts.add("Meta+F","",L(n,r)),o=e,i=a,{done:function(e){return se(o,i,e)},find:function(e,t,n,r){return N(o,i,e,t,n,r=void 0===r?!1:r)},next:function(){return P(o,i)},prev:function(){return E(o,i)},replace:function(e,t,n){return B(o,i,e,t,n)}}})}(),function(){"use strict";function r(e,t){return t<0&&(t=0),3!==e.nodeType||(e=e.data.length)<t&&(t=e),t}function f(e,t,n){1!==t.nodeType||t.hasChildNodes()?e.setStart(t,r(t,n)):e.setStartBefore(t)}function d(e,t,n){1!==t.nodeType||t.hasChildNodes()?e.setEnd(t,r(t,n)):e.setEndAfter(t)}function o(e,t,n){var r,o,i,a,u=e.getParam("autolink_pattern",/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@(?!.*@))(.+)$/i),c=e.getParam("default_link_target",!1);if("A"!==e.selection.getNode().tagName){var s=e.selection.getRng().cloneRange();if(s.startOffset<5){if(!(l=s.endContainer.previousSibling)){if(!s.endContainer.firstChild||!s.endContainer.firstChild.nextSibling)return;l=s.endContainer.firstChild.nextSibling}if(i=l.length,f(s,l,i),d(s,l,i),s.endOffset<5)return;r=s.endOffset,o=l}else{if(3!==(o=s.endContainer).nodeType&&o.firstChild){for(;3!==o.nodeType&&o.firstChild;)o=o.firstChild;3===o.nodeType&&(f(s,o,0),d(s,o,o.nodeValue.length))}r=1===s.endOffset?2:s.endOffset-1-t}for(var l=r;f(s,o,2<=r?r-2:0),d(s,o,1<=r?r-1:0),--r," "!==(a=s.toString())&&""!==a&&160!==a.charCodeAt(0)&&0<=r-2&&a!==n;);(t=s.toString())===n||" "===t||160===t.charCodeAt(0)?(f(s,o,r),d(s,o,l),r+=1):(0===s.startOffset?f(s,o,0):f(s,o,r),d(s,o,l)),"."===(t=s.toString()).charAt(t.length-1)&&d(s,o,l-1);var t=(t=s.toString().trim()).match(u),u=e.getParam("link_default_protocol","http","string");t&&("www."===t[1]?t[1]=u+"://www.":/@$/.test(t[1])&&!/^mailto:/.test(t[1])&&(t[1]="mailto:"+t[1]),u=e.selection.getBookmark(),e.selection.setRng(s),e.execCommand("createlink",!1,t[1]+t[2]),!1!==c&&e.dom.setAttrib(e.selection.getNode(),"target",c),e.selection.moveToBookmark(u),e.nodeChanged())}}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=tinymce.util.Tools.resolve("tinymce.Env");e.add("autolink",function(e){var t,n;(t=e).on("keydown",function(e){13!==e.keyCode||o(t,-1,"")}),i.browser.isIE()?t.on("focus",function(){if(!n){n=!0;try{t.execCommand("AutoUrlDetect",!1,!0)}catch(e){}}}):(t.on("keypress",function(e){41!==e.keyCode||o(t,-1,"(")}),t.on("keyup",function(e){32!==e.keyCode||o(t,0,"")}))})}(),function(){"use strict";function r(e,t){var n,r=e.dom,o=e.selection.getSelectedBlocks();o.length&&(n=r.getAttrib(o[0],"dir"),s.each(o,function(e){r.getParent(e.parentNode,'*[dir="'+t+'"]',r.getRoot())||r.setAttrib(e,"dir",n!==t?t:null)}),e.nodeChanged())}function i(e){return function(){return e}}function e(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}}function a(e){return v(e.dom.host)}function o(e){return"rtl"===(n="direction",r=(t=e).dom,""!==(e=window.getComputedStyle(r).getPropertyValue(n))||S(t)?e:(n=n,void 0!==(r=r).style&&h(r.style.getPropertyValue)?r.style.getPropertyValue(n):""))?"rtl":"ltr";var t,n,r}function u(n,r){return function(t){function e(e){e=v(e.element),t.setActive(o(e)===r)}return n.on("NodeChange",e),function(){return n.off("NodeChange",e)}}}var t,n,c=tinymce.util.Tools.resolve("tinymce.PluginManager"),s=tinymce.util.Tools.resolve("tinymce.util.Tools"),l=i(!1),f=i(!0),d=function(){return m},m={fold:function(e,t){return e()},is:l,isSome:l,isNone:f,getOr:n=function(e){return e},getOrThunk:t=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:i(null),getOrUndefined:i(void 0),or:n,orThunk:t,map:d,each:function(){},bind:d,exists:l,forall:f,filter:d,equals:t=function(e){return e.isNone()},equals_:t,toArray:function(){return[]},toString:i("none()")},g=function(n){function e(){return o}function t(e){return e(n)}var r=i(n),o={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:f,isNone:l,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return g(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:m},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(l,function(e){return t(n,e)})}};return o},p={some:g,none:d,from:function(e){return null==e?m:g(e)}},h=function(e){return"function"==typeof e},v=e,b=(d=("undefined"!=typeof window||Function("return this;")(),function(t){return function(e){return e.dom.nodeType===t}}))(3),y=d(9),w=d(11),x=h(Element.prototype.attachShadow)&&h(Node.prototype.getRootNode)?function(e){return v(e.dom.getRootNode())}:function(e){return y(e)?e:v(e.dom.ownerDocument)},S=function(e){var t=b(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;var n,r,o,i=t.ownerDocument;return o=v(t),e=x(o),(!w(o=e)||(null===(o=o.dom.host)||void 0===o)?p.none():p.some(e)).fold(function(){return i.body.contains(t)},(n=S,r=a,function(e){return n(r(e))}))};c.add("directionality",function(e){var t,n;(t=e).addCommand("mceDirectionLTR",function(){r(t,"ltr")}),t.addCommand("mceDirectionRTL",function(){r(t,"rtl")}),(n=e).ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:function(){return n.execCommand("mceDirectionLTR")},onSetup:u(n,"ltr")}),n.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:function(){return n.execCommand("mceDirectionRTL")},onSetup:u(n,"rtl")})})}(),function(){"use strict";function l(e,t,n){e.dom.toggleClass(e.getBody(),"mce-visualblocks"),n.set(!n.get()),e=e,n=n.get(),e.fire("VisualBlocks",{state:n})}function f(n,r){return function(t){t.setActive(r.get());function e(e){return t.setActive(e.state)}return n.on("VisualBlocks",e),function(){return n.off("VisualBlocks",e)}}}tinymce.util.Tools.resolve("tinymce.PluginManager").add("visualblocks",function(e,t){var n,r,o,i,a,u,c=(n=!1,{get:function(){return n},set:function(e){n=e}}),s=c;(r=e).addCommand("mceVisualBlocks",function(){l(r,0,s)}),i=c,(o=e).ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:function(){return o.execCommand("mceVisualBlocks")},onSetup:f(o,i)}),o.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:function(){return o.execCommand("mceVisualBlocks")},onSetup:f(o,i)}),u=c,(a=e).on("PreviewFormats AfterPreviewFormats",function(e){u.get()&&a.dom.toggleClass(a.getBody(),"mce-visualblocks","afterpreviewformats"===e.type)}),a.on("init",function(){a.getParam("visualblocks_default_state",!1,"boolean")&&l(a,0,u)})})}(),function(){"use strict";function e(e){return function(){return e}}function o(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}function r(e,t){for(var n=D(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}}function u(e,t,n){!function(e,t,n){if(!(T(n)||A(n)||R(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")}(e.dom,t,n)}function a(e,t){e.dom.removeAttribute(t)}function c(e,t){return void 0===(t=null===(t=e.dom.getAttribute(t))?void 0:t)||""===t?[]:t.split(" ")}function s(e){return void 0!==e.dom.classList}function i(e,t){return i=t,0<(e=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n];o!==i&&t.push(o)}return t}(c(t=e,"class"))).length?u(t,"class",e.join(" ")):a(t,"class"),0;var i}function t(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}}function l(e){return'<span data-mce-bogus="1" class="mce-'+E[e]+'">'+e+"</span>"}function n(e){var t=_(e);return N(e)&&void 0!==t&&I.test(t)}function f(e){return"span"===e.nodeName.toLowerCase()&&e.classList.contains("mce-nbsp-wrap")}function d(a,e){e=j(P(e),n),o(e,function(e){var t,n=e.dom.parentNode;if(f(n))t=P(n),n=L,s(t)?t.dom.classList.add(n):(o=o=n,o=c(t=t=t,"class").concat([o]),u(t,"class",o.join(" ")));else{for(var r,o=a.dom.encode(_(e)).replace(B,l),i=a.dom.create("div",null,o);r=i.lastChild;)a.dom.insertAfter(r,e.dom);a.dom.remove(e.dom)}})}function m(r,e){e=r.dom.select(M,e),o(e,function(e){var t,n;f(e)?(n=P(e),t=L,s(n)?n.dom.classList.remove(t):i(n,t),0===(s(n=n)?n.dom.classList:c(n,"class")).length&&a(n,"class")):r.dom.remove(e,!0)})}function g(e){var t=e.getBody(),n=e.selection.getBookmark(),r=void 0!==(r=function(e,t){for(;e.parentNode;){if(e.parentNode===t)return e;e=e.parentNode}}(e.selection.getNode(),t))?r:t;m(e,r),d(e,r),e.selection.moveToBookmark(n)}function p(e,t){var n=e,r=t.get();n.fire("VisualChars",{state:r}),r=e.getBody(),(!0===t.get()?d:m)(e,r)}function h(e,t){e.addCommand("mceVisualChars",function(){!function(e,t){t.set(!t.get());var n=e.selection.getBookmark();p(e,t),e.selection.moveToBookmark(n)}(e,t)})}function v(n,r){return function(t){t.setActive(r.get());function e(e){return t.setActive(e.state)}return n.on("VisualChars",e),function(){return n.off("VisualChars",e)}}}var b,y,w,x=tinymce.util.Tools.resolve("tinymce.PluginManager"),S=e(!1),C=e(!0),k=function(){return O},O={fold:function(e,t){return e()},is:S,isSome:S,isNone:C,getOr:y=function(e){return e},getOrThunk:b=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:e(null),getOrUndefined:e(void 0),or:y,orThunk:b,map:k,each:function(){},bind:k,exists:S,forall:C,filter:k,equals:k=function(e){return e.isNone()},equals_:k,toArray:function(){return[]},toString:e("none()")},T=function(e){return e=typeof(t=e),"string"==(null===t?"null":"object"==e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"==e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e);var t},A=(k=function(t){return function(e){return typeof e===t}})("boolean"),R=k("number"),D=Object.keys,_=("undefined"!=typeof window||Function("return this;")(),function(e){return e.dom.nodeValue}),N=function(e){return 3===e.dom.nodeType},P=t,E={" ":"nbsp","­":"shy"},I=(k=function(e,t){var n="";return r(e,function(e,t){n+=t}),new RegExp("["+n+"]",t?"g":"")})(E),B=k(E,!0),M=(w="",r(E,function(e){w&&(w+=","),w+="span.mce-"+e}),w),L="mce-nbsp",j=function(e,t){var n=[],e=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r}(e.dom.childNodes,P);return o(e,function(e){n=(n=t(e)?n.concat([e]):n).concat(j(e,t))}),n},F=tinymce.util.Tools.resolve("tinymce.util.Delay");x.add("visualchars",function(e){var t,n,r,o,i,a,u,c,s,l=(r=e.getParam("visualchars_default_state",!1),t=r,{get:function(){return t},set:function(e){t=e}});return h(e,l),r=l,(n=e).ui.registry.addToggleButton("visualchars",{tooltip:"Show invisible characters",icon:"visualchars",onAction:function(){return n.execCommand("mceVisualChars")},onSetup:v(n,r)}),n.ui.registry.addToggleMenuItem("visualchars",{text:"Show invisible characters",icon:"visualchars",onAction:function(){return n.execCommand("mceVisualChars")},onSetup:v(n,r)}),o=e,i=l,a=F.debounce(function(){g(o)},300),!1!==o.getParam("forced_root_block")&&o.on("keydown",function(e){!0===i.get()&&(13===e.keyCode?g(o):a())}),o.on("remove",a.stop),c=l,(u=e).on("init",function(){p(u,c)}),s=l,{isEnabled:function(){return s.get()}}})}(),function(){"use strict";function a(){}function i(e){return function(){return e}}function u(e,a,u,c){return function(e){for(var t,n=ce(e),r=0,o=n.length;r<o;r++){var i=n[r];t=e[i],(a(t,i=i)?u:c)(t,i)}}(e),1}function b(e){return!(null===e||void 0===e)}function y(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!me(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);ve.apply(t,e[n])}return t}function e(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}}function w(e){return e.getParam("image_dimensions",!0,"boolean")}function c(e,t){return Math.max(parseInt(e,10),parseInt(t,10))}function p(e){return e&&e.replace(/px$/,"")}function o(e){return 0<e.length&&/^[0-9]+$/.test(e)&&(e+="px"),e}function h(e){if(e.margin){var t=String(e.margin).split(" ");switch(t.length){case 1:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[0],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[0];break;case 2:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[1];break;case 3:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[1];break;case 4:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[3]}delete e.margin}return e}function r(e){return"IMG"===e.nodeName&&(e.hasAttribute("data-mce-object")||e.hasAttribute("data-mce-placeholder"))}function v(e){return e.style.marginLeft&&e.style.marginRight&&e.style.marginLeft===e.style.marginRight?p(e.style.marginLeft):""}function x(e){return e.style.marginTop&&e.style.marginBottom&&e.style.marginTop===e.style.marginBottom?p(e.style.marginTop):""}function S(e){return e.style.borderWidth?p(e.style.borderWidth):""}function s(e,t){return e.hasAttribute(t)?e.getAttribute(t):""}function C(e,t){return e.style[t]||""}function l(e){return null!==e.parentNode&&"FIGURE"===e.parentNode.nodeName}function k(e,t,n){""===n?e.removeAttribute(t):e.setAttribute(t,n)}function f(e,t){var n=e.getAttribute("style");0<(n=t(null!==n?n:"")).length?(e.setAttribute("style",n),e.setAttribute("data-mce-style",n)):e.removeAttribute("style")}function d(e,r){return function(e,t,n){e.style[t]?(e.style[t]=o(n),f(e,r)):k(e,t,n)}}function m(e,t){return e.style[t]?p(e.style[t]):s(e,t)}function O(e,t){t=o(t),e.style.marginLeft=t,e.style.marginRight=t}function T(e,t){t=o(t),e.style.marginTop=t,e.style.marginBottom=t}function A(e,t){t=o(t),e.style.borderWidth=t}function R(e,t){e.style.borderStyle=t}function g(e){return"FIGURE"===e.nodeName}function D(e){return 0===Ce.getAttrib(e,"alt").length&&"presentation"===Ce.getAttrib(e,"role")}function _(){return{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}}function N(e,t){return{src:s(t,"src"),alt:D(n=t)?"":s(n,"alt"),title:s(t,"title"),width:m(t,"width"),height:m(t,"height"),class:s(t,"class"),style:e(s(t,"style")),caption:l(t),hspace:v(t),vspace:x(t),border:S(t),borderStyle:C(t,"borderStyle"),isDecorative:D(t)};var n}function P(e,t,n,r,o){n[r]!==t[r]&&o(e,r,n[r])}function E(e,t,n){var r;n?(Ce.setAttrib(e,"role","presentation"),r=ye(e),be(r,"alt","")):(ge(t)?(r=ye(e)).dom.removeAttribute("alt"):(r=ye(e),be(r,"alt",t)),"presentation"===Ce.getAttrib(e,"role")&&Ce.setAttrib(e,"role",""))}function I(r,o){return function(e,t,n){r(e,n),f(e,o)}}function B(e,t,n){var r=N(e,n);P(n,r,t,"caption",function(e,t,n){return l(e=e)?(r=e.parentNode,Ce.insertAfter(e,r),Ce.remove(r)):(r=e,e=Ce.create("figure",{class:"image"}),Ce.insertAfter(e,r),e.appendChild(r),e.appendChild(Ce.create("figcaption",{contentEditable:"true"},"Caption")),e.contentEditable="false"),0;var r}),P(n,r,t,"src",k),P(n,r,t,"title",k),P(n,r,t,"width",d(0,e)),P(n,r,t,"height",d(0,e)),P(n,r,t,"class",k),P(n,r,t,"style",I(function(e,t){return k(e,"style",t),0},e)),P(n,r,t,"hspace",I(O,e)),P(n,r,t,"vspace",I(T,e)),P(n,r,t,"border",I(A,e)),P(n,r,t,"borderStyle",I(R,e)),t.alt===r.alt&&t.isDecorative===r.isDecorative||E(n,t.alt,t.isDecorative)}function M(e,t){return t=e.dom.styles.parse(t),t=h(t),t=e.dom.styles.parse(e.dom.styles.serialize(t)),e.dom.styles.serialize(t)}function L(e){var t=e.selection.getNode(),n=e.dom.getParent(t,"figure.image");return n?e.dom.select("img",n)[0]:t&&("IMG"!==t.nodeName||r(t))?null:t}function j(n,e){var r,t=n.dom,o=(i=n.schema.getTextBlockElements(),u(i,function(e,t){return!n.schema.isValidChild(t,"figure")},(r=i={},function(e,t){r[t]=e}),a),i),i=t.getParent(e.parentNode,function(e){return t=o,e=e.nodeName,se.call(t,e)&&void 0!==t[e]&&null!==t[e];var t},n.getBody());return i?t.split(i,e):e}function F(n,e){var t=function(e){var t=document.createElement("img");if(B(function(e){return M(n,e)},ne(ne({},e),{caption:!1}),t),E(t,e.alt,e.isDecorative),e.caption){e=Ce.create("figure",{class:"image"});return e.appendChild(t),e.appendChild(Ce.create("figcaption",{contentEditable:"true"},"Caption")),e.contentEditable="false",e}return t}(e);n.dom.setAttrib(t,"data-mce-id","__mcenew"),n.focus(),n.selection.setContent(t.outerHTML),e=n.dom.select('*[data-mce-id="__mcenew"]')[0],n.dom.setAttrib(e,"data-mce-id",null),g(e)?(t=j(n,e),n.selection.select(t)):n.selection.select(e)}function z(e){return fe(e.value)?e.value:""}function U(t){return void 0===t&&(t=z),function(e){return e?ue.from(e).map(function(e){return Re(e,t)}):ue.none()}}function q(e,t){return e.bind(function(e){return De(e,t)})}function $(r){var t,e,o=_e(function(e){return r.convertURL(e.value||e.url,"src")}),n=new xe(function(t){var e,n=function(e){t(o(e).map(function(e){return y([[{text:"None",value:""}],e])}))};"string"==typeof(e=r.getParam("image_list",!1))?Se.send({url:e,success:function(e){n(JSON.parse(e))}}):"function"==typeof e?e(n):n(e)}),i=(e=r.getParam("image_class_list"),U(z)(e)),a=r.getParam("image_advtab",!1,"boolean"),u=r.getParam("image_uploadtab",!0,"boolean"),c=b(r.getParam("images_upload_url")),s=b(r.getParam("images_upload_handler")),l=(e=L(t=r))?N(function(e){return M(t,e)},e):_(),f=r.getParam("image_description",!0,"boolean"),d=r.getParam("image_title",!1,"boolean"),m=w(r),g=r.getParam("image_caption",!1,"boolean"),p=r.getParam("a11y_advanced_options",!1,"boolean"),h=r.getParam("automatic_uploads",!0,"boolean"),v=ue.some(r.getParam("image_prepend_url","","string")).filter(function(e){return fe(e)&&0<e.length});return n.then(function(e){return{image:l,imageList:e,classList:i,hasAdvTab:a,hasUploadTab:u,hasUploadUrl:c,hasUploadHandler:s,hasDescription:f,hasImageTitle:d,hasDimensions:m,hasImageCaption:g,prependURL:v,hasAccessibilityOptions:p,automaticUploads:h}})}function W(e){var t=e.imageList.map(function(e){return{name:"images",type:"listbox",label:"Image list",items:e}}),n={name:"alt",type:"input",label:"Alternative description",disabled:e.hasAccessibilityOptions&&e.image.isDecorative},r=e.classList.map(function(e){return{name:"classes",type:"listbox",label:"Class",items:e}});return y([[{name:"src",type:"urlinput",filetype:"image",label:"Source"}],t.toArray(),e.hasAccessibilityOptions&&e.hasDescription?[{type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]}]:[],e.hasDescription?[n]:[],e.hasImageTitle?[{name:"title",type:"input",label:"Image title"}]:[],e.hasDimensions?[{name:"dimensions",type:"sizeinput"}]:[],[{type:"grid",columns:2,items:y([r.toArray(),e.hasImageCaption?[{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[]])}]])}function H(e){return{src:{value:e.src,meta:{}},images:e.src,alt:e.alt,title:e.title,dimensions:{width:e.width,height:e.height},classes:e.class,caption:e.caption,style:e.style,vspace:e.vspace,border:e.border,hspace:e.hspace,borderstyle:e.borderStyle,fileinput:[],isDecorative:e.isDecorative}}function V(e,t){return{src:e.src.value,alt:0===e.alt.length&&t?null:e.alt,title:e.title,width:e.dimensions.width,height:e.dimensions.height,class:e.classes,style:e.style,caption:e.caption,hspace:e.hspace,vspace:e.vspace,border:e.border,borderStyle:e.borderstyle,isDecorative:e.isDecorative}}function K(e,t,n,r){var o,i,a,u,c,s,l,f,d,m;l=t,d=(f=r).getData(),m=d.src.value,(/^(?:[a-zA-Z]+:)?\/\//.test(m)?ue.none():l.prependURL.bind(function(e){return m.substring(0,e.length)!==e?ue.some(e+m):ue.none()})).each(function(e){f.setData({src:{value:e,meta:d.src.meta}})}),a=t,s=(u=r).getData(),void 0!==(l=s.src.meta)&&(s=Oe({},s),c=s,l=l,(a=a).hasDescription&&fe(l.alt)&&(c.alt=l.alt),a.hasAccessibilityOptions&&(c.isDecorative=l.isDecorative||c.isDecorative||!1),a.hasImageTitle&&fe(l.title)&&(c.title=l.title),a.hasDimensions&&(fe(l.width)&&(c.dimensions.width=l.width),fe(l.height)&&(c.dimensions.height=l.height)),fe(l.class)&&q(a.classList,l.class).each(function(e){c.classes=e.value}),a.hasImageCaption&&pe(l.caption)&&(c.caption=l.caption),a.hasAdvTab&&(fe(l.style)&&(c.style=l.style),fe(l.vspace)&&(c.vspace=l.vspace),fe(l.border)&&(c.border=l.border),fe(l.hspace)&&(c.hspace=l.hspace),fe(l.borderstyle)&&(c.borderstyle=l.borderstyle)),u.setData(s)),l=e,u=t,o=n,e=(s=(i=r).getData()).src.value,(s=s.src.meta||{}).width||s.height||!u.hasDimensions||(0<e.length?l.imageSize(e).then(function(e){o.open&&i.setData({dimensions:e})}).catch(function(e){return console.error(e)}):i.setData({dimensions:{width:"",height:""}})),e=t,t=n,r=(n=r).getData(),r=q(e.imageList,r.src.value),t.prevImage=r,n.setData({images:r.map(function(e){return e.value}).getOr("")})}function G(a,u,c,s){var e=s.getData();s.block("Uploading image"),(0<(e=e.fileinput).length?ue.some(e[0]):ue.none()).fold(function(){s.unblock()},function(t){function n(){s.unblock(),URL.revokeObjectURL(o)}function r(e){s.setData({src:{value:e,meta:{}}}),s.showTab("general"),K(a,u,c,s)}var o=URL.createObjectURL(t),i=t;new xe(function(e,t){var n=new FileReader;n.onload=function(){e(n.result)},n.onerror=function(){t(n.error.message)},n.readAsDataURL(i)}).then(function(e){e=a.createBlobCache(t,o,e);u.automaticUploads?a.uploadImage(e).then(function(e){r(e.url),n()}).catch(function(e){n(),a.alertErr(e)}):(a.addToBlobCache(e),r(e.blobUri()),s.unblock())})})}function Z(d,m,g){return function(e,t){var n,r,o,i,a,u,c,s,l,f;"src"===t.name?K(d,m,g,e):"images"===t.name?(n=d,c=m,r=g,i=(o=e).getData(),(a=q(c.imageList,i.images)).each(function(e){""===i.alt||r.prevImage.map(function(e){return e.text===i.alt}).getOr(!1)?""===e.value?o.setData({src:e,alt:r.prevAlt}):o.setData({src:e,alt:e.text}):o.setData({src:e})}),r.prevImage=a,K(n,c,r,o)):"alt"===t.name?g.prevAlt=e.getData().alt:"style"===t.name?(l=d,f=(u=e).getData(),c=l.parseStyle,s=l.serializeStyle,f=h(c((l=f).style)),(l=Oe({},l)).vspace=f["margin-top"]&&f["margin-bottom"]&&f["margin-top"]===f["margin-bottom"]?p(String(f["margin-top"])):"",l.hspace=f["margin-right"]&&f["margin-left"]&&f["margin-right"]===f["margin-left"]?p(String(f["margin-right"])):"",l.border=f["border-width"]?p(String(f["border-width"])):"",l.borderstyle=f["border-style"]?String(f["border-style"]):"",l.style=s(c(s(f))),u.setData(l)):"vspace"===t.name||"hspace"===t.name||"border"===t.name||"borderstyle"===t.name?(s=d,f=e,u=Oe(H(m.image),f.getData()),l=s.normalizeCss,s=V(u,!1),u=document.createElement("img"),k(u,"style",s.style),!v(u)&&""===s.hspace||O(u,s.hspace),!x(u)&&""===s.vspace||T(u,s.vspace),!S(u)&&""===s.border||A(u,s.border),!C(u,"borderStyle")&&""===s.borderStyle||R(u,s.borderStyle),u=l(u.getAttribute("style")),f.setData({style:u})):"fileinput"===t.name?G(d,m,g,e):"isDecorative"===t.name&&(e.getData().isDecorative?e.disable("alt"):e.enable("alt"))}}function X(o){return function(e){var t,n,r={prevImage:q((n=e).imageList,n.image.src),prevAlt:n.image.alt,open:!0};return{title:"Insert/Edit Image",size:"normal",body:(n=e).hasAdvTab||n.hasUploadUrl||n.hasUploadHandler?{type:"tabpanel",tabs:y([[{title:"General",name:"general",items:W(n)}],n.hasAdvTab?[{title:"Advanced",name:"advanced",items:[{type:"input",label:"Style",name:"style"},{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}]:[],n.hasUploadTab&&(n.hasUploadUrl||n.hasUploadHandler)?[{title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]}]:[]])}:{type:"panel",items:Ne(n)},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:H(e.image),onSubmit:o.onSubmit(e),onChange:Z(o,e,r),onClose:(t=r,function(){t.open=!1})}}}function Y(t){return function(e){return o=t.documentBaseURI.toAbsolute(e),new xe(function(t){function n(e){r.parentNode&&r.parentNode.removeChild(r),t(e)}var r=document.createElement("img");r.onload=function(){var e={width:c(r.width,r.clientWidth),height:c(r.height,r.clientHeight)};n(xe.resolve(e))},r.onerror=function(){n(xe.reject("Failed to get image dimensions for: "+o))};var e=r.style;e.visibility="hidden",e.position="fixed",e.bottom=e.left="0px",e.width=e.height="auto",document.body.appendChild(r),r.src=o}).then(function(e){return{width:String(e.width),height:String(e.height)}});var o}}function J(e){var t,n,r,o,i,a,u,c,s={onSubmit:function(n){return function(e){var t=Oe(H(n.image),e.getData());c.execCommand("mceUpdateImage",!1,V(t,n.hasAccessibilityOptions)),c.editorUpload.uploadImagesAuto(),e.close()}},imageSize:Y(c=e),addToBlobCache:function(e){u.editorUpload.blobCache.add(e)},createBlobCache:function(e,t,n){return a.editorUpload.blobCache.create({blob:e,blobUri:t,name:e.name?e.name.replace(/\.[^\.]+$/,""):null,filename:e.name,base64:n.split(",")[1]})},alertErr:function(e){i.windowManager.alert(e)},normalizeCss:function(e){return M(o,e)},parseStyle:function(e){return r.dom.parseStyle(e)},serializeStyle:function(e,t){return n.dom.serializeStyle(e,t)},uploadImage:(t=n=r=o=i=a=u=e,function(e){return Te(t).upload([e],!1).then(function(e){return 0===e.length?xe.reject("Failed to upload image"):!1===e[0].status?xe.reject(e[0].error.message):e[0]})})};return{open:function(){$(e).then(X(s)).then(e.windowManager.open)}}}function Q(d){d.addCommand("mceImage",J(d).open),d.addCommand("mceUpdateImage",function(e,f){d.undoManager.transact(function(){var t,e,n,r,o,i,a,u,c,s,l=f;(s=L(i=d))?(a=N(function(e){return M(i,e)},s),(u=ne(ne({},a),l)).src?(a=u,c=L(t=i),B(function(e){return M(t,e)},a,c),t.dom.setAttrib(c,"src",c.getAttribute("src")),g(c.parentNode)?(u=c.parentNode,j(t,u),t.selection.select(c.parentNode)):(t.selection.select(c),e=t,n=a,o=function(){r.onload=r.onerror=null,e.selection&&(e.selection.select(r),e.nodeChanged())},(r=c).onload=function(){n.width||n.height||!w(e)||e.dom.setAttribs(r,{width:String(r.clientWidth),height:String(r.clientHeight)}),o()},r.onerror=o)):(c=i,(s=s)&&(s=c.dom.is(s.parentNode,"figure.image")?s.parentNode:s,c.dom.remove(s),c.focus(),c.nodeChanged(),c.dom.isEmpty(c.getBody())&&(c.setContent(""),c.selection.setCursorLocation())))):l.src&&F(i,ne(ne({},_()),l))})})}function ee(i){return function(e){for(var t,n=e.length,r=function(e){e.attr("contenteditable",i?"true":null)};n--;){var o=e[n];(t=o.attr("class"))&&/\bimage\b/.test(t)&&(o.attr("contenteditable",i?"false":null),Ae.each(o.getAll("figcaption"),r))}}}var t,te,n=tinymce.util.Tools.resolve("tinymce.PluginManager"),ne=function(){return(ne=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},re=i(!1),oe=i(!0),ie={fold:function(e,t){return e()},is:re,isSome:re,isNone:oe,getOr:we=function(e){return e},getOrThunk:le=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:i(null),getOrUndefined:i(void 0),or:we,orThunk:le,map:we=function(){return ie},each:a,bind:we,exists:re,forall:oe,filter:we,equals:le=function(e){return e.isNone()},equals_:le,toArray:function(){return[]},toString:i("none()")},ae=function(n){function e(){return o}function t(e){return e(n)}var r=i(n),o={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:oe,isNone:re,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return ae(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:ie},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(re,function(e){return t(n,e)})}};return o},ue={some:ae,none:we,from:function(e){return null==e?ie:ae(e)}},ce=Object.keys,se=Object.hasOwnProperty,le=function(n){return function(e){return e=typeof(t=e),(null===t?"null":"object"==e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"==e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e)===n;var t}},fe=le("string"),de=le("object"),me=le("array"),ge=(t=null,function(e){return t===e}),pe=(we=function(t){return function(e){return typeof e===t}})("boolean"),he=we("number"),ve=Array.prototype.push,be=("undefined"!=typeof window||Function("return this;")(),function(e,t,n){!function(e,t,n){if(!(fe(n)||pe(n)||he(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")}(e.dom,t,n)}),ye=e,we=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),xe=tinymce.util.Tools.resolve("tinymce.util.Promise"),Se=tinymce.util.Tools.resolve("tinymce.util.XHR"),Ce=we.DOM,ke=Object.prototype.hasOwnProperty,Oe=(te=function(e,t){return de(e)&&de(t)?Oe(e,t):t},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<e.length;r++){var o,i=e[r];for(o in i)ke.call(i,o)&&(n[o]=te(n[o],i[o]))}return n}),Te=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),Ae=tinymce.util.Tools.resolve("tinymce.util.Tools"),Re=function(e,r){var o=[];return Ae.each(e,function(e){var t,n=fe((t=e).text)?t.text:fe(t.title)?t.title:"";void 0!==e.menu?(t=Re(e.menu,r),o.push({text:n,items:t})):(e=r(e),o.push({text:n,value:e}))}),o},De=function(e,r){return function(e){for(var t=0;t<e.length;t++){var n=(n=e[t],Object.prototype.hasOwnProperty.call(n,"items")?De(n.items,r):n.value===r?ue.some(n):ue.none());if(n.isSome())return n}return ue.none()}(e)},_e=U,Ne=W;n.add("image",function(e){var t,n;(t=e).on("PreInit",function(){t.parser.addNodeFilter("figure",ee(!0)),t.serializer.addNodeFilter("figure",ee(!1))}),(n=e).ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:J(n).open,onSetup:function(e){return n.selection.selectorChangedWithUnbind("img:not([data-mce-object],[data-mce-placeholder]),figure.image",e.setActive).unbind}}),n.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:J(n).open}),n.ui.registry.addContextMenu("image",{update:function(e){return g(e)||"IMG"===e.nodeName&&!r(e)?["image"]:[]}}),Q(e)})}(),function(){"use strict";function d(e){return e=e.getParam("link_assume_external_targets",!1),Y(e)&&e?1:!Z(e)||"http"!==e&&"https"!==e?0:e}function m(e){return e.getParam("default_link_target")}function g(e){return e.getParam("target_list",!0)}function p(e){return e.getParam("rel_list",[],"array")}function h(e){return e.getParam("allow_unsafe_link_target",!1,"boolean")}function f(){}function i(e){return function(){return e}}function e(){return te}function v(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!X(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);ie.apply(t,e[n])}return t}function b(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome())return r}return re.none()}function c(e,t){return e?re.some(t):re.none()}function n(e){return Z(e.value)?e.value:""}function t(t){return void 0===t&&(t=n),function(e){return re.from(e).map(function(e){return ue(e,t)})}}function l(e,a,u,c){return function(e){for(var t,n=me(e),r=0,o=n.length;r<o;r++){var i=n[r];t=e[i],(a(t,i=i)?u:c)(t,i)}}(e),1}function r(e,t){return ge.call(e,t)}function o(e){return e&&"a"===e.nodeName.toLowerCase()}function a(e){return o(e)&&!!he(e)}function u(e,t){if(e.collapsed)return[];for(var e=e.cloneContents(),n=new pe(e.firstChild,e),r=[],o=e.firstChild;t(o)&&r.push(o),o=n.next(););return r}function y(e){return/^\w+:/i.test(e)}function w(e,t){var n=["noopener"],r=e?e.split(/\s+/):[],e=function(e){return e.filter(function(e){return-1===ae.inArray(n,e)})};return 0<(r=t?0<(t=e(t=r)).length?t.concat(n):n:e(r)).length?ae.trim(r.sort().join(" ")):""}function x(e,t){return t=t||e.selection.getNode(),ve(t)?e.dom.select("a[href]",t)[0]:e.dom.getParent(t,"a[href]")}function S(e,t){return(t?t.innerText||t.textContent:e.getContent({format:"text"})).replace(/\uFEFF/g,"")}function s(e){return 0<ae.grep(e,a).length}function C(e){var t=e.schema.getTextInlineElements();return 0===u(e.selection.getRng(),function(e){return 1===e.nodeType&&!o(e)&&!r(t,e.nodeName.toLowerCase())}).length}function k(e){return t=["title","rel","class","target"],r=function(t,n){return e[n].each(function(e){t[n]=0<e.length?e:null}),t},o={href:e.href},function(e){for(var t=0,n=e.length;t<n;t++)o=r(o,e[t])}(t),o;var t,r,o}function O(a,u,c){var e,t,n,s=a.selection.getNode(),l=x(a,s),f=(e=a,t=k(c),t=de({},t),0<p(e).length||!1!==h(e)||(n=w(t.rel,"_blank"===t.target),t.rel=n||null),re.from(t.target).isNone()&&!1===g(e)&&(t.target=m(e)),t.href=(n=t.href,"http"!==(e=d(e))&&"https"!==e||y(n)?n:e+"://"+n),t);a.undoManager.transact(function(){var t,n,e,r,o,i;c.href===u.href&&u.attach(),l?(a.focus(),e=a,r=l,o=c.text,i=f,o.each(function(e){r.hasOwnProperty("innerText")?r.innerText=e:r.textContent=e}),e.dom.setAttribs(r,i),e.selection.select(r)):(t=a,i=s,e=c.text,n=f,ve(i)?ye(t,i,n):e.fold(function(){t.execCommand("mceInsertLink",!1,n)},function(e){t.insertContent(t.dom.createHTML("a",n,t.dom.encode(e)))}))})}function T(e,t,n){var r,o,i,a,u,c,s;e.hasPlugin("rtc",!0)?e.execCommand("createlink",!1,(r=n.class,o=n.href,i=n.rel,a=n.target,u=n.text,s=n.title,s={class:r.getOrNull(),href:o,rel:i.getOrNull(),target:a.getOrNull(),text:u.getOrNull(),title:s.getOrNull()},l(s,function(e,t){return!1==(W===e)},(c=s={},function(e,t){c[t]=e}),f),s)):O(e,t,n)}function A(e){var a;e.hasPlugin("rtc",!0)?e.execCommand("unlink"):(a=e).undoManager.transact(function(){var e,t,n,r,o,i=a.selection.getNode();ve(i)?be(a,i):(o=(e=a).dom,n=(t=e.selection).getBookmark(),r=t.getRng().cloneRange(),i=o.getParent(r.startContainer,"a[href]",e.getBody()),o=o.getParent(r.endContainer,"a[href]",e.getBody()),i&&r.setStartBefore(i),o&&r.setEndAfter(o),t.setRng(r),e.execCommand("unlink"),t.moveToBookmark(n)),a.focus()})}function R(e,i){function a(e,t){var n,r,o=("link"===(o=t.name)?i.link:"anchor"===o?i.anchor:re.none()).getOr([]);return n=u.text,t=t.name,o=o,t=e[t],r=0<n.length,void 0!==t?we(t,o).map(function(e){return{url:{value:e.value,meta:{text:r?n:e.text,attach:f}},text:r?n:e.text}}):re.none()}var u={text:e.text,title:e.title};return{onChange:function(e,t){var n,r,o=t.name;return"url"===o?(n=e(),r=n.url,r=c(u.text.length<=0,re.from(r.meta.text).getOr(r.value)),n=n.url,n=c(u.title.length<=0,re.from(n.meta.title).getOr("")),r.isSome()||n.isSome()?re.some(de(de({},r.map(function(e){return{text:e}}).getOr({})),n.map(function(e){return{title:e}}).getOr({}))):re.none()):(r=["anchor","link"],n=o,-1<oe.call(r,n)?a(e(),t):("text"!==o&&"title"!==o||(u[o]=e()[o]),re.none()))}}}function D(e){var t=e.href;return 0<t.indexOf("@")&&-1===t.indexOf("/")&&-1===t.indexOf("mailto:")?re.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:function(e){return de(de({},e),{href:"mailto:"+t})}}):re.none()}function _(e){return e=e.dom.select("a:not([href])"),0<(e=v(function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r}(e,function(e){e=e.name||e.id;return e?[{text:e,value:"#"+e}]:[]}))).length?re.some([{text:"None",value:""}].concat(e)):re.none()}function N(t){function n(e){return t.convertURL(e.value||e.url,"href")}var e=t.getParam("link_list");return new Se(function(t){Z(e)?Ce.send({url:e,success:function(e){return t(function(e){try{return re.some(JSON.parse(e))}catch(e){return re.none()}}(e))},error:function(e){return t(re.none())}}):J(e)?e(function(e){return t(re.some(e))}):t(re.from(e))}).then(function(e){return e.bind(se(n)).map(function(e){return 0<e.length?[{text:"None",value:""}].concat(e):e})})}function P(e,t,n){return null!==(n=e.getAttrib(t,n))&&0<n.length?re.some(n):re.none()}function E(c,s){return N(c).then(function(e){var t,n,r,o,i,a,u=(t=s,n=(u=c).dom,r=C(u)?re.some(S(u.selection,t)):re.none(),o=t?re.some(n.getAttrib(t,"href")):re.none(),i=t?re.from(n.getAttrib(t,"target")):re.none(),a=P(n,t,"rel"),u=P(n,t,"class"),{url:o,text:r,title:P(n,t,"title"),target:i,rel:a,linkClass:u});return{anchor:u,catalogs:{targets:function(e){e=g(e);return X(e)?ce(e).orThunk(function(){return re.some(ke)}):!1===e?re.none():re.some(ke)}(c),rels:function(e,t){var n=p(e);if(0<n.length){var r=t.is("_blank");return(!1===h(e)?se(function(e){return w(fe(e),r)}):ce)(n)}return re.none()}(c,u.target),classes:function(e){e=e.getParam("link_class_list",[],"array");return 0<e.length?ce(e):re.none()}(c),anchor:_(c),link:e},optNode:re.from(s),flags:{titleEnabled:c.getParam("link_title",!0,"boolean")}}})}function I(l){var e,t=x(e=l);E(e,t).then(function(e){var c,s,t=function(e){var n=e.getData();if(!n.url.value)return A(c),void e.close();var a,u,r,o,t=function(t){return re.from(n[t]).filter(function(e){return!s.anchor[t].is(e)})},t={href:n.url.value,text:t("text"),target:t("target"),rel:t("rel"),class:t("linkClass"),title:t("title")},i={href:n.url.value,attach:void 0!==n.url.meta&&n.url.meta.attach?n.url.meta.attach:f};u=t,b([D,(r=d(a=c),o=a.getParam("link_default_protocol","http","string"),function(e){var t=e.href;return 1===r&&!y(t)||0===r&&/^\s*www(\.|\d\.)/i.test(t)?re.some({message:"The URL you entered seems to be an external link. Do you want to add the required "+o+":// prefix?",preprocess:function(e){return de(de({},e),{href:o+"://"+t})}}):re.none()})],function(e){return e(u)}).fold(function(){return Se.resolve(u)},function(i){return new Se(function(t){var n=a,e=i.message,r=function(e){t(e?i.preprocess(u):u)},o=n.selection.getRng();xe.setEditorTimeout(n,function(){n.windowManager.confirm(e,function(e){n.selection.setRng(o),r(e)})})})}).then(function(e){T(c,i,e)}),e.close()},n=c=l,r=(a=s=e).anchor.text.map(function(){return{name:"text",type:"input",label:"Text to display"}}).toArray(),o=a.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],i=re.from(m(n)),e=a.anchor,e={url:{value:n=e.url.getOr(""),meta:{original:{value:n}}},text:e.text.getOr(""),title:e.title.getOr(""),anchor:n,link:n,rel:e.rel.getOr(""),target:e.target.or(i).getOr(""),linkClass:e.linkClass.getOr("")},a=a.catalogs,u=R(e,a);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:v([[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],r,o,function(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t}([a.anchor.map(le("anchor","Anchors")),a.rels.map(le("rel","Rel")),a.targets.map(le("target","Open link in...")),a.link.map(le("link","Link list")),a.classes.map(le("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:e,onChange:function(t,e){e=e.name;u.onChange(t.getData,{name:e}).each(function(e){t.setData(e)})},onSubmit:t}}).then(function(e){l.windowManager.open(e)})}function B(e,t){return e.dom.getParent(t,"a[href]")}function M(e){return B(e,e.selection.getStart())}function L(e,t){var n,r;t&&(n=he(t),/^#/.test(n)?(r=e.$(n)).length&&e.selection.scrollIntoView(r[0],!0):(r=t.href,(t=document.createElement("a")).target="_blank",t.href=r,t.rel="noreferrer noopener",(r=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),t=t,r=r,document.body.appendChild(t),t.dispatchEvent(r),document.body.removeChild(t)))}function j(e){return function(){I(e)}}function F(e){return function(){L(e,M(e))}}function z(e,t){return e.on("NodeChange",t),function(){return e.off("NodeChange",t)}}function U(t){return function(e){return z(t,function(){e.setActive(!t.mode.isReadOnly()&&null!==x(t,t.selection.getNode()))})}}function q(n){return function(e){function t(){return e.setDisabled(null===x(n,n.selection.getNode()))}return t(),z(n,t)}}function $(r){return function(t){function n(e){return s(e)||(e=r.selection.getRng(),0<u(e,a).length)}var e=r.dom.getParents(r.selection.getStart());return t.setDisabled(!n(e)),z(r,function(e){return t.setDisabled(!n(e.parents))})}}var W,H=tinymce.util.Tools.resolve("tinymce.PluginManager"),V=tinymce.util.Tools.resolve("tinymce.util.VK"),K=function(n){return function(e){return e=typeof(t=e),(null===t?"null":"object"==e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"==e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e)===n;var t}},G=function(t){return function(e){return typeof e===t}},Z=K("string"),X=K("array"),Y=G("boolean"),J=G("function"),Q=i(!1),ee=i(!(W=null)),te={fold:function(e,t){return e()},is:Q,isSome:Q,isNone:ee,getOr:K=function(e){return e},getOrThunk:G=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:i(null),getOrUndefined:i(void 0),or:K,orThunk:G,map:e,each:f,bind:e,exists:Q,forall:ee,filter:e,equals:G=function(e){return e.isNone()},equals_:G,toArray:function(){return[]},toString:i("none()")},ne=function(n){function e(){return o}function t(e){return e(n)}var r=i(n),o={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:ee,isNone:Q,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return ne(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:te},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(Q,function(e){return t(n,e)})}};return o},re={some:ne,none:e,from:function(e){return null==e?te:ne(e)}},oe=Array.prototype.indexOf,ie=Array.prototype.push,ae=tinymce.util.Tools.resolve("tinymce.util.Tools"),ue=function(e,r){var o=[];return ae.each(e,function(e){var t,n=Z((t=e).text)?t.text:Z(t.title)?t.title:"";void 0!==e.menu?(t=ue(e.menu,r),o.push({text:n,items:t})):(e=r(e),o.push({text:n,value:e}))}),o},ce=function(e){return t(n)(e)},se=t,le=function(t,n){return function(e){return{name:t,type:"listbox",label:n,items:e}}},fe=n,de=function(){return(de=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},me=Object.keys,ge=Object.hasOwnProperty,pe=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),he=function(e){return e.getAttribute("data-mce-href")||e.getAttribute("href")},ve=function(e){return e&&"FIGURE"===e.nodeName&&/\bimage\b/i.test(e.className)},be=function(e,t){var n=e.dom.select("img",t)[0];!n||(t=e.dom.getParents(n,"a[href]",t)[0])&&(t.parentNode.insertBefore(n,t),e.dom.remove(t))},ye=function(e,t,n){t=e.dom.select("img",t)[0];t&&(n=e.dom.create("a",n),t.parentNode.insertBefore(n,t),n.appendChild(t))},we=function(n,e){return b(e,function(e){return r(t=t=e,"items")&&void 0!==t.items&&null!==t.items?we(n,e.items):c(e.value===n,e);var t})},xe=tinymce.util.Tools.resolve("tinymce.util.Delay"),Se=tinymce.util.Tools.resolve("tinymce.util.Promise"),Ce=tinymce.util.Tools.resolve("tinymce.util.XHR"),ke=[{text:"Current window",value:""},{text:"New window",value:"_blank"}];H.add("link",function(e){var t,n,r,i,o,a,u,c;(t=e).ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:j(t),onSetup:U(t)}),t.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:F(t),onSetup:q(t)}),t.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:function(){return A(t)},onSetup:$(t)}),(n=e).ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:F(n),onSetup:q(n)}),n.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:j(n)}),n.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:function(){return A(n)},onSetup:$(n)}),(r=e).ui.registry.addContextMenu("link",{update:function(e){return s(r.dom.getParents(e,"a"))?"link unlink openlink":"link"}}),o=function(e){var t=i.selection.getNode();return e.setDisabled(!x(i,t)),f},(i=e).ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:U(i)},label:"Link",predicate:function(e){return!!x(i,e)&&i.getParam("link_context_toolbar",!1,"boolean")},initValue:function(){var e=x(i);return e?he(e):""},commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:function(e){var t=i.selection.getNode();return e.setActive(!!x(i,t)),U(i)(e)},onAction:function(e){var t,n,r=x(i),o=e.getValue();r?i.undoManager.transact(function(){i.dom.setAttrib(r,"href",o),i.selection.collapse(!1),e.hide()}):(t={href:o,attach:f},n=C(i)?re.some(S(i.selection,r)).filter(function(e){return 0<e.length}).or(re.from(o)):re.none(),T(i,t,{href:o,text:n,title:re.none(),rel:re.none(),target:re.none(),class:re.none()}),e.hide())}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:o,onAction:function(e){A(i),e.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:o,onAction:function(e){F(i)(),e.hide()}}]}),(c=e).on("click",function(e){var t=B(c,e.target);t&&V.metaKeyPressed(e)&&(e.preventDefault(),L(c,t))}),c.on("keydown",function(e){var t=M(c);t&&13===e.keyCode&&!0===e.altKey&&!1===e.shiftKey&&!1===e.ctrlKey&&!1===e.metaKey&&(e.preventDefault(),L(c,t))}),(a=e).addCommand("mceLink",function(){a.getParam("link_quicklink",!1,"boolean")?a.fire("contexttoolbar-show",{toolbarKey:"quicklink"}):j(a)()}),(u=e).addShortcut("Meta+K","",function(){u.execCommand("mceLink")})})}(),function(){"use strict";function i(e){return function(){return e}}function u(e){return!(null===e||void 0===e)}function c(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}function d(e){var t=e;return{get:function(){return t},set:function(e){t=e}}}function s(e,t){return H(e,t)?F.from(e[t]):F.none()}function f(e){return e.getParam("media_scripts")}function m(e,t){if(e)for(var n=0;n<e.length;n++)if(-1!==t.indexOf(e[n].filter))return e[n]}function l(e){return e.replace(/px$/,"")}function a(o,e){var i=d(!1),a={};return K({validate:!1,allow_conditional_comments:!0,start:function(e,t){if(!i.get())if(H(t.map,"data-ephox-embed-iri"))i.set(!0),r=(r=(n=t).map.style)?G.parseStyle(r):{},a={type:"ephox-embed-iri",source:n.map["data-ephox-embed-iri"],altsource:"",poster:"",width:s(r,"max-width").map(l).getOr(""),height:s(r,"max-height").map(l).getOr("")};else{if(a.source||"param"!==e||(a.source=t.map.movie),"iframe"!==e&&"object"!==e&&"embed"!==e&&"video"!==e&&"audio"!==e||(a.type||(a.type=e),a=V.extend(t.map,a)),"script"===e){r=m(o,t.map.src);if(!r)return;a={type:"script",source:t.map.src,width:String(r.width),height:String(r.height)}}"source"===e&&(a.source?a.altsource||(a.altsource=t.map.src):a.source=t.map.src),"img"!==e||a.poster||(a.poster=t.map.src)}var n,r}}).parse(e),a.source=a.source||a.src||a.data,a.altsource=a.altsource||"",a.poster=a.poster||"",a}function g(e){return{mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"}[e.toLowerCase().split(".").pop()]||""}function p(e){return/^[0-9.]+$/.test(e)?e+"px":e}function h(i,e){!function(e){for(var t=W(e),n=0,r=t.length;n<r;n++){var o=t[n];!function(e,t){var n=""+e;if(i.map[t])for(var r=i.length;r--;){var o=i[r];o.name===t&&(n?(i.map[t]=n,o.value=n):(delete i.map[t],i.splice(r,1)))}else n&&(i.push({name:t,value:n}),i.map[t]=n)}(e[o],o)}}(e)}function v(e,a,u){var c,s=X(),l=d(!1),f=0;return K({validate:!1,allow_conditional_comments:!0,comment:function(e){s.comment(e)},cdata:function(e){s.cdata(e)},text:function(e,t){s.text(e,t)},start:function(e,t,n){if(!l.get())if(H(t.map,"data-ephox-embed-iri"))l.set(!0),r=a,(i=(i=(o=t).map.style)?Y.parseStyle(i):{})["max-width"]=p(r.width),i["max-height"]=p(r.height),h(o,{style:Y.serializeStyle(i)});else{switch(e){case"video":case"object":case"embed":case"img":case"iframe":void 0!==a.height&&void 0!==a.width&&h(t,{width:a.width,height:a.height})}if(u)switch(e){case"video":h(t,{poster:a.poster,src:""}),a.altsource&&h(t,{src:""});break;case"iframe":h(t,{src:a.source});break;case"source":if(f<2&&(h(t,{src:a[J[f]],type:a[J[f]+"mime"]}),!a[J[f]]))return;f++;break;case"img":if(!a.poster)return;c=!0}}var r,o,i;s.start(e,t,n)},end:function(e){if(!l.get()){if("video"===e&&u)for(var t,n=0;n<2;n++)a[J[n]]&&((t=[]).map={},f<=n&&(h(t,{src:a[J[n]],type:a[J[n]+"mime"]}),s.start("source",t,!0)));var r;a.poster&&"object"===e&&u&&!c&&((r=[]).map={},h(r,{src:a.poster,width:a.width,height:a.height}),s.start("img",r,!0))}s.end(e)}},Z({})).parse(e),s.getContent()}function b(t){var e=Q.filter(function(e){return e.regex.test(t)});return 0<e.length?V.extend({},e[0],{url:function(e,t){for(var n=(n=t.match(/^(https?:\/\/|www\.)(.+)$/i))&&1<n.length&&"www."!==n[1]?n[1]:"https://",r=e.regex.exec(t),o=n+e.url,i=0;i<r.length;i++)!function(e){o=o.replace("$"+e,function(){return r[e]||""})}(i);return o.replace(/\?$/,"")}(e[0],t)}):null}function y(n,e){var r=V.extend({},e);if(!r.source&&(V.extend(r,a(f(n),r.embed)),!r.source))return"";if(r.altsource||(r.altsource=""),r.poster||(r.poster=""),r.source=n.convertURL(r.source,"source"),r.altsource=n.convertURL(r.altsource,"source"),r.sourcemime=g(r.source),r.altsourcemime=g(r.altsource),r.poster=n.convertURL(r.poster,"poster"),(i=b(r.source))&&(r.source=i.url,r.type=i.type,r.allowfullscreen=i.allowFullscreen,r.width=r.width||String(i.w),r.height=r.height||String(i.h)),r.embed)return v(r.embed,r,!0);(e=m(f(n),r.source))&&(r.type="script",r.width=String(e.width),r.height=String(e.height));var t,o,i=n.getParam("audio_template_callback"),e=n.getParam("video_template_callback");return r.width=r.width||"300",r.height=r.height||"150",V.each(r,function(e,t){r[t]=n.dom.encode(""+e)}),"iframe"===r.type?(o=r.allowfullscreen?' allowFullscreen="1"':"",'<iframe src="'+r.source+'" width="'+r.width+'" height="'+r.height+'"'+o+"></iframe>"):"application/x-shockwave-flash"===r.sourcemime?(o='<object data="'+r.source+'" width="'+r.width+'" height="'+r.height+'" type="application/x-shockwave-flash">',r.poster&&(o+='<img src="'+r.poster+'" width="'+r.width+'" height="'+r.height+'" />'),o+"</object>"):-1!==r.sourcemime.indexOf("audio")?(t=r,i?i(t):'<audio controls="controls" src="'+t.source+'">'+(t.altsource?'\n<source src="'+t.altsource+'"'+(t.altsourcemime?' type="'+t.altsourcemime+'"':"")+" />\n":"")+"</audio>"):"script"===r.type?'<script src="'+r.source+'"><\/script>':(t=r,e?e(t):'<video width="'+t.width+'" height="'+t.height+'"'+(t.poster?' poster="'+t.poster+'"':"")+' controls="controls">\n<source src="'+t.source+'"'+(t.sourcemime?' type="'+t.sourcemime+'"':"")+" />\n"+(t.altsource?'<source src="'+t.altsource+'"'+(t.altsourcemime?' type="'+t.altsourcemime+'"':"")+" />\n":"")+"</video>")}function w(t){return function(e){return y(t,e)}}function x(e,t){var n,r,o,i,a,u=e.getParam("media_url_resolver");return u?(o=t,i=w(e),a=u,new ee(function(t,e){function n(e){return e.html&&(te[o.source]=e),t({url:o.source,html:e.html||i(o)})}te[o.source]?n(te[o.source]):a({url:o.source},n,e)})):(n=t,r=w(e),new ee(function(e){e({html:r(n),url:n.source})}))}function S(i,a,u){return function(e){function t(){return s(i,e)}function n(){return s(a,e)}function r(e){return s(e,"value").bind(function(e){return 0<e.length?F.some(e):F.none()})}var o={};return o[e]=(e===u?t().bind(function(e){return U(e)?r(e).orThunk(n):n().orThunk(function(){return F.from(e)})}):n().orThunk(function(){return t().bind(function(e){return U(e)?r(e):F.from(e)})})).getOr(""),o}}function C(e,t){var n,r,o=t?s(e,t).bind(function(e){return s(e,"meta")}).getOr({}):{},t=S(e,o,t);return I(I(I(I(I({},t("source")),t("altsource")),t("poster")),t("embed")),(n=o,r={},s(e,"dimensions").each(function(e){c(["width","height"],function(t){s(n,t).orThunk(function(){return s(e,t)}).each(function(e){return r[t]=e})})}),r))}function k(e){var r=I(I({},e),{source:{value:s(e,"source").getOr("")},altsource:{value:s(e,"altsource").getOr("")},poster:{value:s(e,"poster").getOr("")}});return c(["width","height"],function(n){s(e,n).each(function(e){var t=r.dimensions||{};t[n]=e,r.dimensions=t})}),r}function O(t){return function(e){e=e&&e.msg?"Media embed handler error: "+e.msg:"Media embed handler threw unknown error.";t.notificationManager.open({type:"error",text:e})}}function T(e,t){return a(f(e),t)}function A(r,o){return function(e){var t,n;z(e.url)&&0<e.url.trim().length&&(n=e.html,t=T(o,n),n=I(I({},t),{source:e.url,embed:n}),r.setData(k(n)))}}function o(e,t){var n=e.dom.select("*[data-mce-object]");e.insertContent(t),function(e,t){for(var n=e.dom.select("*[data-mce-object]"),r=0;r<t.length;r++)for(var o=n.length-1;0<=o;o--)t[r]===n[o]&&n.splice(o,1);e.selection.select(n[0])}(e,n),e.nodeChanged()}function R(u){var e=(r=(e=t=(n=u).selection.getNode()).getAttribute("data-mce-object")||e.getAttribute("data-ephox-embed-iri")?n.serializer.serialize(t,{selection:!0}):"",I({embed:r},a(f(n),r))),c=d(e),t=k(e),n={title:"General",name:"general",items:function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!q(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);$.apply(t,e[n])}return t}([[{name:"source",type:"urlinput",filetype:"media",label:"Source"}],u.getParam("media_dimensions",!0)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[]])},r=[];u.getParam("media_alt_source",!0)&&r.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),u.getParam("media_poster",!0)&&r.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"}),e={title:"Advanced",name:"advanced",items:r},n=[n,{title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]}],0<r.length&&n.push(e);var n={type:"tabpanel",tabs:n},s=u.windowManager.open({title:"Insert/Edit Media",size:"normal",body:n,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(e){var t,n,r=C(e.getData());t=c.get(),n=u,(r=r).embed=v(r.embed,r),r.embed&&(t.source===r.source||(t=r.source,te.hasOwnProperty(t)))?o(n,r.embed):x(n,r).then(function(e){o(n,e.html)}).catch(O(n)),e.close()},onChange:function(e,t){switch(t.name){case"source":i=c.get(),a=C(e.getData(),"source"),i.source!==a.source&&(A(s,u)({url:a.source,html:""}),x(u,a).then(A(s,u)).catch(O(u)));break;case"embed":r=C((n=e).getData()),o=T(u,r.embed),n.setData(k(o));break;case"dimensions":case"altsource":case"poster":r=e,n=t.name,o=C(r.getData(),n),n=y(u,o),r.setData(k(I(I({},o),{embed:n})))}var n,r,o,i,a;c.set(C(e.getData()))},initialData:t})}function D(i,e){if(!1===i.getParam("media_filter_html",!0))return e;var a,u=X();return K({validate:!1,allow_conditional_comments:!1,comment:function(e){a||u.comment(e)},cdata:function(e){a||u.cdata(e)},text:function(e,t){a||u.text(e,t)},start:function(e,t,n){if(a=!0,"script"!==e&&"noscript"!==e&&"svg"!==e){for(var r=t.length-1;0<=r;r--){var o=t[r].name;0===o.indexOf("on")&&(delete t.map[o],t.splice(r,1)),"style"===o&&(t[r].value=i.dom.serializeStyle(i.dom.parseStyle(t[r].value),e))}u.start(e,t,n),a=!1}},end:function(e){a||u.end(e)}},Z({})).parse(e),u.getContent()}function _(e,t,n,r){return void 0===r&&(r=null),e=e.attr(n),u(e)?e:H(t,n)?null:r}function N(e,t,n){var r="img"===t.name||"video"===e.name,o=r?"300":null,i="audio"===e.name?"30":"150",i=r?i:null;t.attr({width:_(e,n,"width",o),height:_(e,n,"height",i)})}function P(o,t){var e=t.name,n=new ne("span",1);n.attr({contentEditable:"false",style:t.attr("style"),"data-mce-object":e,class:"mce-preview-object mce-object-"+e}),ie(o,t,n);var r=o.dom.parseStyle(t.attr("style")),i=new ne(e,1);N(t,i,r),i.attr({src:t.attr("src"),style:t.attr("style"),class:t.attr("class")}),"iframe"===e?i.attr({allowfullscreen:t.attr("allowfullscreen"),frameborder:"0"}):(c(["controls","crossorigin","currentTime","loop","muted","poster","preload"],function(e){i.attr(e,t.attr(e))}),a=n.attr("data-mce-html"),u(a)&&function(e,t,n){for(var r=oe({forced_root_block:!1,validate:!1},o.schema).parse(n,{context:e});r.firstChild;)t.append(r.firstChild)}(e,i,a));var a=new ne("span",1);return a.attr("class","mce-shim"),n.append(i),n.append(a),n}function E(e){for(;e=e.parent;)if(e.attr("data-ephox-embed-iri")||(t=e.attr("class"))&&/\btiny-pageembed\b/.test(t))return 1;var t}var e,t=tinymce.util.Tools.resolve("tinymce.PluginManager"),I=function(){return(I=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},B=i(!1),M=i(!0),L={fold:function(e,t){return e()},is:B,isSome:B,isNone:M,getOr:r=function(e){return e},getOrThunk:e=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:i(null),getOrUndefined:i(void 0),or:r,orThunk:e,map:r=function(){return L},each:function(){},bind:r,exists:B,forall:M,filter:r,equals:e=function(e){return e.isNone()},equals_:e,toArray:function(){return[]},toString:i("none()")},j=function(n){function e(){return o}function t(e){return e(n)}var r=i(n),o={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:M,isNone:B,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return j(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:L},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(B,function(e){return t(n,e)})}};return o},F={some:j,none:r,from:function(e){return null==e?L:j(e)}},z=(r=function(n){return function(e){return e=typeof(t=e),(null===t?"null":"object"==e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"==e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e)===n;var t}})("string"),U=r("object"),q=r("array"),$=Array.prototype.push,W=Object.keys,n=Object.hasOwnProperty,H=function(e,t){return n.call(e,t)},V=tinymce.util.Tools.resolve("tinymce.util.Tools"),r=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),K=tinymce.util.Tools.resolve("tinymce.html.SaxParser"),G=r.DOM,Z=tinymce.util.Tools.resolve("tinymce.html.Schema"),X=tinymce.util.Tools.resolve("tinymce.html.Writer"),Y=r.DOM,J=["source","altsource"],Q=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],ee=tinymce.util.Tools.resolve("tinymce.util.Promise"),te={},ne=tinymce.util.Tools.resolve("tinymce.html.Node"),re=tinymce.util.Tools.resolve("tinymce.Env"),oe=tinymce.util.Tools.resolve("tinymce.html.DomParser"),ie=function(e,t,n){for(var r=t.attributes,o=r.length;o--;){var i=r[o].name,a=r[o].value;"width"!==i&&"height"!==i&&"style"!==i&&("data"!==i&&"src"!==i||(a=e.convertURL(a,i)),n.attr("data-mce-p-"+i,a))}t=t.firstChild&&t.firstChild.value;t&&(n.attr("data-mce-html",escape(D(e,t))),n.firstChild=null)};t.add("media",function(e){var t,l,n,r,o,i,a;return(t=e).addCommand("mceMedia",function(){R(t)}),(o=e).ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:function(){o.execCommand("mceMedia")},onSetup:(i=o,a=["img[data-mce-object]","span[data-mce-object]","div[data-ephox-embed-iri]"],function(e){return i.selection.selectorChangedWithUnbind(a.join(","),e.setActive).unbind})}),o.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:function(){o.execCommand("mceMedia")}}),e.on("ResolveName",function(e){var t;1===e.target.nodeType&&(t=e.target.getAttribute("data-mce-object"))&&(e.name=t)}),(l=e).on("preInit",function(){var t=l.schema.getSpecialElements();V.each("video audio iframe object".split(" "),function(e){t[e]=new RegExp("</"+e+"[^>]*>","gi")});var u,n=l.schema.getBoolAttrs();V.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(e){n[e]={}}),l.parser.addNodeFilter("iframe,video,audio,object,embed,script",(u=l,function(e){for(var t,n,r,o,i,a=e.length;a--;)(r=e[a]).parent&&(r.parent.attr("data-mce-object")||"script"===r.name&&!(t=m(f(u),r.attr("src")))||(t&&(t.width&&r.attr("width",t.width.toString()),t.height&&r.attr("height",t.height.toString())),("iframe"===(i=r.name)||"video"===i||"audio"===i)&&u.getParam("media_live_embeds",!0)&&re.ceFalse?E(r)||r.replace(P(u,r)):E(r)||r.replace((n=u,o=void 0,r=(i=r).name,(o=new ne("img",1)).shortEnded=!0,ie(n,i,o),N(i,o,{}),o.attr({style:i.attr("style"),src:re.transparentSrc,"data-mce-object":r,class:"mce-object mce-object-"+r}),o))))})),l.serializer.addAttributeFilter("data-mce-object",function(e,t){for(var n,r,o,i,a,u,c=e.length;c--;)if((n=e[c]).parent){for(a=n.attr(t),r=new ne(a,1),"audio"!==a&&"script"!==a&&((u=n.attr("class"))&&-1!==u.indexOf("mce-preview-object")?r.attr({width:n.firstChild.attr("width"),height:n.firstChild.attr("height")}):r.attr({width:n.attr("width"),height:n.attr("height")})),r.attr({style:n.attr("style")}),o=(i=n.attributes).length;o--;){var s=i[o].name;0===s.indexOf("data-mce-p-")&&r.attr(s.substr(11),i[o].value)}"script"===a&&r.attr("type","text/javascript"),(u=n.attr("data-mce-html"))&&((a=new ne("#text",3)).raw=!0,a.value=D(l,unescape(u)),r.append(a)),n.replace(r)}})}),l.on("SetContent",function(){l.$("span.mce-preview-object").each(function(e,t){t=l.$(t);0===t.find("span.mce-shim").length&&t.append('<span class="mce-shim"></span>')})}),(n=e).on("click keyup touchend",function(){var e=n.selection.getNode();e&&n.dom.hasClass(e,"mce-preview-object")&&n.dom.getAttrib(e,"data-mce-selected")&&e.setAttribute("data-mce-selected","2")}),n.on("ObjectSelected",function(e){"script"===e.target.getAttribute("data-mce-object")&&e.preventDefault()}),n.on("ObjectResized",function(e){var t,n=e.target;n.getAttribute("data-mce-object")&&(t=n.getAttribute("data-mce-html"))&&(t=unescape(t),n.setAttribute("data-mce-html",escape(v(t,{width:String(e.width),height:String(e.height)}))))}),r=e,{showDialog:function(){R(r)}}})}(),function(){"use strict";function r(r){var e=r.getContent({source_view:!0});r.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:e},onSubmit:function(e){var t=r,n=e.getData().code;t.focus(),t.undoManager.transact(function(){t.setContent(n)}),t.selection.setCursorLocation(),t.nodeChanged(),e.close()}})}tinymce.util.Tools.resolve("tinymce.PluginManager").add("code",function(e){var t,n;return(t=e).addCommand("mceCodeEditor",function(){r(t)}),(n=e).ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:function(){return r(n)}}),n.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:function(){return r(n)}}),{}})}(),function(){"use strict";function i(e){return function(){return e}}function a(e){return e&&"PRE"===e.nodeName&&-1!==e.className.indexOf("language-")}function u(n){return function(e,t){return n(t)}}var e,t,n,s,r,o=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=i(!1),l=i(!0),f=function(){return d},d={fold:function(e,t){return e()},is:c,isSome:c,isNone:l,getOr:t=function(e){return e},getOrThunk:n=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:i(null),getOrUndefined:i(void 0),or:t,orThunk:n,map:f,each:function(){},bind:f,exists:c,forall:l,filter:f,equals:e=function(e){return e.isNone()},equals_:e,toArray:function(){return[]},toString:i("none()")},m=function(n){function e(){return o}function t(e){return e(n)}var r=i(n),o={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:l,isNone:c,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return m(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:d},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(c,function(e){return t(n,e)})}};return o},g={some:m,none:f,from:function(e){return null==e?d:m(e)}},p=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),h="undefined"!=typeof window?window:Function("return this;")(),v={exports:r={}},b={};function y(e){return h.Prism&&e.getParam("codesample_global_prismjs",!1,"boolean")?h.Prism:C}function w(e){return e=e.selection?e.selection.getNode():null,a(e)?g.some(e):g.none()}function x(i){var t,e=i.getParam("codesample_languages")||[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}],n=(0<(r=e).length?g.some(r[0]):g.none()).fold(function(){return""},function(e){return e.value}),r=(t=n,w(i).fold(function(){return t},function(e){e=e.className.match(/language-(\w+)/);return e?e[1]:t})),n=w(i).fold(function(){return""},function(e){return e.textContent});i.windowManager.open({title:"Insert/Edit Code Sample",size:"large",body:{type:"panel",items:[{type:"selectbox",name:"language",label:"Language",items:e},{type:"textarea",name:"code",label:"Code view"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{language:r,code:n},onSubmit:function(e){var t=e.getData(),n=i,r=t.language,o=t.code;n.undoManager.transact(function(){var e=w(n);return o=p.DOM.encode(o),e.fold(function(){n.insertContent('<pre id="__new" class="language-'+r+'">'+o+"</pre>"),n.selection.select(n.$("#__new").removeAttr("id")[0])},function(e){n.dom.setAttrib(e,"class","language-"+r),e.innerHTML=o,y(n).highlightElement(e),n.selection.select(e)})}),e.close()}})}function S(r){r.ui.registry.addToggleButton("codesample",{icon:"code-sample",tooltip:"Insert/edit code sample",onAction:function(){return x(r)},onSetup:function(n){function e(){var e,t;n.setActive((t=(e=r).selection.getStart(),e.dom.is(t,'pre[class*="language-"]')))}return r.on("NodeChange",e),function(){return r.off("NodeChange",e)}}}),r.ui.registry.addMenuItem("codesample",{text:"Code sample...",icon:"code-sample",onAction:function(){return x(r)}})}t=r,n=v,s=e=void 0,f=window.Prism,window.Prism={manual:!0},r=function(){return function r(o,i,a){function u(t,e){if(!i[t]){if(!o[t]){var n="function"==typeof s&&s;if(!e&&n)return n(t,!0);if(c)return c(t,!0);n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}n=i[t]={exports:{}};o[t][0].call(n.exports,function(e){return u(o[t][1][e]||e)},n,n.exports,r,o,i,a)}return i[t].exports}for(var c="function"==typeof s&&s,e=0;e<a.length;e++)u(a[e]);return u}({1:[function(e,t,n){Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:__attribute__|_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|asm|typeof|inline|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|union|unsigned|void|volatile|while)\b/,function:/[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/}),Prism.languages.insertBefore("c","string",{macro:{pattern:/(^\s*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}},constant:/\b(?:__FILE__|__LINE__|__DATE__|__TIME__|__TIMESTAMP__|__func__|EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|stdin|stdout|stderr)\b/}),delete Prism.languages.c.boolean},{}],2:[function(e,t,n){Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|interface|extends|implements|trait|instanceof|new)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(?:true|false)\b/,function:/\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/}},{}],3:[function(e,n,t){(function(t){(function(){var e=function(c){var s=/\blang(?:uage)?-([\w-]+)\b/i,t=0,_={manual:c.Prism&&c.Prism.manual,disableWorkerMessageHandler:c.Prism&&c.Prism.disableWorkerMessageHandler,util:{encode:function e(t){return t instanceof N?new N(t.type,e(t.content),t.alias):Array.isArray(t)?t.map(e):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++t}),e.__id},clone:function n(e,r){var o,t;switch(r=r||{},_.util.type(e)){case"Object":if(t=_.util.objId(e),r[t])return r[t];for(var i in o={},r[t]=o,e)e.hasOwnProperty(i)&&(o[i]=n(e[i],r));return o;case"Array":return t=_.util.objId(e),r[t]||(o=[],r[t]=o,e.forEach(function(e,t){o[t]=n(e,r)}),o);default:return e}},getLanguage:function(e){for(;e&&!s.test(e.className);)e=e.parentElement;return e?(e.className.match(s)||[,"none"])[1].toLowerCase():"none"},currentScript:function(){if("undefined"==typeof document)return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(e){var t=(/at [^(\r\n]*\((.*):.+:.+\)$/i.exec(e.stack)||[])[1];if(t){var n,r=document.getElementsByTagName("script");for(n in r)if(r[n].src==t)return r[n]}return null}},isActive:function(e,t,n){for(var r="no-"+t;e;){var o=e.classList;if(o.contains(t))return!0;if(o.contains(r))return!1;e=e.parentElement}return!!n}},languages:{extend:function(e,t){var n,r=_.util.clone(_.languages[e]);for(n in t)r[n]=t[n];return r},insertBefore:function(n,e,t,r){var o,i=(r=r||_.languages)[n],a={};for(o in i)if(i.hasOwnProperty(o)){if(o==e)for(var u in t)t.hasOwnProperty(u)&&(a[u]=t[u]);t.hasOwnProperty(o)||(a[o]=i[o])}var c=r[n];return r[n]=a,_.languages.DFS(_.languages,function(e,t){t===c&&e!=n&&(this[e]=a)}),a},DFS:function e(t,n,r,o){o=o||{};var i,a,u,c=_.util.objId;for(u in t)t.hasOwnProperty(u)&&(n.call(t,u,t[u],r||u),i=t[u],"Object"!==(a=_.util.type(i))||o[c(i)]?"Array"!==a||o[c(i)]||(o[c(i)]=!0,e(i,n,u,o)):(o[c(i)]=!0,e(i,n,null,o)))}},plugins:{},highlightAll:function(e,t){_.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,n){var r={callback:n,container:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};_.hooks.run("before-highlightall",r),r.elements=Array.prototype.slice.apply(r.container.querySelectorAll(r.selector)),_.hooks.run("before-all-elements-highlight",r);for(var o,i=0;o=r.elements[i++];)_.highlightElement(o,!0===t,r.callback)},highlightElement:function(e,t,n){var r=_.util.getLanguage(e),o=_.languages[r];e.className=e.className.replace(s,"").replace(/\s+/g," ")+" language-"+r;var i=e.parentElement;i&&"pre"===i.nodeName.toLowerCase()&&(i.className=i.className.replace(s,"").replace(/\s+/g," ")+" language-"+r);var a={element:e,language:r,grammar:o,code:e.textContent};function u(e){a.highlightedCode=e,_.hooks.run("before-insert",a),a.element.innerHTML=a.highlightedCode,_.hooks.run("after-highlight",a),_.hooks.run("complete",a),n&&n.call(a.element)}if(_.hooks.run("before-sanity-check",a),!a.code)return _.hooks.run("complete",a),void(n&&n.call(a.element));_.hooks.run("before-highlight",a),a.grammar?t&&c.Worker?((t=new Worker(_.filename)).onmessage=function(e){u(e.data)},t.postMessage(JSON.stringify({language:a.language,code:a.code,immediateClose:!0}))):u(_.highlight(a.code,a.grammar,a.language)):u(_.util.encode(a.code))},highlight:function(e,t,n){n={code:e,grammar:t,language:n};return _.hooks.run("before-tokenize",n),n.tokens=_.tokenize(n.code,n.grammar),_.hooks.run("after-tokenize",n),N.stringify(_.util.encode(n.tokens),n.language)},tokenize:function(e,t){var n=t.rest;if(n){for(var r in n)t[r]=n[r];delete t.rest}var o=new i;return E(o,o.head,e),function e(t,n,r,o,i,a){for(var u in r)if(r.hasOwnProperty(u)&&r[u])for(var c=r[u],c=Array.isArray(c)?c:[c],s=0;s<c.length;++s){if(a&&a.cause==u+","+s)return;var l,f=c[s],d=f.inside,m=!!f.lookbehind,g=!!f.greedy,p=f.alias;g&&!f.pattern.global&&(l=f.pattern.toString().match(/[imsuy]*$/)[0],f.pattern=RegExp(f.pattern.source,l+"g"));for(var h=f.pattern||f,v=o.next,b=i;v!==n.tail&&!(a&&b>=a.reach);b+=v.value.length,v=v.next){var y=v.value;if(n.length>t.length)return;if(!(y instanceof N)){var w,x=1;if(g){if(!(w=P(h,b,t,m)))break;var S=w.index,C=w.index+w[0].length,k=b;for(k+=v.value.length;k<=S;)k+=(v=v.next).value.length;if(b=k-=v.value.length,v.value instanceof N)continue;for(var O=v;O!==n.tail&&(k<C||"string"==typeof O.value);O=O.next)x++,k+=O.value.length;x--,y=t.slice(b,k),w.index-=b}else if(!(w=P(h,0,y,m)))continue;var S=w.index,T=w[0],A=y.slice(0,S),R=y.slice(S+T.length),D=b+y.length;a&&D>a.reach&&(a.reach=D);y=v.prev;A&&(y=E(n,y,A),b+=A.length),function(e,t,n){for(var r=t.next,o=0;o<n&&r!==e.tail;o++)r=r.next;(t.next=r).prev=t,e.length-=o}(n,y,x);v=E(n,y,new N(u,d?_.tokenize(T,d):T,p,T));R&&E(n,v,R),1<x&&e(t,n,r,v.prev,b,{cause:u+","+s,reach:D})}}}}(e,o,t,o.head,0),function(e){for(var t=[],n=e.head.next;n!==e.tail;)t.push(n.value),n=n.next;return t}(o)},hooks:{all:{},add:function(e,t){var n=_.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=_.hooks.all[e];if(n&&n.length)for(var r,o=0;r=n[o++];)r(t)}},Token:N};function N(e,t,n,r){this.type=e,this.content=t,this.alias=n,this.length=0|(r||"").length}function P(e,t,n,r){e.lastIndex=t;n=e.exec(n);return n&&r&&n[1]&&(r=n[1].length,n.index+=r,n[0]=n[0].slice(r)),n}function i(){var e={value:null,prev:null,next:null},t={value:null,prev:e,next:null};e.next=t,this.head=e,this.tail=t,this.length=0}function E(e,t,n){var r=t.next,n={value:n,prev:t,next:r};return t.next=n,r.prev=n,e.length++,n}if(c.Prism=_,N.stringify=function t(e,n){if("string"==typeof e)return e;if(Array.isArray(e)){var r="";return e.forEach(function(e){r+=t(e,n)}),r}var o={type:e.type,content:t(e.content,n),tag:"span",classes:["token",e.type],attributes:{},language:n},e=e.alias;e&&(Array.isArray(e)?Array.prototype.push.apply(o.classes,e):o.classes.push(e)),_.hooks.run("wrap",o);var i,a="";for(i in o.attributes)a+=" "+i+'="'+(o.attributes[i]||"").replace(/"/g,"&quot;")+'"';return"<"+o.tag+' class="'+o.classes.join(" ")+'"'+a+">"+o.content+"</"+o.tag+">"},!c.document)return c.addEventListener&&(_.disableWorkerMessageHandler||c.addEventListener("message",function(e){var t=JSON.parse(e.data),n=t.language,e=t.code,t=t.immediateClose;c.postMessage(_.highlight(e,_.languages[n],n)),t&&c.close()},!1)),_;var e,n=_.util.currentScript();function r(){_.manual||_.highlightAll()}return n&&(_.filename=n.src,n.hasAttribute("data-manual")&&(_.manual=!0)),_.manual||("loading"===(e=document.readyState)||"interactive"===e&&n&&n.defer?document.addEventListener("DOMContentLoaded",r):window.requestAnimationFrame?window.requestAnimationFrame(r):window.setTimeout(r,16)),_}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{});void 0!==n&&n.exports&&(n.exports=e),void 0!==t&&(t.Prism=e)}).call(this)}).call(this,b)},{}],4:[function(e,t,n){var r=Prism,o=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char8_t|char16_t|char32_t|class|compl|concept|const|consteval|constexpr|constinit|const_cast|continue|co_await|co_return|co_yield|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|float|for|friend|goto|if|inline|int|int8_t|int16_t|int32_t|int64_t|uint8_t|uint16_t|uint32_t|uint64_t|long|mutable|namespace|new|noexcept|nullptr|operator|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/;r.languages.cpp=r.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return o.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:o,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:true|false)\b/}),r.languages.insertBefore("cpp","string",{"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),r.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:r.languages.extend("cpp",{})}}),r.languages.insertBefore("inside","operator",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},r.languages.cpp["base-clause"])},{}],5:[function(e,t,n){!function(n){function r(e,n){return e.replace(/<<(\d+)>>/g,function(e,t){return"(?:"+n[+t]+")"})}function o(e,t,n){return RegExp(r(e,t),n||"")}function e(e,t){for(var n=0;n<t;n++)e=e.replace(/<<self>>/g,function(){return"(?:"+e+")"});return e.replace(/<<self>>/g,"[^\\s\\S]")}var t="bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",i="add alias and ascending async await by descending from get global group into join let nameof not notnull on or orderby partial remove select set unmanaged value when where",a="abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield";function u(e){return"\\b(?:"+e.trim().replace(/ /g,"|")+")\\b"}var c=u(v="class enum interface struct"),s=RegExp(u(t+" "+v+" "+i+" "+a)),l=u(v+" "+i+" "+a),f=u(t+" "+v+" "+a),d=e(/<(?:[^<>;=+\-*/%&|^]|<<self>>)*>/.source,2),m=e(/\((?:[^()]|<<self>>)*\)/.source,2),g=/@?\b[A-Za-z_]\w*\b/.source,p=r(/<<0>>(?:\s*<<1>>)?/.source,[g,d]),h=r(/(?!<<0>>)<<1>>(?:\s*\.\s*<<1>>)*/.source,[l,p]),i=r(/<<0>>(?:\s*(?:\?\s*)?<<1>>)*(?:\s*\?)?/.source,[h,b=/\[\s*(?:,\s*)*\]/.source]),t=r(/[^,()<>[\];=+\-*/%&|^]|<<0>>|<<1>>|<<2>>/.source,[d,m,b]),v=r(/\(<<0>>+(?:,<<0>>+)+\)/.source,[t]),a=r(/(?:<<0>>|<<1>>)(?:\s*(?:\?\s*)?<<2>>)*(?:\s*\?)?/.source,[v,h,b]),l={keyword:s,punctuation:/[<>()?,.:[\]]/},t=/'(?:[^\r\n'\\]|\\.|\\[Uux][\da-fA-F]{1,8})'/.source,v=/"(?:\\.|[^\\"\r\n])*"/.source,b=/@"(?:""|\\[\s\S]|[^\\"])*"(?!")/.source;n.languages.csharp=n.languages.extend("clike",{string:[{pattern:o(/(^|[^$\\])<<0>>/.source,[b]),lookbehind:!0,greedy:!0},{pattern:o(/(^|[^@$\\])<<0>>/.source,[v]),lookbehind:!0,greedy:!0},{pattern:RegExp(t),greedy:!0,alias:"character"}],"class-name":[{pattern:o(/(\busing\s+static\s+)<<0>>(?=\s*;)/.source,[h]),lookbehind:!0,inside:l},{pattern:o(/(\busing\s+<<0>>\s*=\s*)<<1>>(?=\s*;)/.source,[g,a]),lookbehind:!0,inside:l},{pattern:o(/(\busing\s+)<<0>>(?=\s*=)/.source,[g]),lookbehind:!0},{pattern:o(/(\b<<0>>\s+)<<1>>/.source,[c,p]),lookbehind:!0,inside:l},{pattern:o(/(\bcatch\s*\(\s*)<<0>>/.source,[h]),lookbehind:!0,inside:l},{pattern:o(/(\bwhere\s+)<<0>>/.source,[g]),lookbehind:!0},{pattern:o(/(\b(?:is(?:\s+not)?|as)\s+)<<0>>/.source,[i]),lookbehind:!0,inside:l},{pattern:o(/\b<<0>>(?=\s+(?!<<1>>)<<2>>(?:\s*[=,;:{)\]]|\s+(?:in|when)\b))/.source,[a,f,g]),inside:l}],keyword:s,number:/(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:ul|lu|[dflmu])?\b/i,operator:/>>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),n.languages.insertBefore("csharp","number",{range:{pattern:/\.\./,alias:"operator"}}),n.languages.insertBefore("csharp","punctuation",{"named-parameter":{pattern:o(/([(,]\s*)<<0>>(?=\s*:)/.source,[g]),lookbehind:!0,alias:"punctuation"}}),n.languages.insertBefore("csharp","class-name",{namespace:{pattern:o(/(\b(?:namespace|using)\s+)<<0>>(?:\s*\.\s*<<0>>)*(?=\s*[;{])/.source,[g]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:o(/(\b(?:default|typeof|sizeof)\s*\(\s*(?!\s))(?:[^()\s]|\s(?!\s)|<<0>>)*(?=\s*\))/.source,[m]),lookbehind:!0,alias:"class-name",inside:l},"return-type":{pattern:o(/<<0>>(?=\s+(?:<<1>>\s*(?:=>|[({]|\.\s*this\s*\[)|this\s*\[))/.source,[a,h]),inside:l,alias:"class-name"},"constructor-invocation":{pattern:o(/(\bnew\s+)<<0>>(?=\s*[[({])/.source,[a]),lookbehind:!0,inside:l,alias:"class-name"},"generic-method":{pattern:o(/<<0>>\s*<<1>>(?=\s*\()/.source,[g,d]),inside:{function:o(/^<<0>>/.source,[g]),generic:{pattern:RegExp(d),alias:"class-name",inside:l}}},"type-list":{pattern:o(/\b((?:<<0>>\s+<<1>>|where\s+<<2>>)\s*:\s*)(?:<<3>>|<<4>>)(?:\s*,\s*(?:<<3>>|<<4>>))*(?=\s*(?:where|[{;]|=>|$))/.source,[c,p,g,a,s.source]),lookbehind:!0,inside:{keyword:s,"class-name":{pattern:RegExp(a),greedy:!0,inside:l},punctuation:/,/}},preprocessor:{pattern:/(^\s*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(\s*#)\b(?:define|elif|else|endif|endregion|error|if|line|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}}),a=r(/\/(?![*/])|\/\/[^\r\n]*[\r\n]|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>/.source,[s=v+"|"+t]),l=e(r(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[a]),2),v=/\b(?:assembly|event|field|method|module|param|property|return|type)\b/.source,t=r(/<<0>>(?:\s*\(<<1>>*\))?/.source,[h,l]),n.languages.insertBefore("csharp","class-name",{attribute:{pattern:o(/((?:^|[^\s\w>)?])\s*\[\s*)(?:<<0>>\s*:\s*)?<<1>>(?:\s*,\s*<<1>>)*(?=\s*\])/.source,[v,t]),lookbehind:!0,greedy:!0,inside:{target:{pattern:o(/^<<0>>(?=\s*:)/.source,[v]),alias:"keyword"},"attribute-arguments":{pattern:o(/\(<<0>>*\)/.source,[l]),inside:n.languages.csharp},"class-name":{pattern:RegExp(h),inside:{punctuation:/\./}},punctuation:/[:,]/}}});var y=/:[^}\r\n]+/.source,l=e(r(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[a]),2),h=r(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[l,y]),a=e(r(/[^"'/()]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>|\(<<self>>*\)/.source,[s]),2),s=r(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[a,y]);function w(e,t){return{interpolation:{pattern:o(/((?:^|[^{])(?:\{\{)*)<<0>>/.source,[e]),lookbehind:!0,inside:{"format-string":{pattern:o(/(^\{(?:(?![}:])<<0>>)*)<<1>>(?=\}$)/.source,[t,y]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-csharp",inside:n.languages.csharp}}},string:/[\s\S]+/}}n.languages.insertBefore("csharp","string",{"interpolation-string":[{pattern:o(/(^|[^\\])(?:\$@|@\$)"(?:""|\\[\s\S]|\{\{|<<0>>|[^\\{"])*"/.source,[h]),lookbehind:!0,greedy:!0,inside:w(h,l)},{pattern:o(/(^|[^@\\])\$"(?:\\.|\{\{|<<0>>|[^\\"{])*"/.source,[s]),lookbehind:!0,greedy:!0,inside:w(s,a)}]})}(Prism),Prism.languages.dotnet=Prism.languages.cs=Prism.languages.csharp},{}],6:[function(e,t,n){var r,o;r=Prism,o=/("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-](?:[^;{\s]|\s+(?![\s{]))*(?:;|(?=\s*\{))/,inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+o.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+o.source+"$"),alias:"url"}}},selector:RegExp("[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+o.source+")*(?=\\s*\\{)"),string:{pattern:o,greedy:!0},property:/(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,important:/!important\b/i,function:/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css,(o=r.languages.markup)&&(o.tag.addInlined("style","css"),r.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/(^|["'\s])style\s*=\s*(?:"[^"]*"|'[^']*')/i,lookbehind:!0,inside:{"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{style:{pattern:/(["'])[\s\S]+(?=["']$)/,lookbehind:!0,alias:"language-css",inside:r.languages.css},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},"attr-name":/^style/i}}},o.tag))},{}],7:[function(e,t,n){var r=Prism,o=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,i=/(^|[^\w.])(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,a={pattern:RegExp(i+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};r.languages.java=r.languages.extend("clike",{"class-name":[a,{pattern:RegExp(i+/[A-Z]\w*(?=\s+\w+\s*[;,=())])/.source),lookbehind:!0,inside:a.inside}],keyword:o,function:[r.languages.clike.function,{pattern:/(\:\:\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0}}),r.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"}}),r.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.&?]|<(?:[\w\s,.&?]|<(?:[\w\s,.&?]|<[\w\s,.&?]*>)*>)*>)*>/,inside:{"class-name":a,keyword:o,punctuation:/[<>(),.:]/,operator:/[?&|]/}},namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return o.source})),lookbehind:!0,inside:{punctuation:/\./}}})},{}],8:[function(e,t,n){Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:prototype|constructor))/,lookbehind:!0}],keyword:[{pattern:/((?:^|})\s*)(?:catch|finally)\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|for|from|function|(?:get|set)(?=\s*[\[$\w\xA0-\uFFFF])|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:/\b(?:(?:0[xX](?:[\dA-Fa-f](?:_[\dA-Fa-f])?)+|0[bB](?:[01](?:_[01])?)+|0[oO](?:[0-7](?:_[0-7])?)+)n?|(?:\d(?:_\d)?)+n|NaN|Infinity)\b|(?:\b(?:\d(?:_\d)?)+\.?(?:\d(?:_\d)?)*|\B\.(?:\d(?:_\d)?)+)(?:[Ee][+-]?(?:\d(?:_\d)?)+)?/,operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|interface|extends|implements|instanceof|new)\s+)[\w.\\]+/,Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)\/(?:\[(?:[^\]\\\r\n]|\\.)*]|\\.|[^/\\\[\r\n])+\/[gimyus]{0,6}(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/,lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-flags":/[a-z]+$/,"regex-delimiter":/^\/|\/$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),Prism.languages.insertBefore("javascript","string",{"template-string":{pattern:/`(?:\\[\s\S]|\${(?:[^{}]|{(?:[^{}]|{[^}]*})*})+}|(?!\${)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\${(?:[^{}]|{(?:[^{}]|{[^}]*})*})+}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\${|}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}}}),Prism.languages.markup&&Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.js=Prism.languages.javascript},{}],9:[function(e,t,n){function m(e,t){return"___"+e.toUpperCase()+t+"___"}var g=Prism;Object.defineProperties(g.languages["markup-templating"]={},{buildPlaceholders:{value:function(r,o,e,i){var a;r.language===o&&(a=r.tokenStack=[],r.code=r.code.replace(e,function(e){if("function"==typeof i&&!i(e))return e;for(var t,n=a.length;-1!==r.code.indexOf(t=m(o,n));)++n;return a[n]=e,t}),r.grammar=g.languages.markup)}},tokenizePlaceholders:{value:function(s,l){var f,d;s.language===l&&s.tokenStack&&(s.grammar=g.languages[l],f=0,d=Object.keys(s.tokenStack),function e(t){for(var n=0;n<t.length&&!(f>=d.length);n++){var r,o,i,a,u,c=t[n];"string"==typeof c||c.content&&"string"==typeof c.content?(o=d[f],i=s.tokenStack[o],r="string"==typeof c?c:c.content,u=m(l,o),-1<(a=r.indexOf(u))&&(++f,o=r.substring(0,a),i=new g.Token(l,g.tokenize(i,s.grammar),"language-"+l,i),a=r.substring(a+u.length),u=[],o&&u.push.apply(u,e([o])),u.push(i),a&&u.push.apply(u,e([a])),"string"==typeof c?t.splice.apply(t,[n,1].concat(u)):c.content=u)):c.content&&e(c.content)}return t}(s.tokens))}}})},{}],10:[function(e,t,n){Prism.languages.markup={comment:/<!--[\s\S]*?-->/,prolog:/<\?[\s\S]+?\?>/,doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/,name:/[^\s<>'"]+/}},cdata:/<!\[CDATA\[[\s\S]*?]]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity,Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup,Prism.hooks.add("wrap",function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))}),Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(e,t){var n={};n["language-"+t]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[t]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;n={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};n["language-"+t]={pattern:/[\s\S]+/,inside:Prism.languages[t]};t={};t[e]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return e}),"i"),lookbehind:!0,greedy:!0,inside:n},Prism.languages.insertBefore("markup","cdata",t)}}),Prism.languages.html=Prism.languages.markup,Prism.languages.mathml=Prism.languages.markup,Prism.languages.svg=Prism.languages.markup,Prism.languages.xml=Prism.languages.extend("markup",{}),Prism.languages.ssml=Prism.languages.xml,Prism.languages.atom=Prism.languages.xml,Prism.languages.rss=Prism.languages.xml},{}],11:[function(e,t,n){!function(t){var e=/\/\*[\s\S]*?\*\/|\/\/.*|#(?!\[).*/,n=[{pattern:/\b(?:false|true)\b/i,alias:"boolean"},/\b[A-Z_][A-Z0-9_]*\b(?!\s*\()/,/\b(?:null)\b/i],r=/\b0b[01]+\b|\b0x[\da-f]+\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+)(?:e[+-]?\d+)?/i,o=/<?=>|\?\?=?|\.{3}|\??->|[!=]=?=?|::|\*\*=?|--|\+\+|&&|\|\||<<|>>|[?~]|[/^|%*&<>.+-]=?/,i=/[{}\[\](),:;]/;t.languages.php={delimiter:{pattern:/\?>$|^<\?(?:php(?=\s)|=)?/i,alias:"important"},comment:e,variable:/\$+(?:\w+\b|(?={))/i,package:{pattern:/(namespace\s+|use\s+(?:function\s+)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,lookbehind:!0,inside:{punctuation:/\\/}},keyword:[{pattern:/(\(\s*)\b(?:bool|boolean|int|integer|float|string|object|array)\b(?=\s*\))/i,alias:"type-casting",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)\b(?:bool|int|float|string|object|array(?!\s*\()|mixed|self|static|callable|iterable|(?:null|false)(?=\s*\|))\b(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*[a-z0-9_|]\|\s*)(?:null|false)\b(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b(?:bool|int|float|string|object|void|array(?!\s*\()|mixed|self|static|callable|iterable|(?:null|false)(?=\s*\|))\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?[a-z0-9_|]\|\s*)(?:null|false)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/\b(?:bool|int|float|string|object|void|array(?!\s*\()|mixed|iterable|(?:null|false)(?=\s*\|))\b/i,alias:"type-declaration",greedy:!0},{pattern:/(\|\s*)(?:null|false)\b/i,alias:"type-declaration",greedy:!0,lookbehind:!0},{pattern:/\b(?:parent|self|static)(?=\s*::)/i,alias:"static-context",greedy:!0},/\b(?:__halt_compiler|abstract|and|array|as|break|callable|case|catch|class|clone|const|continue|declare|default|die|do|echo|else|elseif|empty|enddeclare|endfor|endforeach|endif|endswitch|endwhile|eval|exit|extends|final|finally|for|foreach|function|global|goto|if|implements|include|include_once|instanceof|insteadof|interface|isset|list|namespace|match|new|or|parent|print|private|protected|public|require|require_once|return|self|static|switch|throw|trait|try|unset|use|var|while|xor|yield)\b/i],"argument-name":/\b[a-z_]\w*(?=\s*:(?!:))/i,"class-name":[{pattern:/(\b(?:class|interface|extends|implements|trait|instanceof|new(?!\s+self|\s+static))\s+|\bcatch\s*\()\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/(\|\s*)\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/\b[a-z_]\w*(?!\\)\b(?=\s*\|)/i,greedy:!0},{pattern:/(\|\s*)(?:\\?\b[a-z_]\w*)+\b/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(?:\\?\b[a-z_]\w*)+\b(?=\s*\|)/i,alias:"class-name-fully-qualified",greedy:!0,inside:{punctuation:/\\/}},{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self\b|\s+static\b))\s+|\bcatch\s*\()(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*\$)/i,alias:"type-declaration",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-declaration"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*::)/i,alias:["class-name-fully-qualified","static-context"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/([(,?]\s*)[a-z_]\w*(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-hint"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b[a-z_]\w*(?!\\)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:["class-name-fully-qualified","return-type"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:n,function:/\w+\s*(?=\()/,property:{pattern:/(->)[\w]+/,lookbehind:!0},number:r,operator:o,punctuation:i};var a=[{pattern:/<<<'([^']+)'[\r\n](?:.*[\r\n])*?\1;/,alias:"nowdoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<'[^']+'|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<'?|[';]$/}}}},{pattern:/<<<(?:"([^"]+)"[\r\n](?:.*[\r\n])*?\1;|([a-z_]\w*)[\r\n](?:.*[\r\n])*?\2;)/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<(?:"[^"]+"|[a-z_]\w*)|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<"?|[";]$/}},interpolation:a={pattern:/{\$(?:{(?:{[^{}]+}|[^{}]+)}|[^{}])+}|(^|[^\\{])\$+(?:\w+(?:\[[^\r\n\[\]]+\]|->\w+)*)/,lookbehind:!0,inside:t.languages.php}}},{pattern:/`(?:\\[\s\S]|[^\\`])*`/,alias:"backtick-quoted-string",greedy:!0},{pattern:/'(?:\\[\s\S]|[^\\'])*'/,alias:"single-quoted-string",greedy:!0},{pattern:/"(?:\\[\s\S]|[^\\"])*"/,alias:"double-quoted-string",greedy:!0,inside:{interpolation:a}}];t.languages.insertBefore("php","variable",{string:a}),t.languages.insertBefore("php","variable",{attribute:{pattern:/#\[(?:[^"'\/#]|\/(?![*/])|\/\/.*$|#(?!\[).*$|\/\*(?:[^*]|\*(?!\/))*\*\/|"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*')+\](?=\s*[a-z$#])/im,greedy:!0,inside:{"attribute-content":{pattern:/^(#\[)[\s\S]+(?=]$)/,lookbehind:!0,inside:{comment:e,string:a,"attribute-class-name":[{pattern:/([^:]|^)\b[a-z_]\w*(?!\\)\b/i,alias:"class-name",greedy:!0,lookbehind:!0},{pattern:/([^:]|^)(?:\\?\b[a-z_]\w*)+/i,alias:["class-name","class-name-fully-qualified"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:n,number:r,operator:o,punctuation:i}},delimiter:{pattern:/^#\[|]$/,alias:"punctuation"}}}}),t.hooks.add("before-tokenize",function(e){/<\?/.test(e.code)&&t.languages["markup-templating"].buildPlaceholders(e,"php",/<\?(?:[^"'/#]|\/(?![*/])|("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|(?:\/\/|#(?!\[))(?:[^?\n\r]|\?(?!>))*(?=$|\?>|[\r\n])|#\[|\/\*(?:[^*]|\*(?!\/))*(?:\*\/|$))*?(?:\?>|$)/gi)}),t.hooks.add("after-tokenize",function(e){t.languages["markup-templating"].tokenizePlaceholders(e,"php")})}(Prism)},{}],12:[function(e,t,n){Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0},"string-interpolation":{pattern:/(?:f|rf|fr)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:{{)*){(?!{)(?:[^{}]|{(?!{)(?:[^{}]|{(?!{)(?:[^{}])+})+})+}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|rb|br)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|rb|br)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^\s*)@\w+(?:\.\w+)*/im,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:and|as|assert|async|await|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:True|False|None)\b/,number:/(?:\b(?=\d)|\B(?=\.))(?:0[bo])?(?:(?:\d|0x[\da-f])[\da-f]*(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?j?\b/i,operator:/[-+%=]=?|!=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python},{}],13:[function(e,t,n){!function(e){e.languages.ruby=e.languages.extend("clike",{comment:[/#.*/,{pattern:/^=begin\s[\s\S]*?^=end/m,greedy:!0}],"class-name":{pattern:/(\b(?:class)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:alias|and|BEGIN|begin|break|case|class|def|define_method|defined|do|each|else|elsif|END|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|protected|private|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\b/});var t={pattern:/#\{[^}]+\}/,inside:{delimiter:{pattern:/^#\{|\}$/,alias:"tag"},rest:e.languages.ruby}};delete e.languages.ruby.function,e.languages.insertBefore("ruby","keyword",{regex:[{pattern:RegExp(/%r/.source+"(?:"+[/([^a-zA-Z0-9\s{(\[<])(?:(?!\1)[^\\]|\\[\s\S])*\1[gim]{0,3}/.source,/\((?:[^()\\]|\\[\s\S])*\)[gim]{0,3}/.source,/\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}[gim]{0,3}/.source,/\[(?:[^\[\]\\]|\\[\s\S])*\][gim]{0,3}/.source,/<(?:[^<>\\]|\\[\s\S])*>[gim]{0,3}/.source].join("|")+")"),greedy:!0,inside:{interpolation:t}},{pattern:/(^|[^/])\/(?!\/)(?:\[[^\r\n\]]+\]|\\.|[^[/\\\r\n])+\/[gim]{0,3}(?=\s*(?:$|[\r\n,.;})]))/,lookbehind:!0,greedy:!0}],variable:/[@$]+[a-zA-Z_]\w*(?:[?!]|\b)/,symbol:{pattern:/(^|[^:]):[a-zA-Z_]\w*(?:[?!]|\b)/,lookbehind:!0},"method-definition":{pattern:/(\bdef\s+)[\w.]+/,lookbehind:!0,inside:{function:/\w+$/,rest:e.languages.ruby}}}),e.languages.insertBefore("ruby","number",{builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Stat|Fixnum|Float|Hash|Integer|IO|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|String|Struct|TMS|Symbol|ThreadGroup|Thread|Time|TrueClass)\b/,constant:/\b[A-Z]\w*(?:[?!]|\b)/}),e.languages.ruby.string=[{pattern:RegExp(/%[qQiIwWxs]?/.source+"(?:"+[/([^a-zA-Z0-9\s{(\[<])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/\((?:[^()\\]|\\[\s\S])*\)/.source,/\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}/.source,/\[(?:[^\[\]\\]|\\[\s\S])*\]/.source,/<(?:[^<>\\]|\\[\s\S])*>/.source].join("|")+")"),greedy:!0,inside:{interpolation:t}},{pattern:/("|')(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|(?!\1)[^\\#\r\n])*\1/,greedy:!0,inside:{interpolation:t}}],e.languages.rb=e.languages.ruby}(Prism)},{}],14:[function(e,t,n){var r=e("prismjs/components/prism-core");e("prismjs/components/prism-clike"),e("prismjs/components/prism-markup-templating"),e("prismjs/components/prism-c"),e("prismjs/components/prism-cpp"),e("prismjs/components/prism-csharp"),e("prismjs/components/prism-css"),e("prismjs/components/prism-java"),e("prismjs/components/prism-javascript"),e("prismjs/components/prism-markup"),e("prismjs/components/prism-php"),e("prismjs/components/prism-python"),e("prismjs/components/prism-ruby"),t.exports={boltExport:r}},{"prismjs/components/prism-c":1,"prismjs/components/prism-clike":2,"prismjs/components/prism-core":3,"prismjs/components/prism-cpp":4,"prismjs/components/prism-csharp":5,"prismjs/components/prism-css":6,"prismjs/components/prism-java":7,"prismjs/components/prism-javascript":8,"prismjs/components/prism-markup":10,"prismjs/components/prism-markup-templating":9,"prismjs/components/prism-php":11,"prismjs/components/prism-python":12,"prismjs/components/prism-ruby":13}]},{},[14])(14)},"object"==typeof t&&void 0!==n?n.exports=r():"function"==typeof e&&e.amd?e([],r):("undefined"!=typeof window?window:b).EphoxContactWrapper=r(),window.Prism,window.Prism=f;var C=v.exports.boltExport;o.add("codesample",function(t){var n,r,o=(n=t).$;n.on("PreProcess",function(e){o("pre[contenteditable=false]",e.node).filter(u(a)).each(function(e,t){var n=o(t),r=t.textContent;n.attr("class",o.trim(n.attr("class"))),n.removeAttr("contentEditable"),n.empty().append(o("<code></code>").each(function(){this.textContent=r}))})}),n.on("SetContent",function(){var e=o("pre").filter(u(a)).filter(function(e,t){return"false"!==t.contentEditable});e.length&&n.undoManager.transact(function(){e.each(function(e,t){o(t).find("br").each(function(e,t){t.parentNode.replaceChild(n.getDoc().createTextNode("\n"),t)}),t.contentEditable="false",t.innerHTML=n.dom.encode(t.textContent),y(n).highlightElement(t),t.className=o.trim(t.className)})})}),S(t),(r=t).addCommand("codesample",function(){var e=r.selection.getNode();r.selection.isCollapsed()||a(e)?x(r):r.formatter.toggle("code")}),t.on("dblclick",function(e){a(e.target)&&x(t)})})}(),function(){"use strict";function F(){}function g(e){return function(){return e}}function s(e){return e}function y(r){for(var o=[],e=1;e<arguments.length;e++)o[e-1]=arguments[e];return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=o.concat(e);return r.apply(null,n)}}function p(t){return function(e){return!t(e)}}function u(e){return!(null===e||void 0===e)}function z(e,t){return-1<o.call(e,t)}function b(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n))return!0;return!1}function w(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n}function U(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r}function q(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}function $(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n}function f(e,r,o){return function(e){for(var t,n=e.length-1;0<=n;n--)t=e[n],o=r(o,t)}(e),o}function W(e,t,n){return q(e,function(e){n=t(n,e)}),n}function d(e,t){return function(e,t,n){for(var r=0,o=e.length;r<o;r++){var i=e[r];if(t(i,r))return H.some(i);if(n(i,r))break}return H.none()}(e,t,v)}function l(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n))return H.some(n);return H.none()}function i(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!R(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);E.apply(t,e[n])}return t}function x(e,t){return i(U(e,t))}function S(e,t){for(var n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n))return!1;return!0}function C(e,t){for(var n={},r=0,o=e.length;r<o;r++){var i=e[r];n[String(i)]=t(i,r)}return n}function t(e){return[e]}function n(e,t){return 0<=t&&t<e.length?H.some(e[t]):H.none()}function m(e){return n(e,0)}function c(e){return n(e,e.length-1)}function h(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome())return r}return H.none()}var v=g(!1),k=g(!0),a={fold:function(e,t){return e()},is:v,isSome:v,isNone:k,getOr:Ac=function(e){return e},getOrThunk:Rc=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:g(null),getOrUndefined:g(void 0),or:Ac,orThunk:Rc,map:Ll=function(){return a},each:F,bind:Ll,exists:v,forall:k,filter:Ll,equals:Pc=function(e){return e.isNone()},equals_:Pc,toArray:function(){return[]},toString:g("none()")},O=function(n){function e(){return o}function t(e){return e(n)}var r=g(n),o={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:k,isNone:v,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return O(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:a},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(v,function(e){return t(n,e)})}};return o},H={some:O,none:Ll,from:function(e){return null==e?a:O(e)}},T=(Ls=function(n){return function(e){return e=typeof(t=e),(null===t?"null":"object"==e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"==e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e)===n;var t}})("string"),A=Ls("object"),R=Ls("array"),r=(_l=function(t){return function(e){return typeof e===t}})("boolean"),D=function(e){return void 0===e},_=_l("function"),N=_l("number"),P=Array.prototype.slice,o=Array.prototype.indexOf,E=Array.prototype.push,I=function(){return(I=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function B(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r}function V(n){var r,o=!1;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o||(o=!0,r=n.apply(null,e)),r}}function M(){return Ee(0,0)}function L(e,t){var n=String(t).toLowerCase();return d(e,function(e){return e.search(n)})}function j(e,t,n){return""===t||e.length>=t.length&&e.substr(n,n+t.length)===t}function K(e,t){return-1!==e.indexOf(t)}function G(e,t){return j(e,t,0)}function Z(e,t){return j(e,t,e.length-t.length)}function X(e){return 0<e.length}function e(e){var t=e.current,n=e.version;return{current:t,version:n,isEdge:(e=function(e){return function(){return t===e}})("Edge"),isChrome:e("Chrome"),isIE:e("IE"),isOpera:e("Opera"),isFirefox:e(ze),isSafari:e("Safari")}}function Y(e){var t=e.current,n=e.version;return{current:t,version:n,isWindows:(e=function(e){return function(){return t===e}})($e),isiOS:e("iOS"),isAndroid:e(We),isOSX:e("OSX"),isLinux:e("Linux"),isSolaris:e(He),isFreeBSD:e(Ve),isChromeOS:e(Ke)}}function J(e,t){var n,r,o,i,a=Fe.browsers(),u=Fe.oses(),c=L(a,i=e).map(function(e){var t=Ie(e.versionRegexes,i);return{current:e.name,version:t}}).fold(Ue,qe),s=L(u,o=e).map(function(e){var t=Ie(e.versionRegexes,o);return{current:e.name,version:t}}).fold(Ge,Ze);return{browser:c,os:s,deviceType:(n=c,r=e,a=t,c=(u=s).isiOS()&&!0===/ipad/i.test(r),e=u.isiOS()&&!c,s=(t=u.isiOS()||u.isAndroid())||a("(pointer:coarse)"),a=c||!e&&t&&a("(min-device-width:768px)"),t=e||t&&!a,n=n.isSafari()&&u.isiOS()&&!1===/safari/i.test(r),r=!t&&!a&&!n,{isiPad:g(c),isiPhone:g(e),isTablet:g(a),isPhone:g(t),isTouch:g(s),isAndroid:u.isAndroid,isiOS:u.isiOS,isWebView:g(n),isDesktop:g(r)})}}function Q(e){return window.matchMedia(e).matches}function ee(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}}function te(e,t){if(1!==(e=e.dom).nodeType)return!1;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}function ne(e){return 1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount}function re(e,t){return e.dom===t.dom}function oe(e,t){return Xe().browser.isIE()?(r=t,o=(n=e).dom,n=r.dom,r=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(o.compareDocumentPosition(n)&r)):(e=e.dom)!==(t=t.dom)&&e.contains(t);var n,r,o}function ie(e,t){for(var n=Qe(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}}function ae(e,n){return tt(e,function(e,t){return{k:t,v:n(e,t)}})}function ue(e,t){var n={},r=t,o=n,i=function(e,t){o[t]=e},a=F;return ie(e,function(e,t){(r(e,t)?i:a)(e,t)}),n}function ce(e,n){var r=[];return ie(e,function(e,t){r.push(n(e,t))}),r}function se(e){return Qe(e).length}function le(e,t){return nt(e,t)?H.from(e[t]):H.none()}function fe(e,t){return nt(e,t)&&void 0!==e[t]&&null!==e[t]}function de(e,t,n){return{element:e,rowspan:t,colspan:n}}function me(e,t,n){return{element:e,cells:t,section:n}}function ge(e,t,n){return{element:e,isNew:t,isLocked:n}}function pe(e,t){return{cells:e,section:t}}function he(e){return e.dom.nodeType}function ve(e){return 8===he(e)||"#comment"===ot(e)}function be(t){return function(e){return it(e)&&ot(e)===t}}function ye(e){return Ye.fromDom(e.dom.ownerDocument)}function we(e){return ut(e)?e:ye(e)}function xe(e){return H.from(e.dom.parentNode).map(Ye.fromDom)}function Se(e,t){for(var n=_(t)?t:v,r=e.dom,o=[];null!==r.parentNode&&void 0!==r.parentNode;){var i=r.parentNode,a=Ye.fromDom(i);if(o.push(a),!0===n(a))break;r=i}return o}function Ce(e){return H.from(e.dom.previousSibling).map(Ye.fromDom)}function ke(e){return H.from(e.dom.nextSibling).map(Ye.fromDom)}function Oe(e){return U(e.dom.childNodes,Ye.fromDom)}function Te(e,t){return e=e.dom.childNodes,H.from(e[t]).map(Ye.fromDom)}function Ae(e){return Ye.fromDom(e.dom.host)}function Re(e){if(null==(e=e.dom.body))throw new Error("Body is not available yet");return Ye.fromDom(e)}function De(e,t,n){return r=function(e){return te(e,t)},$(Se(e,n),r);var r}function _e(e,t){return n=function(e){return te(e,t)},$(Oe(e),n);var n}function Ne(e,t){return e=void 0===e?document:e.dom,ne(e)?[]:U(e.querySelectorAll(t),Ye.fromDom)}var Pe,Ee=function(e,t){return{major:e,minor:t}},Ie=function(e,t){t=String(t).toLowerCase();return 0===e.length?M():function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(e,t);if(!n)return{major:0,minor:0};e=function(e){return Number(t.replace(n,"$"+e))};return Ee(e(1),e(2))}(e,t)},Be=M,Me=(Pe=/^\s+|\s+$/g,function(e){return e.replace(Pe,"")}),Le=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return K(e,"edge/")&&K(e,"chrome")&&K(e,"safari")&&K(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Es=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/],search:function(e){return K(e,"chrome")&&!K(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return K(e,"msie")||K(e,"trident")}},{name:"Opera",versionRegexes:[Es,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:(js=function(t){return function(e){return K(e,t)}})("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:js("firefox")},{name:"Safari",versionRegexes:[Es,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(K(e,"safari")||K(e,"mobile/"))&&K(e,"applewebkit")}}],je=[{name:"Windows",search:js("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return K(e,"iphone")||K(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:js("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:js("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:js("linux"),versionRegexes:[]},{name:"Solaris",search:js("sunos"),versionRegexes:[]},{name:"FreeBSD",search:js("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:js("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Fe={browsers:g(Le),oses:g(je)},ze="Firefox",Ue=function(){return e({current:void 0,version:Be()})},qe=e,$e=(g("Edge"),g("Chrome"),g("IE"),g("Opera"),g(ze),g("Safari"),"Windows"),We="Android",He="Solaris",Ve="FreeBSD",Ke="ChromeOS",Ge=function(){return Y({current:void 0,version:Be()})},Ze=Y,Xe=(g($e),g("iOS"),g(We),g("Linux"),g("OSX"),g(He),g(Ve),g(Ke),V(function(){return J(navigator.userAgent,Q)})),Ye={fromHtml:function(e,t){t=(t||document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return ee(t.childNodes[0])},fromTag:function(e,t){e=(t||document).createElement(e);return ee(e)},fromText:function(e,t){e=(t||document).createTextNode(e);return ee(e)},fromDom:ee,fromPoint:function(e,t,n){return H.from(e.dom.elementFromPoint(t,n)).map(ee)}},Je=te,Qe=Object.keys,et=Object.hasOwnProperty,tt=function(e,n){var r={};return ie(e,function(e,t){t=n(e,t);r[t.k]=t.v}),r},nt=function(e,t){return et.call(e,t)},rt=["tfoot","thead","tbody","colgroup"],ot=("undefined"!=typeof window||Function("return this;")(),function(e){return e.dom.nodeName.toLowerCase()}),it=(qs=function(t){return function(e){return he(e)===t}})(1),at=qs(3),ut=qs(9),ct=qs(11),st=_(Element.prototype.attachShadow)&&_(Node.prototype.getRootNode),lt=g(st),ft=st?function(e){return Ye.fromDom(e.dom.getRootNode())}:we,dt=function(e){var t=at(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;var n,r,o,i=t.ownerDocument;return o=Ye.fromDom(t),e=ft(o),(ct(o=e)&&u(o.dom.host)?H.some(e):H.none()).fold(function(){return i.body.contains(t)},(n=dt,r=Ae,function(e){return n(r(e))}))},mt=function(e,t){var n=[];return q(Oe(e),function(e){n=(n=t(e)?n.concat([e]):n).concat(mt(e,t))}),n};function gt(e,t,n,r,o){return e(n,r)?H.some(n):_(o)&&o(n)?H.none():t(n,r,o)}function pt(e,t,n){for(var r=e.dom,o=_(n)?n:v;r.parentNode;){r=r.parentNode;var i=Ye.fromDom(r);if(t(i))return H.some(i);if(o(i))break}return H.none()}function ht(e,t,n){return pt(e,function(e){return te(e,t)},n)}function vt(e,t){return n=function(e){return te(e,t)},d(e.dom.childNodes,function(e){return n(Ye.fromDom(e))}).map(Ye.fromDom);var n}function bt(e,t){return t=t,e=void 0===e?document:e.dom,ne(e)?H.none():H.from(e.querySelector(t)).map(Ye.fromDom)}function yt(e,t,n){return gt(te,ht,e,t,n)}function wt(e,t,n){if(!(T(n)||r(n)||N(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")}function xt(e,t,n){wt(e.dom,t,n)}function St(e,t){var n=e.dom;ie(t,function(e,t){wt(n,t,e)})}function Ct(e,t){return null===(t=e.dom.getAttribute(t))?void 0:t}function kt(e,t){return H.from(Ct(e,t))}function Ot(e,t){e.dom.removeAttribute(t)}function Tt(e){return W(e.dom.attributes,function(e,t){return e[t.name]=t.value,e},{})}function At(e){return void 0!==e.style&&_(e.style.getPropertyValue)}function Rt(e,t,n){if(!T(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);At(e)&&e.style.setProperty(t,n)}function Dt(e,t,n){e=e.dom,Rt(e,t,n)}function _t(e,t){var n=e.dom;ie(t,function(e,t){Rt(n,t,e)})}function Nt(e,t){var n=e.dom,r=window.getComputedStyle(n).getPropertyValue(t);return""!==r||dt(e)?r:Tn(n,t)}function Pt(e,t){return e=e.dom,t=Tn(e,t),H.from(t).filter(function(e){return 0<e.length})}function Et(e,t){var n=e.dom,t=t;At(n=n)&&n.style.removeProperty(t),kt(e,"style").map(Me).is("")&&Ot(e,"style")}function It(e,t,n){return void 0===n&&(n=0),kt(e,t).map(function(e){return parseInt(e,10)}).getOr(n)}function Bt(e,t){return It(e,t,1)}function Mt(e){return 1<Bt(e,"colspan")}function Lt(e){return 1<Bt(e,"rowspan")}function jt(e,t){return parseInt(Nt(e,t),10)}function Ft(e,t){return Dn(e,t,k)}function zt(e,t){return n=["td","th"],(r=void 0===(r=t)?v:r)(e=e)?H.none():z(n,ot(e))?H.some(e):ht(e,n.join(","),function(e){return te(e,"table")||r(e)});var n,r}function Ut(e){return Ft(e,"th,td")}function qt(e){return te(e,"colgroup")?_e(e,"col"):x(_n(e),function(e){return _e(e,"col")})}function $t(e,t){return yt(e,"table",t)}function Wt(e){return Ft(e,"tr")}function Ht(e,n){return U(e,function(e){if("colgroup"!==ot(e))return t=U(Ut(e),function(e){var t=It(e,"rowspan",1),n=It(e,"colspan",1);return de(e,t,n)}),me(e,t,n(e));var t=U(qt(e),function(e){var t=It(e,"span",1);return de(e,1,t)});return me(e,t,"colgroup")})}function Vt(e){return xe(e).map(function(e){e=ot(e);return z(rt,e)?e:"tbody"}).getOr("tbody")}function Kt(e){var t=Wt(e),t=B(_n(e),t);return Ht(t,Vt)}function Gt(e,t,n){var r=e.cells,o=r.slice(0,t),t=r.slice(t),t=o.concat(n).concat(t);return Nn(e,t)}function Zt(e,t,n){return Gt(e,t,[n])}function Xt(e,t,n){e.cells[t]=n}function Yt(e,t){var n=e.cells,t=U(n,t);return pe(t,e.section)}function Jt(e,t){return e.cells[t]}function Qt(e,t){return Jt(e,t).element}function en(e){return e.cells.length}function tn(e){return{rows:(e=function(e){for(var t=[],n=[],r=0,o=e.length;r<o;r++){var i=e[r];("colgroup"===i.section?t:n).push(i)}return{pass:t,fail:n}}(e)).fail,cols:e.pass}}function nn(e){return kt(e,Pn).bind(function(e){return H.from(e.match(/\d+/g))}).map(function(e){return C(e,k)})}function rn(e){var e=W(tn(e).rows,function(n,e){return q(e.cells,function(e,t){e.isLocked&&(n[t]=!0)}),n},{}),e=ce(e,function(e,t){return parseInt(t,10)});return(e=P.call(e,0)).sort(void 0),e}function on(e,t){return e=x(e.all,function(e){return e.cells}),$(e,t)}function an(e){var c={},t=[],n={},s=m(e).map(function(e){return e.element}).bind($t).bind(nn).getOr({}),i=0,l=0,f=0;return q(e,function(e){var u,r,o;"colgroup"===e.section?(r={},o=0,q(e.cells,function(t){var n=t.colspan;w(n,function(e){e=o+e;r[e]={element:t.element,colspan:n,column:e}}),o+=n}),n=r):(u=[],q(e.cells,function(e){for(var t=0;void 0!==c[f+","+t];)t++;for(var n=fe(s,t.toString()),r={element:e.element,rowspan:e.rowspan,colspan:e.colspan,row:f,column:t,isLocked:n},o=0;o<e.colspan;o++)for(var i=0;i<e.rowspan;i++){var a=t+o;c[f+i+","+a]=r,l=Math.max(l,a+1)}u.push(r)}),i++,t.push(me(e.element,u,e.section)),f++)}),{grid:{rows:i,columns:l},access:c,all:t,columns:n}}function un(e,t){var n=t.column,r=t.column+t.colspan-1,o=t.row,t=t.row+t.rowspan-1;return n<=e.finishCol&&r>=e.startCol&&o<=e.finishRow&&t>=e.startRow}function cn(e,t){return t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow}function sn(e,t,n){var t=Mn(e,t,re),r=Mn(e,n,re);return t.bind(function(n){return r.map(function(e){return t=n,e=e,{startRow:Math.min(t.row,e.row),startCol:Math.min(t.column,e.column),finishRow:Math.max(t.row+t.rowspan-1,e.row+e.rowspan-1),finishCol:Math.max(t.column+t.colspan-1,e.column+e.colspan-1)};var t})})}function ln(t,e,n){return sn(t,e,n).map(function(e){e=Ln(t,y(un,e));return U(e,function(e){return e.element})})}function fn(e,t){return Mn(e,t,function(e,t){return oe(t,e)}).map(function(e){return e.element})}function dn(e,t,n,r,o){var i=qn(e),t=re(e,n)?H.some(t):fn(i,t),a=re(e,o)?H.some(r):fn(i,r);return t.bind(function(t){return a.bind(function(e){return ln(i,t,e)})})}function mn(t,n){xe(t).each(function(e){e.dom.insertBefore(n.dom,t.dom)})}function gn(e,t){ke(e).fold(function(){xe(e).each(function(e){$n(e,t)})},function(e){mn(e,t)})}function pn(t,n){Te(t,0).fold(function(){$n(t,n)},function(e){t.dom.insertBefore(n.dom,e.dom)})}function hn(e,t){mn(e,t),$n(t,e)}function vn(n,r){q(r,function(e,t){t=0===t?n:r[t-1];gn(t,e)})}function bn(t,e){q(e,function(e){$n(t,e)})}function yn(e){e.dom.textContent="",q(Oe(e),function(e){Wn(e)})}function wn(e){var t,n=Oe(e);0<n.length&&(t=e,q(n,function(e){mn(t,e)})),Wn(e)}function xn(e){return Hn.get(e)}function Sn(e){return Hn.getOption(e)}function Cn(e,t){return Hn.set(e,t)}var kn,On,Tn=function(e,t){return At(e)?e.style.getPropertyValue(t):""},An=g(10),Rn=g(10),Dn=function(e,t,n){return x(Oe(e),function(e){return te(e,t)?n(e)?[e]:[]:Dn(e,t,n)})},_n=function(e){return $t(e).fold(g([]),function(e){return _e(e,"colgroup")})},Nn=function(e,t){return pe(t,e.section)},Pn="data-snooker-locked-cols",En=function(e){e=Kt(e);return an(e)},In=an,Bn=function(e,t,n){n=e.access[t+","+n];return void 0!==n?H.some(n):H.none()},Mn=function(e,t,n){e=on(e,function(e){return n(t,e.element)});return 0<e.length?H.some(e[0]):H.none()},Ln=on,jn=function(e){return x(e.all,function(e){return e.cells})},Fn=function(e){return e=e.columns,ce(e,function(e){return e})},zn=function(e){return 0<Qe(e.columns).length},Un=function(e,t){return H.from(e.columns[t])},qn=En,$n=function(e,t){e.dom.appendChild(t.dom)},Wn=function(e){e=e.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},Hn=(kn=at,{get:function(e){if(!kn(e))throw new Error("Can only get text value of a text node");return On(e).getOr("")},getOption:On=function(e){return kn(e)?H.from(e.dom.nodeValue):H.none()},set:function(e,t){if(!kn(e))throw new Error("Can only set raw text value of a text node");e.dom.nodeValue=t}}),Vn=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function Kn(){return{up:g({selector:ht,closest:yt,predicate:pt,all:Se}),down:g({selector:Ne,predicate:mt}),styles:g({get:Nt,getRaw:Pt,set:Dt,remove:Et}),attrs:g({get:Ct,set:xt,remove:Ot,copyTo:function(e,t){e=Tt(e);St(t,e)}}),insert:g({before:mn,after:gn,afterAll:vn,append:$n,appendAll:bn,prepend:pn,wrap:hn}),remove:g({unwrap:wn,remove:Wn}),create:g({nu:Ye.fromTag,clone:function(e){return Ye.fromDom(e.dom.cloneNode(!1))},text:Ye.fromText}),query:g({comparePosition:function(e,t){return e.dom.compareDocumentPosition(t.dom)},prevSibling:Ce,nextSibling:ke}),property:g({children:Oe,name:ot,parent:xe,document:function(e){return we(e).dom},isText:at,isComment:ve,isElement:it,isSpecial:function(e){e=ot(e);return z(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],e)},getText:xn,setText:Cn,isBoundary:function(e){return!!it(e)&&("body"===ot(e)||z(Vn,ot(e)))},isEmptyTag:function(e){return!!it(e)&&z(["br","img","hr","input"],ot(e))},isNonEditable:function(e){return it(e)&&"false"===Ct(e,"contenteditable")}}),eq:re,is:Je}}function Gn(e,t,n){return 0<n.length?function(n,r,e,t){e=r(n,e);return f(t,function(e,t){t=r(n,t);return kc(n,e,t)},e)}(e,t,n[0],n.slice(1)):H.none()}function Zn(n,e){return Gn(Oc,function(e,t){return n(t)},e)}function Xn(e){return ht(e,"table")}function Yn(a,u,c){function s(t){return function(e){return void 0!==c&&c(e)||re(e,t)}}return re(a,u)?H.some({boxes:H.some([a]),start:a,finish:u}):Xn(a).bind(function(i){return Xn(u).bind(function(r){if(re(i,r))return H.some({boxes:(t=a,n=u,o=qn(i),ln(o,t,n)),start:a,finish:u});if(oe(i,r)){n=0<(e=De(u,"td,th",s(i))).length?e[e.length-1]:u;return H.some({boxes:dn(i,a,i,u,r),start:a,finish:n})}if(oe(r,i)){var e=0<(e=De(a,"td,th",s(r))).length?e[e.length-1]:a;return H.some({boxes:dn(r,a,i,u,r),start:a,finish:e})}return function(t,e,n,r){void 0===r&&(r=v);var o=[e].concat(t.up().all(e)),e=[n].concat(t.up().all(n)),n=function(t){return l(t,r).fold(function(){return t},function(e){return t.slice(0,e+1)})},o=n(o),i=n(e),e=d(o,function(e){return b(i,y(t.eq,e))});return{firstpath:o,secondpath:i,shared:e}}(Oc,a,u,void 0).shared.bind(function(e){return yt(e,"table",c).bind(function(e){var t=De(u,"td,th",s(e)),n=0<t.length?t[t.length-1]:u,t=De(a,"td,th",s(e)),t=0<t.length?t[t.length-1]:a;return H.some({boxes:dn(e,a,i,u,r),start:t,finish:n})})});var t,n,o})})}function Jn(e,t){return 0<(t=Ne(e,t)).length?H.some(t):H.none()}function Qn(e,t,r){return bt(e,t).bind(function(n){return bt(e,r).bind(function(t){return Zn(Xn,[n,t]).map(function(e){return{first:n,last:t,table:e}})})})}function er(e,n,r,o,t){return i=t,d(e,function(e){return te(e,i)}).bind(function(e){return i=n,a=r,$t(t=e).bind(function(e){var n=qn(e),r=i,o=a;return Mn(n,t,re).bind(function(e){var t=0<r?e.row+e.rowspan-1:e.row,e=0<o?e.column+e.colspan-1:e.column;return Bn(n,t+r,e+o).map(function(e){return e.element})})}).bind(function(e){return n=o,ht(t=e,"table").bind(function(e){return bt(e,n).bind(function(e){return Yn(e,t).bind(function(t){return t.boxes.map(function(e){return{boxes:e,start:t.start,finish:t.finish}})})})});var t,n});var t,i,a});var i}function tr(o,e,t){return Qn(o,e,t).bind(function(i){function e(e){return re(o,e)}var t="thead,tfoot,tbody,table",n=ht(i.first,t,e),r=ht(i.last,t,e);return n.bind(function(o){return r.bind(function(e){return re(o,e)?(r=i.table,n=i.first,e=i.last,r=qn(r),sn(t=r,n,e).bind(function(e){return function(e,t){for(var n=!0,r=y(cn,t),o=t.startRow;o<=t.finishRow;o++)for(var i=t.startCol;i<=t.finishCol;i++)n=n&&Bn(e,o,i).exists(r);return n?H.some(t):H.none()}(t,e)})):H.none();var t,n,r})})})}function nr(e,t,n,r){return e.fold(t,n,r)}function rr(e,t){return Ye.fromDom(e.dom.cloneNode(t))}function or(e){return rr(e,!1)}function ir(e){return rr(e,!0)}function ar(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t}function ur(e,t){return e?H.some(t):H.none()}function cr(e){return Ec.get(e)}function sr(e){return Ec.getOuter(e)}function lr(n,r){void 0===r&&(r=k);var e=n.grid,t=w(e.columns,s),o=w(e.rows,s);return U(t,function(t){return Ic(function(){return x(o,function(e){return Bn(n,e,t).filter(function(e){return e.column===t}).toArray()})},function(e){return 1===e.colspan&&r(e.element)},function(){return Bn(n,0,t)})})}function fr(n){var e=n.grid,t=w(e.rows,s),r=w(e.columns,s);return U(t,function(t){return Ic(function(){return x(r,function(e){return Bn(n,t,e).filter(function(e){return e.row===t}).fold(g([]),function(e){return[e]})})},function(e){return 1===e.rowspan},function(){return Bn(n,t,0)})})}function dr(t,n){return function(e){return"rtl"===Bc(e)?n:t}}function mr(e){return Mc.get(e)}function gr(e){return Mc.getOuter(e)}function pr(e,t){return void 0!==e?e:void 0!==t?t:0}function hr(e){var t=(i=e.dom.ownerDocument).body,n=i.defaultView,r=i.documentElement;if(t===e.dom)return jc(t.offsetLeft,t.offsetTop);var o=pr(null==n?void 0:n.pageYOffset,r.scrollTop),i=pr(null==n?void 0:n.pageXOffset,r.scrollLeft),n=pr(r.clientTop,t.clientTop),t=pr(r.clientLeft,t.clientLeft);return Fc(e).translate(i-t,o-n)}function vr(e,t){return{row:e,y:t}}function br(e,t){return{col:e,x:t}}function yr(e){return hr(e).left+sr(e)}function wr(e){return hr(e).left}function xr(e,t){return br(e,wr(t))}function Sr(e,t){return br(e,yr(t))}function Cr(e){return hr(e).top}function kr(e,t){return vr(e,Cr(t))}function Or(e,t){return vr(e,Cr(t)+gr(t))}function Tr(n,t,r){if(0===r.length)return[];var e=U(r.slice(1),function(e,t){return e.map(function(e){return n(t,e)})}),o=r[r.length-1].map(function(e){return t(r.length-1,e)});return e.concat([o])}function Ar(){var e=Xe().browser;return e.isIE()||e.isEdge()}function Rr(e,t,n){return t=Nt(e,t),n=n,t=parseFloat(t),isNaN(t)?n:t}function Dr(e){return Ar()?(n=(t=e).dom.getBoundingClientRect().width,"border-box"===Nt(t,"box-sizing")?n:n-Rr(t,"padding-left",0)-Rr(t,"padding-right",0)-(Rr(t,"border-left-width",0)+Rr(t,"border-right-width",0))):Rr(e,"width",cr(e));var t,n}function _r(e,t){Dt(e,"width",t+"px")}function Nr(e,t){Dt(e,"width",t+"%")}function Pr(e,t){Dt(e,"height",t+"px")}function Er(e){var r,t,n,o,i,a,u,c=Pt(r=e,"height").getOrThunk(function(){return e=r,(Ar()?(n=(t=e).dom.getBoundingClientRect().height,"border-box"===Nt(t,"box-sizing")?n:n-Rr(t,"padding-top",0)-Rr(t,"padding-bottom",0)-(Rr(t,"border-top-width",0)+Rr(t,"border-bottom-width",0))):Rr(e,"height",mr(e)))+"px";var e,t,n});return c?(t=c,n=e,o=mr,i=Pr,c=parseInt(t,10),Z(t,"%")&&"table"!==ot(n)?(a=c,u=o,o=i,n=$t(i=n).map(function(e){e=u(e);return Math.floor(a/100*e)}).getOr(a),o(i,n),n):c):mr(e)}function Ir(e){return Pt(e,"width").fold(function(){return H.from(Ct(e,"width"))},function(e){return H.some(e)})}function Br(e,t){return e/t.pixelWidth()*100}function Mr(t,n){return Ir(t).fold(function(){var e=cr(t);return Br(e,n)},function(r){return function(e,t){var n=Hc.exec(r);if(null!==n)return parseFloat(n[1]);e=Dr(e);return Br(e,t)}(t,n)})}function Lr(t,n){return Ir(t).fold(function(){return Dr(t)},function(e){return function(e,t,n){var r=Vc.exec(t);if(null!==r)return parseInt(r[1],10);t=Hc.exec(t);return null===t?Dr(e):parseFloat(t[1])/100*n.pixelWidth()}(t,e,n)})}function jr(e){return Er(e=e)/Bt(e,"rowspan")}function Fr(e,t,n){Dt(e,"width",t+n)}function zr(e){return t=e,n=cr,e=H.from(t.dom.offsetParent).map(Ye.fromDom).getOr(Re(ye(t))),n(t)/n(e)*100+"%";var t,n}function Ur(e,t,n){return Pt(e,t).fold(function(){return n(e)+"px"},function(e){return e})}function qr(e,t){return Ur(e,"width",function(e){return Zc(e)?cr(e):Lr(e,t)})}function $r(e){return Ur(e,"height",jr)}function Wr(e,t){return Pt(e,t).isSome()}function Hr(e,t,n,r,o,i){return e.filter(r).fold(function(){return i(function(t,n){if(n<0||n>=t.length-1)return H.none();var e=t[n].fold(function(){var e=(e=t.slice(0,n),(e=P.call(e,0)).reverse(),e);return h(e,function(e,t){return e.map(function(e){return{value:e,delta:t+1}})})},function(e){return H.some({value:e,delta:0})}),r=t[n+1].fold(function(){var e=t.slice(n+1);return h(e,function(e,t){return e.map(function(e){return{value:e,delta:t+1}})})},function(e){return H.some({value:e,delta:1})});return e.bind(function(n){return r.map(function(e){var t=e.delta+n.delta;return Math.abs(e.value-n.value)/t})})}(n,t))},function(e){return o(e)})}function Vr(e,t,r,o,i){var a=lr(e,function(e){return Wr(e,"width")}),e=zn(e)?U(Fn(e),function(e){return H.from(e.element)}):a,u=[H.some(qc.edge(t))].concat(U(qc.positions(a,t),function(e){return e.map(function(e){return e.x})})),c=p(Mt);return U(e,function(e,n){return Hr(e,n,u,c,function(e){if(!Zc(t=e)||Wr(t,"width"))return r(e,i);var t,e=null!=(e=a[n])?s(e):H.none();return Hr(e,n,u,c,function(e){return o(H.some(cr(e)))},o)},o)})}function Kr(e){return e.map(function(e){return e+"px"}).getOr("")}function Gr(e,t,n){return Vr(e,t,Lr,function(e){return e.getOrThunk(n.minCellWidth)},n)}function Zr(e,t,n,r,o){var e=fr(e),i=[H.some(n.edge(t))].concat(U(n.positions(e,t),function(e){return e.map(function(e){return e.y})}));return U(e,function(e,t){return Hr(e,t,i,p(Lt),r,o)})}function Xr(e){var t=e;return{get:function(){return t},set:function(e){t=e}}}function Yr(e,r){var n=Xr(parseFloat(e)),o=Xr(cr(r));return{width:n.get,pixelWidth:o.get,getWidths:function(e,t){return Vr(e,r,Mr,function(e){return e.fold(function(){return n.minCellWidth()},function(e){return e/n.pixelWidth()*100})},n=t);var n},getCellDelta:function(e){return e/o.get()*100},singleColumnWidth:function(e,t){return[100-e]},minCellWidth:function(){return An()/o.get()*100},setElementWidth:Nr,adjustTableWidth:function(e){var t=n.get(),t=t+e/100*t;Nr(r,t),n.set(t),o.set(cr(r))},isRelative:!0,label:"percent"}}function Jr(e,n){var t=Xr(e),r=t.get;return{width:r,pixelWidth:r,getWidths:function(e,t){return Gr(e,n,t)},getCellDelta:s,singleColumnWidth:function(e,t){return[Math.max(An(),e+t)-e]},minCellWidth:An,setElementWidth:_r,adjustTableWidth:function(e){e=r()+e;_r(n,e),t.set(e)},isRelative:!1,label:"pixel"}}function Qr(r){return Ir(r).fold(function(){return n=r,t=g(0),{width:e,pixelWidth:e,getWidths:function(e,t){return Gr(e,n,t)},getCellDelta:t,singleColumnWidth:g([0]),minCellWidth:t,setElementWidth:F,adjustTableWidth:F,isRelative:!0,label:"none"};function e(){return cr(n)}var n,t},function(e){return function(e,t){var n=Kc().exec(t);if(null!==n)return Yr(n[1],e);t=Gc().exec(t);if(null!==t){var r=parseInt(t[1],10);return Jr(r,e)}r=cr(e);return Jr(r,e)}(r,e)})}function eo(e,t){function n(e){return te(e.element,t)}var o,i,a,u,c,s,l,r=ir(e),f=Kt(r),d=Qr(e),m=In(f),g=(o=n,h=m.grid.columns,i=m.grid.rows,a=h,c=u=0,s=[],l=[],ie(m.access,function(e){var t,n,r;s.push(e),o(e)&&(l.push(e),n=(t=e.row)+e.rowspan-1,e=(r=e.column)+e.colspan-1,t<i?i=t:u<n&&(u=n),r<a?a=r:c<e&&(c=e))}),{minRow:i,minCol:a,maxRow:u,maxCol:c,allCells:s,selectedCells:l}),p="th:not("+t+"),td:not("+t+")",h=Dn(r,"th,td",function(e){return te(e,p)});return q(h,Wn),function(e,t,n,r){for(var o,i,a,u=t.grid.columns,c=t.grid.rows,s=0;s<c;s++)for(var l=!1,f=0;f<u;f++)s<n.minRow||s>n.maxRow||f<n.minCol||f>n.maxCol||(Bn(t,s,f).filter(r).isNone()?(o=l,i=e[s].element,a=Ye.fromTag("td"),$n(a,Ye.fromTag("br")),(o?$n:pn)(i,a)):l=!0)}(f,m,g,n),function(e,t,n,r){ie(n.columns,function(e){(e.column<t.minCol||e.column>t.maxCol)&&Wn(e.element)});n=$(Ft(e,"tr"),function(e){return 0===e.dom.childElementCount});q(n,Wn),t.minCol!==t.maxCol&&t.minRow!==t.maxRow||q(Ft(e,"th,td"),function(e){Ot(e,"rowspan"),Ot(e,"colspan")}),Ot(e,Pn),Ot(e,"data-snooker-col-series"),Qr(e).adjustTableWidth(r)}(r,g,m,function(e,t,n,r){if(0===r.minCol&&t.grid.columns===r.maxCol+1)return 0;t=Gr(t,e,n),e=W(t,function(e,t){return e+t},0),e=W(t.slice(r.minCol,r.maxCol+1),function(e,t){return e+t},0)/e*n.pixelWidth()-n.pixelWidth();return n.getCellDelta(e)}(e,En(e),d,g)),r}function to(e){return"img"===ot(e)?1:Sn(e).fold(function(){return Oe(e).length},function(e){return e.length})}function no(e){return Sn(e).filter(function(e){return 0!==e.trim().length||-1<e.indexOf(" ")}).isSome()||z(Jc,ot(e))}function ro(e){return r=no,(o=function(e){for(var t=0;t<e.childNodes.length;t++){var n=Ye.fromDom(e.childNodes[t]);if(r(n))return H.some(n);n=o(e.childNodes[t]);if(n.isSome())return n}return H.none()})(e.dom);var r,o}function oo(e){return Qc(e,no)}function io(){var e=Ye.fromTag("td");return $n(e,Ye.fromTag("br")),e}function ao(){return Ye.fromTag("col")}function uo(){return Ye.fromTag("colgroup")}function co(e,t,n){var r,o=(e=r=e,t=Ye.fromTag(t=t),e=Tt(e),St(t,e),t,r=Oe(ir(r)),bn(t,r),t);return ie(n,function(e,t){null===e?Ot(o,t):xt(o,t,e)}),o}function so(e){return e}function lo(e){return function(){return Ye.fromTag("tr",e.dom)}}function fo(c,e,s){function l(e,t){var n=e.element.dom,r=t.dom;At(n)&&At(r)&&(r.style.cssText=n.style.cssText),Et(t,"height"),1!==e.colspan&&Et(t,"width")}return{col:function(e){var t=ye(e.element),t=Ye.fromTag(ot(e.element),t.dom);return l(e,t),c(e.element,t),t},colgroup:uo,row:lo(e),cell:function(e){var n,r,o,i,a,t=ye(e.element),u=Ye.fromTag(ot(e.element),t.dom),t=s.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),t=0<t.length?(n=e.element,r=u,o=t,ro(n).map(function(e){var t=o.join(","),t=De(e,t,function(e){return re(e,n)});return f(t,function(e,t){t=or(t);return Ot(t,"contenteditable"),$n(e,t),t},r)}).getOr(r)):u;return $n(t,Ye.fromTag("br")),l(e,u),i=e.element,a=u,ie(es,function(t,n){return kt(i,n).filter(function(e){return z(t,e)}).each(function(e){return xt(a,n,e)})}),c(e.element,u),u},replace:co,gap:io}}function mo(e){return{col:ao,colgroup:uo,row:lo(e),cell:io,replace:so,gap:io}}function go(e){return U(e,Ye.fromDom)}function po(e){return e.nodeName.toLowerCase()}function ho(e){return Ye.fromDom(e.getBody())}function vo(e){return e.getBoundingClientRect().width}function bo(e){return e.getBoundingClientRect().height}function yo(t){return function(e){return re(e,ho(t))}}function wo(e){return/^\d+(\.\d+)?$/.test(e)?e+"px":e}function xo(e){function t(e){return Ot(e,"data-mce-style")}Ot(e,"data-mce-style"),q(Ut(e),t),q(qt(e),t)}function So(e,t){return t=e.dom.getStyle(t,"width")||e.dom.getAttrib(t,"width"),H.from(t).filter(X)}function Co(e){return/^(\d+(\.\d+)?)%$/.test(e)}function ko(e){return Ye.fromDom(e.selection.getStart())}function Oo(e){return nr(e.get(),g([]),s,t)}function To(e){return{element:e,mergable:H.none(),unmergable:H.none(),selection:[e]}}function Ao(e,t,n){return{element:n,mergable:(o=t,i=ts,nr(e.get(),H.none,function(t){return t.length<=1?H.none():tr(o,i.firstSelectedSelector,i.lastSelectedSelector).map(function(e){return{bounds:e,cells:t}})},H.none)),unmergable:(r=function(e,t){return kt(e,t).exists(function(e){return 1<parseInt(e,10)})},0<(t=Oo(e)).length&&S(t,function(e){return r(e,"rowspan")||r(e,"colspan")})?H.some(t):H.none()),selection:Oo(e)};var r,o,i}function Ro(e,t,n){for(var r=0,o=e;o<t;o++)r+=void 0!==n[o]?n[o]:0;return r}function Do(e,t,n){var r,o,i,t=(r=t,zn(t=e)?(i=r,e=Fn(t),U(e,function(e,t){return{element:e.element,width:i[t],colspan:e.colspan}})):(o=r,t=jn(t),U(t,function(e){var t=Ro(e.column,e.column+e.colspan,o);return{element:e.element,width:t,colspan:e.colspan}})));q(t,function(e){n.setElementWidth(e.element,e.width)})}function _o(e,t,n,r,o){var i,a,u,c,s=En(e),l=o.getCellDelta(t),f=o.getWidths(s,o),e=n===s.grid.columns-1,t=r.clampTableDelta(f,n,l,o.minCellWidth(),e),l=(l=n,i=t,a=o,u=r,c=(n=f).slice(0),l=l,n=0===(n=n).length?ns.none():1===n.length?ns.only(0):0===l?ns.left(0,1):l===n.length-1?ns.right(l-1,l):0<l&&l<n.length-1?ns.middle(l-1,l,l+1):ns.none(),l=g(U(c,g(0))),n.fold(l,function(e){return a.singleColumnWidth(c[e],i)},function(e,t){return u.calcLeftEdgeDeltas(c,e,t,i,a.minCellWidth(),a.isRelative)},function(e,t,n){return u.calcMiddleDeltas(c,e,t,n,i,a.minCellWidth(),a.isRelative)},function(e,t){return u.calcRightEdgeDeltas(c,e,t,i,a.minCellWidth(),a.isRelative)})),l=U(l,function(e,t){return e+f[t]});Do(s,l,o),r.resizeTable(o.adjustTableWidth,t,e)}function No(e){return U(e,g(0))}function Po(e,t,n,r,o){return o(e.slice(0,t)).concat(r).concat(o(e.slice(n)))}function Eo(){function a(e,n,t,r){var o=(100+t)/100,i=Math.max(r,(e[n]+t)/o);return U(e,function(e,t){return(t===n?i:e/o)-e})}function u(e,t,n,r,o,i){return i?a(e,t,r,o):(n=n,o=rs(e=e,t=t,r,o),Po(e,t,n+1,[o,0],No))}return{resizeTable:function(e,t){return e(t)},clampTableDelta:rs,calcLeftEdgeDeltas:u,calcMiddleDeltas:function(e,t,n,r,o,i,a){return u(e,n,r,o,i,a)},calcRightEdgeDeltas:function(e,t,n,r,o,i){if(i)return a(e,n,r,o);o=rs(e,n,r,o);return No(e.slice(0,n)).concat([o])},calcRedestributedWidths:function(e,t,n,r){if(r){var o=(t+n)/t,t=U(e,function(e){return e/o});return{delta:100*o-100,newSizes:t}}return{delta:n,newSizes:e}}}}function Io(){function a(e,t,n,r,o){return o=os(e,0<=r?n:t,r,o),Po(e,t,n+1,[o,-o],No)}return{resizeTable:function(e,t,n){n&&e(t)},clampTableDelta:function(e,t,n,r,o){if(o){if(0<=n)return n;o=W(e,function(e,t){return e+t-r},0);return Math.max(-o,n)}return rs(e,t,n,r)},calcLeftEdgeDeltas:a,calcMiddleDeltas:function(e,t,n,r,o,i){return a(e,n,r,o,i)},calcRightEdgeDeltas:function(e,t,n,r,o,i){if(i)return No(e);r/=e.length;return U(e,g(r))},calcRedestributedWidths:function(e,t,n,r){return{delta:0,newSizes:e}}}}function Bo(e,t){var n=H.from(e.dom.documentElement).map(Ye.fromDom).getOr(e);return{parent:g(n),view:g(e),origin:g(jc(0,0)),isResizable:t}}function Mo(e,t,n){var r=n.substring(0,n.length-e.length),e=parseFloat(r);return r===e.toString()?t(e):is.invalid(n)}function Lo(e,t,n){var r,o,i,a=as.from(n),a=S(e,function(e){return"0px"===e})?(r=e.length,n=a.fold(function(){return g("")},function(e){return g(e/r+"px")},function(){return g(100/r+"%")}),w(r,n)):(o=e,i=t,a.fold(function(){return o},function(e){return n=(t=e)/i,U(o,function(e){return as.from(e).fold(function(){return e},function(e){return e*n+"px"},function(e){return e/100*t+"px"})});var t,n},function(e){return t=i,U(o,function(e){return as.from(e).fold(function(){return e},function(e){return e/t*100+"%"},function(e){return e+"%"})});var t}));return us(a)}function jo(e,t){return 0===e.length?t:f(e,function(e,t){return as.from(t).fold(g(0),s,s)+e},0)}function Fo(e){return cs(e).fold(g("px"),g("px"),g("%"))}function zo(c,e,t,s){var l=En(c),a=l.all,f=jn(l),d=Fn(l);e.each(function(e){var n,r,o,i,t=Fo(e),a=cr(c),u=Vr(l,c,qr,Kr,s),a=Lo(u,a,e);zn(l)?(o=a,i=t,q(d,function(e,t){t=jo([o[t]],An());Dt(e.element,"width",t+i)})):(n=a,r=t,q(f,function(e){var t=n.slice(e.column,e.colspan+e.column),t=jo(t,An());Dt(e.element,"width",t+r)})),Dt(c,"width",e)}),t.each(function(e){var t=Fo(e),n=mr(c),r=Zr(l,c,zc,$r,Kr),o=Lo(r,n,e),n=a,i=t;q(f,function(e){var t=o.slice(e.row,e.rowspan+e.row),t=jo(t,Rn());Dt(e.element,"height",t+i)}),q(n,function(e,t){Dt(e.element,"height",o[t])}),Dt(c,"height",e)})}function Uo(e){return Ir(e).exists(function(e){return Hc.test(e)})}function qo(e){return Ir(e).exists(function(e){return Vc.test(e)})}function $o(e){return Ir(e).isNone()}function Wo(e){return En(e).grid}function Ho(t){var o=[];return{bind:function(e){if(void 0===e)throw new Error("Event bind error: undefined handler");o.push(e)},unbind:function(t){o=$(o,function(e){return e!==t})},trigger:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r={};q(t,function(e,t){r[e]=n[t]}),q(o,function(e){e(r)})}}}function Vo(e){return{registry:ae(e,function(e){return{bind:e.bind,unbind:e.unbind}}),trigger:ae(e,function(e){return e.trigger})}}function Ko(e){return e.slice(0).sort()}function Go(e,o,i){if(0===o.length)throw new Error("You must specify at least one required field.");var n;return function(e){if(!R(e))throw new Error("The required fields must be an array. Was: "+e+".");q(e,function(e){if(!T(e))throw new Error("The value "+e+" in the required fields was not a string.")})}(o),n=Ko(o),d(n,function(e,t){return t<n.length-1&&e===n[t+1]}).each(function(e){throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+n.join(", ")+"].")}),function(t){var n=Qe(t);S(o,function(e){return z(n,e)})||function(e){throw new Error("All required keys ("+Ko(o).join(", ")+") were not specified. Specified keys were: "+Ko(e).join(", ")+".")}(n),e(o,n);var r=$(o,function(e){return!i.validate(t[e],e)});return 0<r.length&&function(e){throw new Error("All values need to be of type: "+e+". Keys ("+Ko(r).join(", ")+") were not.")}(i.label),t}}function Zo(t,e){var n=$(e,function(e){return!z(t,e)});0<n.length&&function(){throw new Error("Unsupported keys for object: "+Ko(n).join(", "))}()}function Xo(){var e,o,i,t=(e=Vo({move:Ho(["info"])}),{onEvent:F,reset:F,events:e.registry}),n=(o=H.none(),{onEvent:function(e,r){r.extract(e).each(function(e){var t=r,n=e,e=o.map(function(e){return t.compare(e,n)});o=H.some(n),e.each(function(e){i.trigger.move(e)})})},reset:function(){o=H.none()},events:(i=Vo({move:Ho(["info"])})).registry}),r=t;return{on:function(){r.reset(),r=n},off:function(){r.reset(),r=t},isOn:function(){return r===n},onEvent:function(e,t){r.onEvent(e,t)},events:n.events}}function Yo(t,n,e){function r(){f.stop(),c.isOn()&&(c.off(),u.trigger.stop())}var o,i,a=!1,u=Vo({start:Ho([]),stop:Ho([])}),c=Xo(),s=(o=r,i=null,{cancel:function(){null!==i&&(clearTimeout(i),i=null)},throttle:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];null!==i&&clearTimeout(i),i=setTimeout(function(){o.apply(null,e),i=null},200)}});function l(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];a&&n.apply(null,e)}}c.events.move.bind(function(e){n.mutate(t,e.info)});var f=n.sink(fs({forceDrop:r,drop:l(r),move:l(function(e){s.cancel(),c.onEvent(e,n)}),delayDrop:l(s.throttle)}),e);return{element:f.element,go:function(e){f.start(e),c.on(),u.trigger.start()},on:function(){a=!0},off:function(){a=!1},destroy:function(){f.destroy()},events:u.registry}}function Jo(e){function t(){return e.stopPropagation()}function n(){return e.preventDefault()}var r,o,i=Ye.fromDom(function(e){if(lt()&&u(e.target)){var t=Ye.fromDom(e.target);if(it(t)&&u(t.dom.shadowRoot)&&e.composed&&e.composedPath){t=e.composedPath();if(t)return m(t)}}return H.from(e.target)}(e).getOr(e.target)),a=(r=n,o=t,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r(o.apply(null,e))});return{target:i,x:e.clientX,y:e.clientY,stop:t,prevent:n,kill:a,raw:e}}function Qo(e,t,n){return r=t,t=!1,o=ms,i=n=n,n=function(e){o(e)&&i(Jo(e))},(e=e).dom.addEventListener(r,n,t),{unbind:y(ds,e,r,n,t)};var r,o,i}function ei(e){return void 0!==e.dom.classList}function ti(e,t){return t=t,t=function(e,t){t=Ct(e,t);return void 0===t||""===t?[]:t.split(" ")}(e=e,"class").concat([t]),xt(e,"class",t.join(" ")),1}function ni(e,t){ei(e)?e.dom.classList.add(t):ti(e,t)}function ri(e,t){return ei(e)&&e.dom.classList.contains(t)}function oi(e){return"true"===Ct(e,"contenteditable")}function ii(e){e=Ne(e.parent(),"."+vs),q(e,Wn)}function ai(t,e,n){var r=t.origin();q(e,function(e){e.each(function(e){e=n(r,e);ni(e,vs),$n(t.parent(),e)})})}function ui(e,t,n,r,o){var i,a,u,c,s=hr(n),l=t.isResizable,f=0<(c=0<r.length?zc.positions(r,n):[]).length?(i=l,x(e.all,function(e,t){return i(e.element)?[t]:[]})):[],r=$(c,function(e,t){return b(f,function(e){return t===e})});c=t,r=r,a=s,u=sr(n),ai(c,r,function(e,t){var n,r,o,e=(n=t.row,r=a.left-e.left,o=t.y-e.top,t=u,e=Ye.fromTag("div"),_t(e,{position:"absolute",left:r+"px",top:o-3.5+"px",height:"7px",width:t+"px"}),St(e,{"data-row":n,role:"presentation"}),e);return ni(e,bs),e});var d,m,g,p,h,v=0<(o=0<o.length?qc.positions(o,n):[]).length?(m=l,g=[],w((d=e).grid.columns,function(e){Un(d,e).map(function(e){return e.element}).forall(m)&&g.push(e)}),$(g,function(t){var e=Ln(d,function(e){return e.column===t});return S(e,function(e){return m(e.element)})})):[],o=$(o,function(e,t){return b(v,function(e){return t===e})});t=t,o=o,p=s,h=gr(n),ai(t,o,function(e,t){var n,r,o,e=(n=t.col,r=t.x-e.left,o=p.top-e.top,t=h,e=Ye.fromTag("div"),_t(e,{position:"absolute",left:r-3.5+"px",top:o+"px",height:t+"px",width:"7px"}),St(e,{"data-column":n,role:"presentation"}),e);return ni(e,ys),e})}function ci(e,t){var n,r,o;ii(e),e.isResizable(t)&&(n=En(t),r=fr(n),o=lr(n),ui(n,e,t,r,o))}function si(e,t){e=Ne(e.parent(),"."+vs),q(e,t)}function li(e){si(e,function(e){Dt(e,"display","none")})}function fi(e){si(e,function(e){Dt(e,"display","block")})}function di(o){function e(e,t){return H.from(Ct(e,t))}var t,n,r,i,a,u=(r=Vo({drag:Ho(["xDelta","yDelta","target"])}),i=H.none(),(a={mutate:function(e,t){n.trigger.drag(e,t)},events:(n=Vo({drag:Ho(["xDelta","yDelta"])})).registry}).events.drag.bind(function(t){i.each(function(e){r.trigger.drag(t.xDelta,t.yDelta,e)})}),{assign:function(e){i=H.some(e)},get:function(){return i},mutate:a.mutate,events:r.registry}),c=(a=void 0!==(t=void 0===(t={})?{}:t).mode?t.mode:hs,Yo(u,a,t)),s=H.none();function l(e,t){return jt(e,t)-It(e,"data-initial-"+t,0)}function f(e,t){p.trigger.startAdjust(),u.assign(e),xt(e,"data-initial-"+t,jt(e,t)),ni(e,ws),Dt(e,"opacity","0.2"),c.go(o.parent())}function d(e){return re(e,o.view())}u.events.drag.bind(function(n){e(n.target,"data-row").each(function(e){var t=jt(n.target,"top");Dt(n.target,"top",t+n.yDelta+"px")}),e(n.target,"data-column").each(function(e){var t=jt(n.target,"left");Dt(n.target,"left",t+n.xDelta+"px")})}),c.events.stop.bind(function(){u.get().each(function(r){s.each(function(n){e(r,"data-row").each(function(e){var t=l(r,"top");Ot(r,"data-initial-top"),p.trigger.adjustHeight(n,t,parseInt(e,10))}),e(r,"data-column").each(function(e){var t=l(r,"left");Ot(r,"data-initial-left"),p.trigger.adjustWidth(n,t,parseInt(e,10))}),ci(o,n)})})});var m=Qo(o.parent(),"mousedown",function(e){var t=e.target;ri(t,bs)&&f(e.target,"top"),t=e.target,ri(t,ys)&&f(e.target,"left")}),g=Qo(o.view(),"mouseover",function(e){var t;t=e.target,yt(t,"table",d).filter(function(e){return yt(e,"[contenteditable]",d).exists(oi)}).fold(function(){dt(e.target)&&ii(o)},function(e){s=H.some(e),ci(o,e)})}),p=Vo({adjustHeight:Ho(["table","delta","row"]),adjustWidth:Ho(["table","delta","column"]),startAdjust:Ho([])});return{destroy:function(){m.unbind(),g.unbind(),c.destroy(),ii(o)},refresh:function(e){ci(o,e)},on:c.on,off:c.off,hideBars:y(li,o),showBars:y(fi,o),events:p.registry}}function mi(e,o,i){var s=zc,a=qc,e=di(e),l=Vo({beforeResize:Ho(["table","type"]),afterResize:Ho(["table","type"]),startDrag:Ho([])});return e.events.adjustHeight.bind(function(e){var t=e.table;l.trigger.beforeResize(t,"row");var n,r,o,i,a,u,c=s.delta(e.delta,t);n=t,r=c,o=e.row,i=s,c=En(n),e=Zr(c,n,i,jr,function(e){return e.getOrThunk(Rn)}),i=U(e,function(e,t){return o===t?Math.max(r+e,Rn()):e}),a=i,e=jn(c),e=U(e,function(e){var t=Ro(e.row,e.row+e.rowspan,a);return{element:e.element,height:t,rowspan:e.rowspan}}),u=i,c=U(c.all,function(e,t){return{element:e.element,height:u[t]}}),q(c,function(e){Pr(e.element,e.height)}),q(e,function(e){Pr(e.element,e.height)}),i=f(i,function(e,t){return e+t},0),Pr(n,i),l.trigger.afterResize(t,"row")}),e.events.startAdjust.bind(function(e){l.trigger.startDrag()}),e.events.adjustWidth.bind(function(e){var t=e.table;l.trigger.beforeResize(t,"col");var n=a.delta(e.delta,t),r=i(t);_o(t,n,e.column,o,r),l.trigger.afterResize(t,"col")}),{on:e.on,off:e.off,hideBars:e.hideBars,showBars:e.showBars,destroy:e.destroy,events:l.registry}}function gi(e,t){return e.fire("newrow",{node:t})}function pi(e,t){return e.fire("newcell",{node:t})}function hi(e,t,n){e.fire("TableModified",I(I({},n),{table:t}))}function vi(e){return e.getParam("table_sizing_mode","auto")}function bi(e){return e.getParam("table_responsive_width")}function yi(e){return e.getParam("table_default_attributes",ks,"object")}function wi(e){return e.getParam("table_default_styles",function(e){if(Ts(e)){var t=e.getBody().offsetWidth;return I(I({},Cs),{width:t+"px"})}return As(e)?ue(Cs,function(e,t){return"width"!==t}):Cs}(e),"object")}function xi(e){return e.getParam("table_cell_advtab",!0,"boolean")}function Si(e){return e.getParam("table_row_advtab",!0,"boolean")}function Ci(e){return e.getParam("table_advtab",!0,"boolean")}function ki(e){return e.getParam("table_style_by_css",!1,"boolean")}function Oi(e){return"relative"===vi(e)||!0===bi(e)}function Ti(e){return e=e.getParam("table_header_type","section","string"),z(["section","cells","sectionCells","auto"],e)?e:"section"}function Ai(e){var t=e.getParam("table_column_resizing",Os,"string");return d(["preservetable","resizetable"],function(e){return e===t}).getOr(Os)}function Ri(e){return"preservetable"===Ai(e)}function Di(e){return"resizetable"===Ai(e)}function _i(e){return e=e.getParam("table_clone_elements"),T(e)?H.some(e.split(/[ ,]/)):Array.isArray(e)?H.some(e):H.none()}function Ni(e,t){if(Oi(e)){var n=So(e,t.dom).filter(Co).getOrThunk(function(){return ss(t)});return Yc(n,t)}return Ts(e)?Xc(cr(t),t):Qr(t)}function Pi(e){Ot(e,"width")}function Ei(e,t){var n=Ni(e,t),t=zr(e=t);zo(e,H.some(t),H.none(),n),Pi(e)}function Ii(e,t){var n=Ni(e,t);e=n,t=cr(n=t)+"px",zo(n,H.some(t),H.none(),e),Pi(n)}function Bi(e){Et(e,"width");var t=0<(t=qt(e)).length?t:Ut(e);q(t,function(e){Et(e,"width"),Pi(e)}),Pi(e)}function Mi(e){return"false"!==Ct(e,"data-mce-resize")}function Li(u){function c(e){return"TABLE"===e.nodeName}function s(e){return Ni(u,e)}function l(){return(Ri(u)?Io:Eo)()}var f,d,i=H.none(),a=H.none(),m=H.none();return u.on("init",function(){var e,t,n,r,o=(e=Mi,(o=u).inline?(t=ho(o),r=Ye.fromTag("div"),_t(r,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),$n(Re(Ye.fromDom(document)),r),n=e,{parent:g(r),view:g(t),origin:g(jc(0,0)),isResizable:n}):Bo(Ye.fromDom(o.getDoc()),e));m=H.some(o),e=u.getParam("object_resizing",!0),(T(e)?"table"===e:e)&&u.getParam("table_resize_bars",!0,"boolean")&&(e=l(),(e=mi(o,e,s)).on(),e.events.startDrag.bind(function(e){i=H.some(u.selection.getRng())}),e.events.beforeResize.bind(function(e){var t,n=e.table.dom,r=u,o=vo(t=n),n=bo(n),e=Rs+e.type;r.fire("ObjectResizeStart",{target:t,width:o,height:n,origin:e})}),e.events.afterResize.bind(function(e){var t,n,r=e.table,o=r.dom;xo(r),i.each(function(e){u.selection.setRng(e),u.focus()}),t=u,r=vo(n=o),o=bo(o),e=Rs+e.type,t.fire("ObjectResized",{target:n,width:r,height:o,origin:e}),u.undoManager.add()}),a=H.some(e))}),u.on("ObjectResizeStart",function(e){var t,n=e.target;c(n)&&(t=Ye.fromDom(n),q(u.dom.select(".mce-clonedresizable"),function(e){u.dom.addClass(e,"mce-"+Ai(u)+"-columns")}),!qo(t)&&Ts(u)?Ii(u,t):!Uo(t)&&Oi(u)&&Ei(u,t),$o(t)&&G(e.origin,Rs)&&Ei(u,t),f=e.width,d=As(u)?"":So(u,n).getOr(""))}),u.on("ObjectResized",function(e){var t,n,r,o,i,a=e.target;c(a)&&(t=Ye.fromDom(a),i=e.origin,G(i,"corner-")&&(n=t,r=i,a=e.width,i=Z(r,"e"),""===d&&Ei(u,n),a!==f&&""!==d?(Dt(n,"width",d),e=l(),r=s(n),i=Ri(u)||i?Wo(n).columns-1:0,_o(n,a-f,i,e,r)):Co(d)&&(o=parseFloat(d.replace("%","")),Dt(n,"width",a*o/f+"%")),/^(\d+(\.\d+)?)px$/.test(d)&&(n=En(o=n),zn(n)||q(Ut(o),function(e){var t=Nt(e,"width");Dt(e,"width",t),Ot(e,"width")}))),xo(t),hi(u,t.dom,xs))}),u.on("SwitchMode",function(){a.each(function(e){u.mode.isReadOnly()?e.hideBars():e.showBars()})}),{lazyResize:function(){return a},lazyWire:function(){return m.getOr(Bo(Ye.fromDom(u.getBody()),Mi))},destroy:function(){a.each(function(e){e.destroy()}),m.each(function(e){u.inline&&Wn(e.parent())})}}}function ji(e,t){return{element:e,offset:t}}function Fi(e,t){return(e.property().isText(t)?e.property().getText(t):e.property().children(t)).length}function zi(n,r){1===Bt(n,"colspan")&&Ir(n).bind(function(e){return e=e,r=["fixed","relative","empty"],H.from(Wc.exec(e)).bind(function(e){var t=Number(e[1]),e=e[2],n=e;return b(r,function(e){return b($c[e],function(e){return n===e})})?H.some({value:t,unit:e}):H.none()});var r}).each(function(e){var t=e.value/2;Fr(n,t,e.unit),Fr(r,t,e.unit)})}function Ui(e,t,n,r){n===r?Ot(e,t):xt(e,t,n)}function qi(e,t,n){c(_e(e,t)).fold(function(){return pn(e,n)},function(e){return gn(e,n)})}function $i(i,e){function n(e,t){var n,r,o=(o=vt(n=i,r=t).getOrThunk(function(){var e=Ye.fromTag(r,ye(n).dom);return"thead"===r?qi(n,"caption,colgroup",e):"colgroup"===r?qi(n,"caption",e):$n(n,e),e}),yn(o),o),e=("colgroup"===t?function(e){return x(e,function(e){return U(e.cells,function(e){return Ui(e.element,"span",e.colspan,1),e.element})})}:function(e){return U(e,function(e){e.isNew&&a.push(e.element);var t=e.element;return yn(t),q(e.cells,function(e){e.isNew&&u.push(e.element),Ui(e.element,"colspan",e.colspan,1),Ui(e.element,"rowspan",e.rowspan,1),$n(t,e.element)}),t})})(e);bn(o,e)}function t(e,t){0<e.length?n(e,t):vt(i,t).each(Wn)}var a=[],u=[],r=[],o=[],c=[],s=[];return q(e,function(e){switch(e.section){case"thead":r.push(e);break;case"tbody":o.push(e);break;case"tfoot":c.push(e);break;case"colgroup":s.push(e)}}),t(s,"colgroup"),t(r,"thead"),t(o,"tbody"),t(c,"tfoot"),{newRows:a,newCells:u}}function Wi(e,t){if(0===e.length)return 0;var n=e[0];return l(e,function(e){return!t(n.element,e.element)}).fold(function(){return e.length},function(e){return e})}function Hi(s,l){var f=U(s,function(e){return U(e.cells,v)});return U(s,function(e,c){return{details:x(e.cells,function(e,t){if(!1!==f[c][t])return[];var n,r,o,i,a,u,i=(o=t,i=l,u=(n=s)[r=c].cells.slice(o),u=Wi(u,i),a=o,r=U(n,function(e){return Jt(e,a)}).slice(r),{colspan:u,rowspan:Wi(r,i)});return function(e,t,n,r){for(var o=e;o<e+n;o++)for(var i=t;i<t+r;i++)f[o][i]=!0}(c,t,i.rowspan,i.colspan),[{element:e.element,rowspan:i.rowspan,colspan:i.colspan,isNew:e.isNew}]}),section:e.section}})}function Vi(e,t,n){var r,o=[];zn(e)&&(r=U(Fn(e),function(e){return ge(e.element,n,!1)}),o.push(pe(r,"colgroup")));for(var i=0;i<e.grid.rows;i++){for(var a=[],u=0;u<e.grid.columns;u++){var c=Bn(e,i,u).map(function(e){return ge(e.element,n,e.isLocked)}).getOrThunk(function(){return ge(t.gap(),!0,!1)});a.push(c)}var s=pe(a,e.all[i].section);o.push(s)}return o}function Ki(e,t){var n,e=Hi(e,re);return n=t,U(e,function(e){var t=(t=e.details,h(t,function(e){return xe(e.element).map(function(e){var t=xe(e).isNone();return ge(e,t,!1)})}).getOrThunk(function(){return ge(n.row(),!0,!1)}));return{element:t.element,cells:e.details,section:e.section,isNew:t.isNew}})}function Gi(e,t){return h(e.all,function(e){return d(e.cells,function(e){return re(t,e.element)})})}function Zi(t,e,n){return e=U(e.selection,function(e){return zt(e).bind(function(e){return Gi(t,e)}).filter(n)}),e=ar(e),ur(0<e.length,e)}function Xi(t,e){return zt(e.element).bind(function(e){return Gi(t,e)})}function Yi(e,t){return Zi(e,t,k).map(function(e){return{cells:e,generators:t.generators,clipboard:t.clipboard}})}function Ji(e,t){return Zi(e,t,k)}function Qi(e,t){return Zi(e,t,function(e){return!e.isLocked})}function ea(t,e){return S(e,function(e){return Gi(t,e).exists(function(e){return!e.isLocked})})}function ta(t,e){return e.mergable.filter(function(e){return ea(t,e.cells)})}function na(t,e){return e.unmergable.filter(function(e){return ea(t,e)})}function ra(e,t,n,r){for(var o=tn(e).rows,i=!0,a=0;a<o.length;a++)for(var u=0;u<en(o[0]);u++){var c=o[a],s=Jt(c,u),l=n(s.element,t);!0===l&&!1===i?Xt(c,u,ge(r(),!0,s.isLocked)):!0===l&&(i=!1)}return e}function oa(e,n,a,u){var t,r,c=tn(e).rows;return 0<n&&n<c.length&&(t=c[n-1].cells,r=a,t=W(t,function(e,t){return b(e,function(e){return r(e.element,t.element)})?e:e.concat([t])},[]),q(t,function(e){for(var o=H.none(),i=n;i<c.length;i++)for(var t=0;t<en(c[0]);t++)!function(t){var n=c[i],r=Jt(n,t);a(r.element,e.element)&&(o=o.isNone()?H.some(u()):o).each(function(e){Xt(n,t,ge(e,!0,r.isLocked))})}(t)})),e}function ia(e,t){return{rowDelta:0,colDelta:en(e[0])-en(t[0])}}function aa(e,t){return{rowDelta:e.length-t.length,colDelta:0}}function ua(e,t,n,r){var o="colgroup"===t.section?n.col:n.cell;return w(e,function(e){return ge(o(),!0,r(e))})}function ca(n,e,r,o){return n.concat(w(e,function(){var e=n[n.length-1],t=ua(e.cells.length,e,r,function(e){return nt(o,e.toString())});return Nn(e,t)}))}function sa(e,n,r,o){return U(e,function(e){var t=ua(n,e,r,v);return Gt(e,o,t)})}function la(e,t,n){var r=t.colDelta<0?sa:s,o=t.rowDelta<0?ca:s,i=rn(e),a=en(e[0]),i=b(i,function(e){return e===a-1}),e=r(e,Math.abs(t.colDelta),n,i?a-1:a),i=rn(e);return o(e,Math.abs(t.rowDelta),n,C(i,k))}function fa(t,n,e){return $(e,function(e){return e>=t.column&&e<=en(n[0])+t.column})}function da(e,n,r,o,i){var t,a,u,c=rn(n),s=(t=e,a=c,u=en(n[0]),e=w(u-t.column,function(e){return e+t.column}),u=d(e,function(t){return S(a,function(e){return e!==t})}).getOr(u-1),I(I({},t),{column:u})),l=fa(s,r,c);return function(e,t,n){if(e.row>=t.length||e.column>en(t[0]))return Ms.error("invalid start address out of table bounds, row: "+e.row+", column: "+e.column);var r=t.slice(e.row),t=r[0].cells.slice(e.column),e=en(n[0]),n=n.length;return Ms.value({rowDelta:r.length-n,colDelta:t.length-e})}(s,n,r).map(function(e){var t=I(I({},e),{colDelta:e.colDelta-l.length}),e=la(n,t,o),t=rn(e),t=fa(s,r,t);return function(e,t,n,r,o,i){for(var a,u,c,s=e.row,l=e.column,f=s+n.length,d=l+en(n[0])+i.length,m=C(i,k),g=s;g<f;g++)for(var p,h,v=0,b=l;b<d;b++)m[b]?v++:(p=b,u=void 0,u=y(o,Jt((a=t)[h=g],p).element),c=a[h],1<a.length&&1<en(c)&&(0<p&&u(Qt(c,p-1))||p<c.cells.length-1&&u(Qt(c,p+1))||0<h&&u(Qt(a[h-1],p))||h<a.length-1&&u(Qt(a[h+1],p)))&&ra(t,Qt(t[g],b),o,r.cell),h=b-l-v,h=(p=Jt(n[g-s],h)).element,h=r.replace(h),Xt(t[g],b,ge(h,!0,p.isLocked)));return t}(s,e,r,o,i,t)})}function ma(n,e,t,r,o){var i=n,a=o,u=r.cell;0<i&&i<e[0].cells.length&&q(e,function(e){var t=e.cells[i-1],n=e.cells[i];a(n.element,t.element)&&Xt(e,i,ge(u(),!0,n.isLocked))});var o=aa(t,e),c=la(t,o,r),o=aa(e,c),r=la(e,o,r);return U(r,function(e,t){return Gt(e,n,c[t].cells)})}function ga(e,t,n,r,o){oa(t,e,o,r.cell);var i,a,u=rn(t),c=ia(t,n),o=I(I({},c),{colDelta:c.colDelta-u.length}),c=la(t,o,r),o=(u=tn(c)).cols,u=u.rows,c=rn(c),t=ia(n,t),t=I(I({},t),{colDelta:t.colDelta+c.length}),n=(i=r,a=c,U(n,function(r){return W(a,function(e,t){var n=ua(1,r,i,k)[0];return Zt(e,t,n)},r)})),r=la(n,t,r);return o.concat(u.slice(0,e)).concat(r).concat(u.slice(e,u.length))}function pa(e,n,t,r,o){var i=(u=tn(e)).rows,a=u.cols,e=i.slice(0,n),u=i.slice(n),t=Yt(i[t],function(e,t){return 0<n&&n<i.length&&r(Qt(i[n-1],t),Qt(i[n],t))?Jt(i[n],t):ge(o(e.element,r),!0,e.isLocked)});return a.concat(e).concat([t]).concat(u)}function ha(e,r,o,i,a){return U(e,function(t){var n=0<r&&r<en(t)&&i(Qt(t,r-1),Qt(t,r)),e=function(e){if("colgroup"!==e&&n)return Jt(t,r);e=Jt(t,o);return ge(a(e.element,i),!0,!1)}(t.section);return Zt(t,r,e)})}function va(e,n,r,o){return U(e,function(e){return Yt(e,function(e){return t=e,b(n,function(e){return r(t.element,e.element)})?ge(o(e.element,r),!0,e.isLocked):e;var t})})}function ba(e,t,n,r){return void 0!==Qt(e[t],n)&&0<t&&r(Qt(e[t-1],n),Qt(e[t],n))}function ya(e,t,n){return 0<t&&n(Qt(e,t-1),Qt(e,t))}function wa(n,r,o,e){var t=tn(n).rows,t=x(t,function(e,t){return ba(n,t,r,o)||ya(e,r,o)?[]:[Jt(e,r)]});return va(n,t,o,e)}function xa(e,n,r,t){var o=tn(e).rows,i=o[n],a=x(i.cells,function(e,t){return ba(o,n,t,r)||ya(i,t,r)?[]:[e]});return va(e,a,r,t)}function Sa(e){return W(e,function(e,t){return b(e,function(e){return e.column===t.column})?e:e.concat([t])},[]).sort(function(e,t){return e.column-t.column})}function Ca(e){return{element:e,colspan:It(e,"colspan",1),rowspan:It(e,"rowspan",1)}}function ka(e){return kt(e,"scope").map(function(e){return e.substr(0,3)})}function Oa(e){return e=e,e=zs.property().name(e),z(Fs,e)}function Ta(e){return e=e,e=zs.property().name(e),z(["ol","ul"],e)}function Aa(e){function i(e){return"br"===ot(e)}function n(o){return oo(o).bind(function(n){var r=ke(n).map(function(e){return!!Oa(e)||(t=t=e,!!z(["br","img","hr","input"],zs.property().name(t))&&"img"!==ot(e));var t}).getOr(!1);return xe(n).map(function(e){return!0===r||"li"===ot(t=e)||pt(t,Ta).isSome()||i(n)||Oa(e)&&!re(o,e)?[]:[Ye.fromTag("br")];var t})}).getOr([])}var t=0===(t=x(e,function(e){var t=Oe(e);return S(t,function(e){return i(e)||at(e)&&0===xn(e).trim().length})?[]:t.concat(n(e))})).length?[Ye.fromTag("br")]:t;yn(e[0]),bn(e[0],t)}function Ra(e,t){return{grid:e,cursor:t}}function Da(e,t,n){var r=tn(e).rows;return Us(r,t,n).orThunk(function(){return Us(r,0,0)})}function _a(e,t,n){var r=tn(e).rows;return Ra(e,Us(r,t,n))}function Na(e){return W(e,function(e,t){return b(e,function(e){return e.row===t.row})?e:e.concat([t])},[]).sort(function(e,t){return e.row-t.row})}function Pa(e,t,n){var r,e=(r=n.section,Ht(e,function(){return r})),e=In(e);return Vi(e,t,!0)}function Ea(e,t){return 0===(t=$(e,t)).length?H.some("td"):t.length===e.length?H.some("th"):H.none()}function Ia(e,t){return b(t,function(e){return 0===e.column&&e.isLocked})}function Ba(t,e){return b(e,function(e){return e.column+e.colspan>=t.grid.columns&&e.isLocked})}function Ma(e,t){var n=lr(e),t=Sa(t);return W(t,function(e,t){return e+n[t.column].map(sr).getOr(0)},0)}function La(e,t){var o=En(e);return Ji(o,t).bind(function(e){var t=e[e.length-1],n=e[0].column,r=t.column+t.colspan,t=i(U(o.all,function(e){return $(e.cells,function(e){return e.column>=n&&e.column<r})}));return Ea(t,function(e){return"th"===ot(e.element)})}).getOr("")}function ja(e){return po(e.parentNode)}function Fa(e,t){var n="thead"===ja(t),t=!b(t.cells,function(e){return"th"!==po(e)});return n||t?H.some({thead:n,ths:t}):H.none()}function za(e,t){return"thead"===(n=Fa(0,t).fold(function(){return ja(t)},function(e){return"thead"}))?"header":"tfoot"===n?"footer":"body";var n}function Ua(t,e,n){var r,o,i=t.getParent(e,"table"),a=e.parentNode,u=po(a);n!==u&&((r=t.select(n,i)[0])||(r=t.create(n),o=i.firstChild,"thead"===n?c(_e(Ye.fromDom(i),"caption,colgroup")).fold(function(){return i.insertBefore(r,o)},function(e){return t.insertAfter(r,e.dom)}):i.appendChild(r)),"tbody"===n&&"thead"===u&&r.firstChild?r.insertBefore(e,r.firstChild):r.appendChild(e),a.hasChildNodes()||t.remove(a))}function qa(e,t,n,r){var o=e.dom,n=function(e,t,n){if(u(n)&&po(t)!==n){n=e.dom.rename(t,n);return pi(e,n),n}return t}(e,t,n);return D(r)||o.setAttrib(n,"scope",r),n}function $a(t,e,n,r){return q(e,function(e){return qa(t,e,n,r)}),0}function Wa(e,t,n){var r,o,i=e.dom;"header"===n?(r="auto"===(r=Ti(e))?(o=$t(Ye.fromDom(t.cells[0])).map(Wt).getOr([]),h(o,function(e){return Fa(0,e.dom)}).map(function(e){return e.thead&&e.ths?"sectionCells":e.thead?"section":"cells"}).getOr("section")):r,$a(e,t.cells,"section"===r?"td":"th","col"),Ua(i,t,"cells"===r?"tbody":"thead")):($a(e,t.cells,"td",null),Ua(i,t,"footer"===n?"tfoot":"tbody"))}function Ha(e,t){return ol(e).map(function(e){return Oo(t)}).getOr([])}function Va(e,n){var t=ol(e),r=t.bind(function(e){return $t(e)}).map(Wt),e=function(t,e){return $(e,function(e){return b(go(e.dom.cells),function(e){return"1"===Ct(e,n)||re(e,t)})})};return((t=t).isSome()&&r.isSome()?H.some(e(t.getOrDie(),r.getOrDie())):H.none()).getOr([])}function Ka(f,e,r){function t(e){return"table"===ot(ho(e))}function n(a,u,c,s,l){return function(e,t){xo(e);var n=s(),r=Ye.fromDom(f.getDoc()),o=fo(c,r,d),i=Ni(f,e),r=(Di(f)?Eo:Io)();return u(e)?a(n,e,t,o,i,r).bind(function(e){return q(e.newRows,function(e){gi(f,e.dom)}),q(e.newCells,function(e){pi(f,e.dom)}),e.cursor.map(function(e){var t=Ns(Ps,e),e=f.dom.createRng();return e.setStart(t.element.dom,t.offset),e.setEnd(t.element.dom,t.offset),{rng:e,effect:l}})}):H.none()}}function o(e,t){return le(e,"type").filter(function(e){return z(t,e)})}var d=_i(f),i=Di(f)?F:zi,a=n(Gs,function(e){return!1===t(f)||1<Wo(e).rows},F,e,Ss),u=n(Ks,function(e){return!1===t(f)||1<Wo(e).columns},F,e,Ss),c=n($s,k,F,e,Ss),s=n(Ws,k,F,e,Ss),l=n(Hs,k,i,e,Ss),m=n(Vs,k,i,e,Ss),g=n(Ys,k,F,e,Ss),p=n(Js,k,F,e,Ss),h=n(el,k,F,e,Ss),v=n(tl,k,F,e,Ss),b=n(nl,k,F,e,Ss),y=n(rl,k,F,e,Ss),i=n(Qs,k,F,e,Ss);return{deleteRow:a,deleteColumn:u,insertRowsBefore:c,insertRowsAfter:s,insertColumnsBefore:l,insertColumnsAfter:m,mergeCells:g,unmergeCells:p,pasteColsBefore:h,pasteColsAfter:v,pasteRowsBefore:b,pasteRowsAfter:y,pasteCells:i,setTableCellType:function(n,e){return o(e,["td","th"]).each(function(e){var t=U(Ha(ko(n),r),function(e){return e.dom});$a(n,t,e,null)})},setTableRowType:function(n,e){return o(e,["header","body","footer"]).each(function(t){U(Va(ko(n),ts.selected),function(e){return Wa(n,e.dom,t)})})},makeColumnsHeader:n(Zs,k,F,e,Ss),unmakeColumnsHeader:n(Xs,k,F,e,Ss),getTableRowType:function(e){var t=Va(ko(e),ts.selected);if(0<t.length){var n=U(t,function(e){return za(0,e.dom)}),e=z(n,"header"),t=z(n,"footer");if(e||t){n=z(n,"body");return!e||n||t?e||n||!t?"":"footer":"header"}return"body"}},getTableCellType:function(e){return Ea(Ha(ko(e),r),function(e){return"th"===ot(e)}).getOr("")},getTableColType:La}}function Ga(e,t,n,r){return w(e,function(e){return function(e,t,n,r){for(var o=Ye.fromTag("tr"),i=0;i<e;i++){var a=Ye.fromTag(r<t||i<n?"th":"td");i<n&&xt(a,"scope","row"),r<t&&xt(a,"scope","col"),$n(a,Ye.fromTag("br")),$n(o,a)}return o}(t,n,r,e)})}function Za(e,t){e.selection.select(t.dom,!0),e.selection.collapse(!0)}function Xa(r,n,o,i,a){var u=wi(r),c={styles:u,attributes:yi(r),colGroups:r.getParam("table_use_colgroups",!1,"boolean")};return r.undoManager.ignore(function(){var e=function(e,t,n,r,o,i){void 0===i&&(i=al);var a,u=Ye.fromTag("table"),c="cells"!==o;_t(u,i.styles),St(u,i.attributes),i.colGroups&&$n(u,(s=t,a=Ye.fromTag("colgroup"),w(s,function(){return $n(a,Ye.fromTag("col"))}),a));var s,i=Math.min(e,n);c&&0<n&&(s=Ye.fromTag("thead"),$n(u,s),l=Ga(n,t,"sectionCells"===o?i:0,r),bn(s,l));var l=Ye.fromTag("tbody");$n(u,l);r=Ga(c?e-i:e,t,c?0:n,r);return bn(l,r),u}(o,n,a,i,Ti(r),c);xt(e,"data-mce-id","__mce");var t,e=(t=e,e=Ye.fromTag("div"),t=Ye.fromDom(t.dom.cloneNode(!0)),$n(e,t),e.dom.innerHTML);r.insertContent(e),r.addVisual()}),bt(ho(r),'table[data-mce-id="__mce"]').map(function(e){var t,n;return Ts(r)?Ii(r,e):As(r)?Bi(e):(Oi(r)||(n=u.width,T(n)&&-1!==n.indexOf("%")))&&Ei(r,e),xo(e),Ot(e,"data-mce-id"),t=r,q(Ne(e,"tr"),function(e){gi(t,e.dom),q(Ne(e,"th,td"),function(e){pi(t,e.dom)})}),n=r,bt(e,"td,th").each(y(Za,n)),e.dom}).getOr(null)}function Ya(e,t,n,r,o){void 0===r&&(r={});var i=function(e){return N(e)&&0<e};if(i(t)&&i(n)){i=r.headerRows||0,r=r.headerColumns||0;return Xa(e,n,t,r,i)}return console.error(o),null}function Ja(e){return function(){return e().fold(function(){return[]},function(e){return U(e,function(e){return e.dom})})}}function Qa(t){return function(e){e=0<e.length?H.some(go(e)):H.none();t(e)}}function eu(e,t,n){var r=It(e,t,1);1===n||r<=1?Ot(e,t):xt(e,t,Math.min(n,r))}function tu(o,e,i){return function(e,t){for(var n=0;n<t.length;n++){var r=o.getStyle(t[n],i);if((e=void 0===e?r:e)!==r)return""}return e}(void 0,o.select("td,th",e))}function nu(e,t,n){n&&e.formatter.apply("align"+n,{},t)}function ru(t,n){ul.each("left center right".split(" "),function(e){t.formatter.remove("align"+e,{},n)})}function ou(t){return function(e){return G(e,"rgb")?t.toHex(e):e}}function iu(e,t){return t=Ye.fromDom(t),{borderwidth:Pt(t,"border-width").getOr(""),borderstyle:Pt(t,"border-style").getOr(""),bordercolor:Pt(t,"border-color").map(ou(e)).getOr(""),backgroundcolor:Pt(t,"background-color").map(ou(e)).getOr("")}}function au(e){var o=e[0],e=e.slice(1);return q(e,function(e){q(Qe(o),function(r){ie(e,function(e,t){var n=o[r];""!==n&&r===t&&n!==e&&(o[r]="")})})}),o}function uu(e){var t=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===e?[{name:"borderwidth",type:"input",label:"Border width"}].concat(t):t}}function cu(e){return fl.concat((0<(e=cl(e.getParam("table_cell_class_list",[],"array"))).length?H.some({name:"class",type:"listbox",label:"Class",items:e}):H.none()).toArray())}function su(n){return $t(n[0]).map(function(e){var t=En(e),e=jn(t),e=$(e,function(t){return b(n,function(e){return re(t.element,e)})});return U(e,function(e){return{element:e.element.dom,column:Un(t,e.column).map(function(e){return e.element.dom})}})})}function lu(i,a,u,e){var f=e.getData();e.close(),i.undoManager.transact(function(){var c,e,n,s,t,r,l,o;c=i,n=u,s=f,l=1===(e=a).length,o=ue(s,function(e,t){return n[t]!==e}),0<se(o)&&1<=e.length&&(t=$t(e[0]),su(e).each(function(e){q(e,function(e){var t,n,r,o=qa(c,e.element,s.celltype),i=l?dl.normal(c,o):dl.ifTruthy(c,o),a=e.column.map(function(e){return l?dl.normal(c,e):dl.ifTruthy(c,e)}).getOr(i),u=s;(e=i).setAttrib("scope",u.scope),e.setAttrib("class",u.class),e.setStyle("height",wo(u.height)),a.setStyle("width",wo(u.width)),xi(c)&&(r=s,(i=i).setFormat("tablecellbackgroundcolor",r.backgroundcolor),i.setFormat("tablecellbordercolor",r.bordercolor),i.setFormat("tablecellborderstyle",r.borderstyle),i.setFormat("tablecellborderwidth",wo(r.borderwidth))),l&&(ru(c,o),t=c,n=o,ul.each("top middle bottom".split(" "),function(e){t.formatter.remove("valign"+e,{},n)})),s.halign&&nu(c,o,s.halign),!s.valign||(r=s.valign)&&c.formatter.apply("valign"+r,{},o)})}),r=0<se(ue(o,function(e,t){return"scope"!==t&&"celltype"!==t})),t.each(function(e){return hi(c,e.dom,{structure:nt(o,"celltype"),style:r})})),i.focus()})}function fu(e,t){var n,r,o=Ha(ko(e),t);0!==o.length&&(n=function(a,e){e=su(e).map(function(e){return U(e,function(e){return t=a,n=e.element,r=xi(a),i=e.column,o=t.dom,e=i.getOr(n),I({width:(i=function(e,t){return o.getStyle(e,t)||o.getAttrib(e,t)})(e,"width"),height:i(n,"height"),scope:o.getAttrib(n,"scope"),celltype:po(n),class:o.getAttrib(n,"class",""),halign:sl(t,n),valign:ll(t,n)},r?iu(o,n):{});var t,n,r,o,i})});return au(e.getOrDie())}(e,o),r={type:"tabpanel",tabs:[{title:"General",name:"general",items:cu(e)},uu("cell")]},t={type:"panel",items:[{type:"grid",columns:2,items:cu(e)}]},e.windowManager.open({title:"Cell Properties",size:"normal",body:xi(e)?r:t,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:n,onSubmit:y(lu,e,o,n)}))}function du(e){return ml.concat((0<(e=cl(e.getParam("table_row_class_list",[],"array"))).length?H.some({name:"class",type:"listbox",label:"Class",items:e}):H.none()).toArray())}function mu(c,s,l,e){var f=e.getData();e.close(),c.undoManager.transact(function(){var o,e,i,a,t,n,u,r;o=c,i=l,a=f,u=1===(e=s).length,r=ue(a,function(e,t){return i[t]!==e}),0<se(r)&&(q(e,function(e){a.type!==po(e.parentNode)&&Wa(o,e,a.type);var t,n=u?dl.normal(o,e):dl.ifTruthy(o,e),r=a;(t=n).setAttrib("class",r.class),t.setStyle("height",wo(r.height)),Si(o)&&(r=a,(n=n).setStyle("background-color",r.backgroundcolor),n.setStyle("border-color",r.bordercolor),n.setStyle("border-style",r.borderstyle)),a.align!==i.align&&(ru(o,e),nu(o,e,a.align))}),t=nt(r,"type"),n=!t||1<se(r),$t(Ye.fromDom(e[0])).each(function(e){return hi(o,e.dom,{structure:t,style:n})})),c.focus()})}function gu(o){var e,t,n,r=Va(ko(o),ts.selected);0!==r.length&&(n=U(r,function(e){return t=o,n=e.dom,r=Si(o),e=t.dom,I({height:e.getStyle(n,"height")||e.getAttrib(n,"height"),class:e.getAttrib(n,"class",""),type:za(0,n),align:sl(t,n)},r?iu(e,n):{});var t,n,r}),e=au(n),t={type:"tabpanel",tabs:[{title:"General",name:"general",items:du(o)},uu("row")]},n={type:"panel",items:[{type:"grid",columns:2,items:du(o)}]},o.windowManager.open({title:"Row Properties",size:"normal",body:Si(o)?t:n,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:e,onSubmit:y(mu,o,U(r,function(e){return e.dom}),e)}))}function pu(n,r,o,e){var i,a=n.dom,u=e.getData(),c=ue(u,function(e,t){return o[t]!==e});e.close(),""===u.class&&delete u.class,n.undoManager.transact(function(){var e,t;r||(e=parseInt(u.cols,10)||1,t=parseInt(u.rows,10)||1,r=Xa(n,e,t,0,0)),0<se(c)&&(function(e,t,n){var r,o=e.dom,i={},a={};if(i.class=n.class,a.height=wo(n.height),o.getAttrib(t,"width")&&!ki(e)?i.width=(r=n.width)?r.replace(/px$/,""):"":a.width=wo(n.width),ki(e)?(a["border-width"]=wo(n.border),a["border-spacing"]=wo(n.cellspacing)):(i.border=n.border,i.cellpadding=n.cellpadding,i.cellspacing=n.cellspacing),ki(e)&&t.children)for(var u=0;u<t.children.length;u++)pl(o,t.children[u],{"border-width":wo(n.border),padding:wo(n.cellpadding)}),Ci(e)&&pl(o,t.children[u],{"border-color":n.bordercolor});Ci(e)&&(a["background-color"]=n.backgroundcolor,a["border-color"]=n.bordercolor,a["border-style"]=n.borderstyle),i.style=o.serializeStyle(I(I({},wi(e)),a)),o.setAttribs(t,I(I({},yi(e)),i))}(n,r,u),(i=a.select("caption",r)[0])&&!u.caption&&a.remove(i),!i&&u.caption&&((i=a.create("caption")).innerHTML=gl.ie?" ":'<br data-mce-bogus="1"/>',r.insertBefore(i,r.firstChild)),""===u.align?ru(n,r):nu(n,r,u.align)),n.focus(),n.addVisual(),0<se(c)&&(t=!(e=nt(c,"caption"))||1<se(c),hi(n,r,{structure:e,style:t}))})}function hu(e,t){var n,r,o,i,a,u=e.dom,c=(c=Ci(r=e),o=wi(r),i=yi(r),a=c?(a=r.dom,{borderstyle:le(o,"border-style").getOr(""),bordercolor:ou(a)(le(o,"border-color").getOr("")),backgroundcolor:ou(a)(le(o,"background-color").getOr(""))}):{},I(I(I(I(I(I({},{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""}),o),i),a),(a=o["border-width"],ki(r)&&a?{border:a}:le(i,"border").fold(function(){return{}},function(e){return{border:e}}))),(a=le(o,"border-spacing").or(le(i,"cellspacing")).fold(function(){return{}},function(e){return{cellspacing:e}}),i=le(o,"border-padding").or(le(i,"cellpadding")).fold(function(){return{}},function(e){return{cellpadding:e}}),I(I({},a),i))));!1===t?(n=u.getParent(e.selection.getStart(),"table"))?(l=n,o=Ci(r=e),s=r.dom,c=I({width:s.getStyle(l,"width")||s.getAttrib(l,"width"),height:s.getStyle(l,"height")||s.getAttrib(l,"height"),cellspacing:s.getStyle(l,"border-spacing")||s.getAttrib(l,"cellspacing"),cellpadding:s.getAttrib(l,"cellpadding")||tu(r.dom,l,"padding"),border:(a=s,u=Pt(Ye.fromDom(i=l),"border-width"),ki(r)&&u.isSome()?u.getOr(""):a.getAttrib(i,"border")||tu(r.dom,i,"border-width")||tu(r.dom,i,"border")),caption:!!s.select("caption",l)[0],class:s.getAttrib(l,"class",""),align:sl(r,l)},o?iu(s,l):{})):Ci(e)&&(c.borderstyle="",c.bordercolor="",c.backgroundcolor=""):(c.cols="1",c.rows="1",Ci(e)&&(c.borderstyle="",c.bordercolor="",c.backgroundcolor=""));var s=cl(e.getParam("table_class_list",[],"array"));0<s.length&&c.class&&(c.class=c.class.replace(/\s*mce\-item\-table\s*/g,""));var l={type:"grid",columns:2,items:(l=s,s=t?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],t=e.getParam("table_appearance_options",!0,"boolean")?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],l=0<l.length?[{type:"listbox",name:"class",label:"Class",items:l}]:[],s.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(t).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(l))},l=Ci(e)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[l]},uu("table")]}:{type:"panel",items:[l]};e.windowManager.open({title:"Table Properties",size:"normal",body:l,onSubmit:y(pu,e,n,c),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:c})}function vu(e){return il(ko(e))}function bu(e){return ol(ko(e))}function yu(a,r,n,u,t){function c(e){return $t(e,d)}function i(t){return function(e){a.selection.setRng(e.rng),a.focus(),n.clear(t),xo(t),hi(a,t.dom,e.effect)}}function o(r){return bu(a).each(function(n){c(n).each(function(e){var t=Ao(u,e,n);r(e,t).each(i(e))})})}function s(){return bu(a).map(function(i){return c(i).bind(function(e){var n,r,t=Ao(u,e,i),o=fo(F,Ye.fromDom(a.getDoc()),H.none());return t=t,n=o,r=En(e),Ji(r,t).bind(function(e){var t=Vi(r,n,!1),e=tn(t).rows.slice(e[0].row,e[e.length-1].row+e[e.length-1].rowspan),e=x(e,function(e){var t=$(e.cells,function(e){return!e.isLocked});return 0<t.length?[I(I({},e),{cells:t})]:[]}),e=Ki(e,n);return ur(0<e.length,e)}).map(function(e){return U(e,function(e){var n=or(e.element);return q(e.cells,function(e){var t=ir(e.element);Ui(t,"colspan",e.colspan,1),Ui(t,"rowspan",e.rowspan,1),$n(n,t)}),n})})})})}function l(){return bu(a).map(function(n){return c(n).bind(function(e){var o,t=Ao(u,e,n);return t=t,o=En(e),Qi(o,t).map(function(e){var n,r,t=e[e.length-1],e=e[0].column,t=t.column+t.colspan;return B(function(e,t,n){if(zn(e)){var r=$(Fn(e),function(e){return e.column>=t&&e.column<n}),e=U(r,function(e){e=ir(e.element);return eu(e,"span",n-t),e}),r=Ye.fromTag("colgroup");return bn(r,e),[r]}return[]}(o,e,t),(n=e,r=t,U(o.all,function(e){var t=$(e.cells,function(e){return e.column>=n&&e.column<r}),e=U(t,function(e){e=ir(e.element);return eu(e,"colspan",r-n),e}),t=Ye.fromTag("tr");return bn(t,e),t})))})})})}function f(o,e){return e().each(function(e){var r=U(e,ir);bu(a).each(function(e){return c(e).each(function(e){var t,n=mo(Ye.fromDom(a.getDoc())),n=(t=r,n=n,{selection:Oo(u),clipboard:t,generators:n});o(e,n).each(i(e))})})})}var d=yo(a);function m(t,e){e.each(function(e){hi(t,e.dom,Ss)})}ie({mceTableSplitCells:function(){return o(r.unmergeCells)},mceTableMergeCells:function(){return o(r.mergeCells)},mceTableInsertRowBefore:function(){return o(r.insertRowsBefore)},mceTableInsertRowAfter:function(){return o(r.insertRowsAfter)},mceTableInsertColBefore:function(){return o(r.insertColumnsBefore)},mceTableInsertColAfter:function(){return o(r.insertColumnsAfter)},mceTableDeleteCol:function(){return o(r.deleteColumn)},mceTableDeleteRow:function(){return o(r.deleteRow)},mceTableCutCol:function(e){return l().each(function(e){t.setColumns(e),o(r.deleteColumn)})},mceTableCutRow:function(e){return s().each(function(e){t.setRows(e),o(r.deleteRow)})},mceTableCopyCol:function(e){return l().each(function(e){return t.setColumns(e)})},mceTableCopyRow:function(e){return s().each(function(e){return t.setRows(e)})},mceTablePasteColBefore:function(e){return f(r.pasteColsBefore,t.getColumns)},mceTablePasteColAfter:function(e){return f(r.pasteColsAfter,t.getColumns)},mceTablePasteRowBefore:function(e){return f(r.pasteRowsBefore,t.getRows)},mceTablePasteRowAfter:function(e){return f(r.pasteRowsAfter,t.getRows)},mceTableDelete:function(){return vu(a).each(function(e){$t(e,d).filter(p(d)).each(function(e){var t=Ye.fromText("");gn(e,t),Wn(e),a.dom.isEmpty(a.getBody())?(a.setContent(""),a.selection.setCursorLocation()):((e=a.dom.createRng()).setStart(t.dom,0),e.setEnd(t.dom,0),a.selection.setRng(e),a.nodeChanged())})})},mceTableSizingMode:function(e,t){return n=t,vu(a).each(function(e){As(a)||Ts(a)||Oi(a)||$t(e,d).each(function(e){"relative"!==n||Uo(e)?"fixed"!==n||qo(e)?"responsive"!==n||$o(e)||Bi(e):Ii(a,e):Ei(a,e),xo(e),hi(a,e.dom,Ss)})});var n}},function(e,t){return a.addCommand(t,e)}),ie({mceTableCellType:function(e,t){var n=$t(ko(a),d);r.setTableCellType(a,t),m(a,n)},mceTableRowType:function(e,t){var n=$t(ko(a),d);r.setTableRowType(a,t),m(a,n)}},function(e,t){return a.addCommand(t,e)}),a.addCommand("mceTableColType",function(e,t){return le(t,"type").each(function(e){return o("th"===e?r.makeColumnsHeader:r.unmakeColumnsHeader)})}),ie({mceTableProps:y(hu,a,!1),mceTableRowProps:y(gu,a),mceTableCellProps:y(fu,a,u)},function(e,t){return a.addCommand(t,function(){return e()})}),a.addCommand("mceInsertTable",function(e,t){A(t)&&0<Qe(t).length?Ya(a,t.rows,t.columns,t.options,"Invalid values for mceInsertTable - rows and columns values are required to insert a table."):hu(a,!0)}),a.addCommand("mceTableApplyCellStyle",function(e,t){function r(e){return"tablecell"+e.toLowerCase().replace("-","")}var o;!A(t)||0!==(o=Ha(ko(a),u)).length&&(function(e){for(var t in e)if(et.call(e,t))return;return 1}(t=ue(t,function(e,t){return a.formatter.has(r(t))&&T(e)}))||(ie(t,function(t,n){q(o,function(e){dl.normal(a,e.dom).setFormat(r(n),t)})}),c(o[0]).each(function(e){return hi(a,e.dom,xs)})))})}function wu(n,e){return $t(n,e).bind(function(e){var t=Ut(e);return l(t,function(e){return re(n,e)}).map(function(e){return{index:e,all:t}})})}function xu(e,t,n,r){return{start:e,soffset:t,finish:n,foffset:r}}function Su(e,t,n){var r,o=e=e.document.createRange();return t.fold(function(e){o.setStartBefore(e.dom)},function(e,t){o.setStart(e.dom,t)},function(e){o.setStartAfter(e.dom)}),r=e,n.fold(function(e){r.setEndBefore(e.dom)},function(e,t){r.setEnd(e.dom,t)},function(e){r.setEndAfter(e.dom)}),e}function Cu(e,t,n,r,o){return(e=e.document.createRange()).setStart(t.dom,n),e.setEnd(r.dom,o),e}function ku(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}}function Ou(e,t,n){return t(Ye.fromDom(n.startContainer),n.startOffset,Ye.fromDom(n.endContainer),n.endOffset)}function Tu(e,t){var o,n,t=(o=e,t.match({domRange:function(e){return{ltr:g(e),rtl:H.none}},relative:function(e,t){return{ltr:V(function(){return Su(o,e,t)}),rtl:V(function(){return H.some(Su(o,t,e))})}},exact:function(e,t,n,r){return{ltr:V(function(){return Cu(o,e,t,n,r)}),rtl:V(function(){return H.some(Cu(o,n,r,e,t))})}}}));return(n=(t=t).ltr()).collapsed?t.rtl().filter(function(e){return!1===e.collapsed}).map(function(e){return Sl.rtl(Ye.fromDom(e.endContainer),e.endOffset,Ye.fromDom(e.startContainer),e.startOffset)}).getOrThunk(function(){return Ou(0,Sl.ltr,n)}):Ou(0,Sl.ltr,n)}function Au(i,e){return Tu(i,e).match({ltr:function(e,t,n,r){var o=i.document.createRange();return o.setStart(e.dom,t),o.setEnd(n.dom,r),o},rtl:function(e,t,n,r){var o=i.document.createRange();return o.setStart(n.dom,r),o.setEnd(e.dom,t),o}})}function Ru(n,r,e,t,o){function c(e){var t=n.dom.createRange();return t.setStart(r.dom,e),t.collapse(!0),t}var i=xn(r).length,i=function(e,t,n,r){if(0===r)return 0;if(e===n)return r-1;for(var o=n,i=1;i<r;i++){var a=c(i).getBoundingClientRect(),u=Math.abs(e-a.left);if(t<=a.bottom){if(t<a.top||o<u)return i-1;o=u}}return 0}(e,t,o.right,i);return c(i)}function Du(e,t){return t-e.left<e.right-t}function _u(e,t,n){return(e=e.dom.createRange()).selectNode(t.dom),e.collapse(n),e}function Nu(e,t){var n=ot(e);return"input"===n?yl.after(e):z(["br","img"],n)?0===t?yl.before(e):yl.after(e):yl.on(e,t)}function Pu(e,t){return e=e.fold(yl.before,Nu,yl.after),t=t.fold(yl.before,Nu,yl.after),xl.relative(e,t)}function Eu(e,t,n,r){return t=Nu(e,t),r=Nu(n,r),xl.relative(t,r)}function Iu(e){return H.from(e.getSelection())}function Bu(e,t){Iu(e).each(function(e){e.removeAllRanges(),e.addRange(t)})}function Mu(e,t,n,r,o){o=Cu(e,t,n,r,o),Bu(e,o)}function Lu(c,e){return Tu(c,e).match({ltr:function(e,t,n,r){Mu(c,e,t,n,r)},rtl:function(o,i,a,u){Iu(c).each(function(e){if(e.setBaseAndExtent)e.setBaseAndExtent(o.dom,i,a.dom,u);else if(e.extend)try{n=a,r=u,(t=e).collapse(o.dom,i),t.extend(n.dom,r)}catch(e){Mu(c,a,u,o,i)}else Mu(c,a,u,o,i);var t,n,r})}})}function ju(e,t,n,r,o){o=Eu(t,n,r,o),Lu(e,o)}function Fu(e,t,n){n=Pu(t,n),Lu(e,n)}function zu(e){function t(e,t,n,r){return Cu(o,e,t,n,r)}var o=xl.getWin(e).dom,e=e.match({domRange:function(e){var t=Ye.fromDom(e.startContainer),n=Ye.fromDom(e.endContainer);return Eu(t,e.startOffset,n,e.endOffset)},relative:Pu,exact:Eu});return Tu(o,e).match({ltr:t,rtl:t})}function Uu(e){if(0<e.rangeCount){var t=e.getRangeAt(0),e=e.getRangeAt(e.rangeCount-1);return H.some(xu(Ye.fromDom(t.startContainer),t.startOffset,Ye.fromDom(e.endContainer),e.endOffset))}return H.none()}function qu(e){if(null===e.anchorNode||null===e.focusNode)return Uu(e);var t,n,r,o,i,a,u,c,s,l=Ye.fromDom(e.anchorNode),f=Ye.fromDom(e.focusNode);return t=l,n=e.anchorOffset,r=f,o=e.focusOffset,a=n,u=r,c=o,(s=ye(i=t).dom.createRange()).setStart(i.dom,a),s.setEnd(u.dom,c),s,o=re(t,r)&&n===o,s.collapsed&&!o?H.some(xu(l,e.anchorOffset,f,e.focusOffset)):Uu(e)}function $u(e){return Iu(e).filter(function(e){return 0<e.rangeCount}).bind(qu).map(function(e){return xl.exact(e.start,e.soffset,e.finish,e.foffset)})}function Wu(e,t){return t=xl.exact(t,0,t,0),zu(t)}function Hu(e,t){return{selection:e,kill:t}}function Vu(e,t,n,r){return{start:yl.on(e,t),finish:yl.on(n,r)}}function Ku(e,t){return t=Au(e,t),xu(Ye.fromDom(t.startContainer),t.startOffset,Ye.fromDom(t.endContainer),t.endOffset)}function Gu(n,e,r,t,o){return re(r,t)?H.none():Yn(r,t,e).bind(function(e){var t=e.boxes.getOr([]);return 0<t.length?(o(n,t,e.start,e.finish),H.some(Hu(H.some(Dl(r,0,r,to(r))),!0))):H.none()})}function Zu(e,t){return{item:e,mode:t}}function Xu(t){return function(e){return 0===t.property().children(e).length}}function Yu(e,t,n,r){return Bl(e,t,n,Nl,{sibling:function(e,t){return e.query().prevSibling(t)},first:function(e){return 0<e.length?H.some(e[e.length-1]):H.none()}},r)}function Ju(e,t,n,r){return Bl(e,t,n,Nl,{sibling:function(e,t){return e.query().nextSibling(t)},first:function(e){return 0<e.length?H.some(e[0]):H.none()}},r)}function Qu(e){return yt(e,"tr")}function ec(e){return"br"===ot(e)}function tc(t,e,n,r){return Te(o=e,i=n).filter(ec).orThunk(function(){return Te(o,i-1).filter(ec)}).bind(function(e){return r.traverse(e).fold(function(){return zl(e,r.gather,t).map(r.relative)},function(e){return xe(r=e).bind(function(t){var n=Oe(t);return l(n,y(re,r)).map(function(e){return{parent:t,children:n,element:r,index:e}})}).map(function(e){return yl.on(e.parent,e.index)});var r})});var o,i}function nc(e,t){return{left:e.left,top:e.top+t,right:e.right,bottom:e.bottom+t}}function rc(e,t){return{left:e.left,top:e.top-t,right:e.right,bottom:e.bottom-t}}function oc(e,t,n){return{left:e.left+t,top:e.top+n,right:e.right+t,bottom:e.bottom+n}}function ic(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function ac(e,t){return H.some(e.getRect(t))}function uc(e,t,n){return it(t)?ac(e,t).map(ic):at(t)?(e=e,t=t,(0<=(n=n)&&n<to(t)?e.getRangedRect(t,n,t,n+1):0<n?e.getRangedRect(t,n-1,t,n):H.none()).map(ic)):H.none()}function cc(e,t){return it(t)?ac(e,t).map(ic):at(t)?e.getRangedRect(t,0,t,to(t)).map(ic):H.none()}function sc(t,e,n){return gt(function(e,t){return t(e)},pt,e,Oa,void 0).fold(v,function(e){return cc(t,e).exists(function(e){return t=e,(e=n).left<t.left||Math.abs(t.right-e.left)<1||e.left>t.right;var t})})}function lc(c,s,l){return c.getSelection().bind(function(t){return e=s,n=t.finish,r=t.foffset,o=l,(ec(n)?(i=e,a=n,(u=o).traverse(a).orThunk(function(){return zl(a,u.gather,i)}).map(u.relative)):tc(e,n,r,o)).map(function(e){return{start:e,finish:e}}).fold(function(){return H.some(ji(t.finish,t.foffset))},function(e){e=c.fromSitus(e),e=Fl.verify(c,t.finish,t.foffset,e.finish,e.foffset,l.failure,s);return Fl.cata(e,function(e){return H.none()},function(){return H.none()},function(e){return H.some(ji(e,0))},function(e){return H.some(ji(e,to(e)))})});var e,n,r,o,i,a,u})}function fc(a,u,c,e,s){return yt(e,"td,th",u).bind(function(i){return yt(i,"table",u).bind(function(e){return t=e,pt(s,function(e){return xe(e).exists(function(e){return re(e,t)})},void 0).isSome()?lc(n=a,r=u,o=c).bind(function(e){return Wl(n,r,e.element,e.offset,o,20).map(n.fromSitus)}).bind(function(t){return yt(t.finish,"td,th",u).map(function(e){return{start:i,finish:e,range:t}})}):H.none();var t,n,r,o})})}function dc(e,t,n,r,o,i){return Xe().browser.isIE()?H.none():i(r,t).orThunk(function(){return fc(e,t,n,r,o).map(function(e){e=e.range;return Hu(H.some(Dl(e.start,e.soffset,e.finish,e.foffset)),!0)})})}function mc(e,r){return yt(e,"tr",r).bind(function(n){return yt(n,"table",r).bind(function(e){var t=Ne(e,"tr");return re(n,t[0])?Yu(Ml,e,function(e){return oo(e).isSome()},r).map(function(e){var t=to(e);return Hu(H.some(Dl(e,t,e,t)),!0)}):H.none()})})}function gc(e,r){return yt(e,"tr",r).bind(function(n){return yt(n,"table",r).bind(function(e){var t=Ne(e,"tr");return re(n,t[t.length-1])?Ju(Ml,e,function(e){return ro(e).isSome()},r).map(function(e){return Hu(H.some(Dl(e,0,e,0)),!0)}):H.none()})})}function pc(e,t,n,r,o,i,a){return fc(e,n,r,o,i).bind(function(e){return Gu(t,n,e.start,e.finish,a)})}function hc(e,t){return yt(e,"td,th",t)}function vc(o,i,t,a){function n(e){u.on(function(r){a.clearBeforeUpdate(i),hc(e.target,t).each(function(n){Yn(r,n,t).each(function(e){var t=e.boxes.getOr([]);(1<t.length||1===t.length&&!re(r,n))&&(a.selectRange(i,t,e.start,e.finish),o.selectContents(n))})})})}var r,u=(r=Xr(H.none()),{clear:function(){return r.set(H.none())},set:function(e){return r.set(H.some(e))},isSet:function(){return r.get().isSome()},on:function(e){return r.get().each(e)}}),c=u.clear;return{clearstate:c,mousedown:function(e){a.clear(i),hc(e.target,t).each(u.set)},mouseover:function(e){n(e)},mouseup:function(e){n(e),c()}}}function bc(e){return 37<=e&&e<=40}function yc(i){return{elementFromPoint:function(e,t){return Ye.fromPoint(Ye.fromDom(i.document),e,t)},getRect:function(e){return e.dom.getBoundingClientRect()},getRangedRect:function(e,t,n,r){r=xl.exact(e,t,n,r);return function(e,t){t=(e=Au(e,t)).getClientRects();return 0<(e=0<t.length?t[0]:e.getBoundingClientRect()).width||0<e.height?H.some(e).map(ku):H.none()}(i,r)},getSelection:function(){return $u(i).map(function(e){return Ku(i,e)})},fromSitus:function(e){e=xl.relative(e.start,e.finish);return Ku(i,e)},situsFromPoint:function(e,t){return n=n=e,e=e=t,t=Ye.fromDom((t=i).document),Ol(t,n,e).map(function(e){return xu(Ye.fromDom(e.startContainer),e.startOffset,Ye.fromDom(e.endContainer),e.endOffset)}).map(function(e){return Vu(e.start,e.soffset,e.finish,e.foffset)});var n},clearSelection:function(){Iu(i).each(function(e){return e.removeAllRanges()})},collapseSelection:function(o){void 0===o&&(o=!1),$u(i).each(function(e){return e.fold(function(e){return e.collapse(o)},function(e,t){t=o?e:t;Fu(i,t,t)},function(e,t,n,r){n=o?e:n,r=o?t:r;ju(i,n,r,n,r)})})},setSelection:function(e){ju(i,e.start,e.soffset,e.finish,e.foffset)},setRelativeSelection:function(e,t){Fu(i,e,t)},selectContents:function(e){var t,n;n=t=e,t=(e=i).document.createRange(),n=n,t.selectNodeContents(n.dom),Bu(e,t)},getInnerHeight:function(){return i.innerHeight},getScrollY:function(){var e=Ye.fromDom(i.document),t=void 0!==e?e.dom:document,e=t.body.scrollLeft||t.documentElement.scrollLeft,t=t.body.scrollTop||t.documentElement.scrollTop;return jc(e,t).top},scrollBy:function(e,t){var n=e,e=t,t=Ye.fromDom(i.document);(t=(void 0!==t?t.dom:document).defaultView)&&t.scrollBy(n,e)}}}function wc(e,t){return{rows:e,cols:t}}function xc(e,f,d,m){function c(){return m.clear(f),H.none()}var s=yc(e);return{keydown:function(e,t,n,r,o,i){var e=e.raw,a=e.which,u=!0===e.shiftKey;return Jn(f,m.selectedSelector).fold(function(){return Yl(a)&&u?y(pc,s,f,d,Gl,r,t,m.selectRange):Xl(a)&&u?y(pc,s,f,d,Zl,r,t,m.selectRange):Yl(a)?y(dc,s,d,Gl,r,t,gc):Xl(a)?y(dc,s,d,Zl,r,t,mc):H.none},function(o){function e(e){return function(){return h(e,function(e){return t=e.rows,e=e.cols,n=f,er(o,t,e,(r=m).firstSelectedSelector,r.lastSelectedSelector).map(function(e){return r.clearBeforeUpdate(n),r.selectRange(n,e.boxes,e.start,e.finish),e.boxes});var t,n,r}).fold(function(){return Qn(f,m.firstSelectedSelector,m.lastSelectedSelector).map(function(e){var t=Yl(a)||i.isForward(a)?yl.after:yl.before;return s.setRelativeSelection(yl.on(e.first,0),t(e.table)),m.clear(f),Hu(H.none(),!0)})},function(e){return H.some(Hu(H.none(),!0))})}}return Yl(a)&&u?e([wc(1,0)]):Xl(a)&&u?e([wc(-1,0)]):i.isBackward(a)&&u?e([wc(0,-1),wc(-1,0)]):i.isForward(a)&&u?e([wc(0,1),wc(1,0)]):bc(a)&&0==u?c:H.none})()},keyup:function(a,u,c,s,l){return Jn(f,m.selectedSelector).fold(function(){var n,r,e,o,t=a.raw,i=t.which;return 0!=(!0===t.shiftKey)&&bc(i)?(n=f,r=d,i=u,e=s,o=m.selectRange,re(i,e)&&c===l?H.none():yt(i,"td,th",r).bind(function(t){return yt(e,"td,th",r).bind(function(e){return Gu(n,r,t,e,o)})})):H.none()},H.none)}}}function Sc(o,i,t){function n(e){Ot(e,o.selected),Ot(e,o.firstSelected),Ot(e,o.lastSelected)}function a(e){xt(e,o.selected,"1")}function u(e){r(e),t()}var r=function(e){e=Ne(e,o.selectedSelector);q(e,n)};return{clearBeforeUpdate:r,clear:u,selectRange:function(e,t,n,r){u(e),q(t,a),xt(n,o.firstSelected,"1"),xt(r,o.lastSelected,"1"),i(t,n,r)},selectedSelector:o.selectedSelector,firstSelectedSelector:o.firstSelectedSelector,lastSelectedSelector:o.lastSelectedSelector}}function Cc(e){return!1===ri(Ye.fromDom(e.target),"ephox-snooker-resizer-bar")}var kc=function(t,e,n){return e.bind(function(e){return n.filter(y(t.eq,e))})},Oc=Kn(),Tc=Jn,Ac=function(a){if(!R(a))throw new Error("cases must be an array");if(0===a.length)throw new Error("there must be at least one case");var u=[],n={};return q(a,function(e,r){var t=Qe(e);if(1!==t.length)throw new Error("one and only one name per case");var o=t[0],i=e[o];if(void 0!==n[o])throw new Error("duplicate key detected:"+o);if("cata"===o)throw new Error("cannot have a case named cata (sorry)");if(!R(i))throw new Error("case arguments must be an array");u.push(o),n[o]=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.length;if(t!==i.length)throw new Error("Wrong number of arguments to case "+o+". Expected "+i.length+" ("+i+"), got "+t);return{fold:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length!==a.length)throw new Error("Wrong number of arguments to fold. Expected "+a.length+", got "+e.length);return e[r].apply(null,n)},match:function(e){var t=Qe(e);if(u.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+u.join(",")+"\nActual: "+t.join(","));if(!S(u,function(e){return z(t,e)}))throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+u.join(", "));return e[o].apply(null,n)},log:function(e){console.log(e,{constructors:u,constructor:o,params:n})}}}}),n},Rc=Ac([{none:[]},{multiple:["elements"]},{single:["element"]}]),Dc=Rc.none,_c=Rc.multiple,Nc=Rc.single,Pc=tinymce.util.Tools.resolve("tinymce.PluginManager"),Ec=(Ll=function(n,r){function e(e){var t=r(e);if(t<=0||null===t){e=Nt(e,n);return parseFloat(e)||0}return t}function o(n,e){return W(e,function(e,t){t=Nt(n,t),t=void 0===t?0:parseInt(t,10);return isNaN(t)?e:e+t},0)}return{set:function(e,t){if(!N(t)&&!t.match(/^[0-9]+$/))throw new Error(n+".set accepts only positive integer values. Value was "+t);e=e.dom;At(e)&&(e.style[n]=t+"px")},get:e,getOuter:e,aggregate:o,max:function(e,t,n){n=o(e,n);return n<t?t-n:0}}})("width",function(e){return e.dom.offsetWidth}),Ic=function(e,t,n){var r=e();return d(r,t).orThunk(function(){return H.from(r[0]).orThunk(n)}).map(function(e){return e.element})},Bc=function(e){return"rtl"===Nt(e,"direction")?"rtl":"ltr"},Mc=Ll("height",function(e){var t=e.dom;return dt(e)?t.getBoundingClientRect().height:t.offsetHeight}),Lc=function(n,r){return{left:n,top:r,translate:function(e,t){return Lc(n+e,r+t)}}},jc=Lc,Fc=function(e){var t=e.dom,n=t.ownerDocument.body;return n===t?jc(n.offsetLeft,n.offsetTop):dt(e)?(t=t.getBoundingClientRect(),jc(t.left,t.top)):jc(0,0)},zc={delta:s,positions:function(e){return Tr(kr,Or,e)},edge:Cr},Uc=dr({delta:s,edge:wr,positions:function(e){return Tr(xr,Sr,e)}},{delta:function(e){return-e},edge:yr,positions:function(e){return Tr(Sr,xr,e)}}),qc={delta:function(e,t){return Uc(t).delta(e,t)},positions:function(e,t){return Uc(t).positions(e,t)},edge:function(e){return Uc(e).edge(e)}},$c={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Wc=(Ls="[eE][+-]?[0-9]+",js=["Infinity",(_l="[0-9]+")+"\\."+(Es=function(e){return"(?:"+e+")?"})(_l)+Es(Ls),"\\."+_l+Es(Ls),_l+Es(Ls)].join("|"),new RegExp("^([+-]?(?:"+js+"))(.*)$")),Hc=/(\d+(\.\d+)?)%/,Vc=/(\d+(\.\d+)?)px|em/,Kc=g(Hc),Gc=g(Vc),Zc=be("col"),Xc=Jr,Yc=Yr,Jc=["img","br"],Qc=function(e,o){var i=function(e){for(var t=Oe(e),n=t.length-1;0<=n;n--){var r=t[n];if(o(r))return H.some(r);r=i(r);if(r.isSome())return r}return H.none()};return i(e)},es={scope:["row","col"]},ts={selected:"data-mce-selected",selectedSelector:"td[data-mce-selected],th[data-mce-selected]",firstSelected:"data-mce-first-selected",firstSelectedSelector:"td[data-mce-first-selected],th[data-mce-first-selected]",lastSelected:"data-mce-last-selected",lastSelectedSelector:"td[data-mce-last-selected],th[data-mce-last-selected]"},Le=Ac([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),ns=I({},Le),rs=(je=function(o){return function(e,t,n,r){if(o(n)){r=Math.max(r,e[t]-Math.abs(n)),t=Math.abs(r-e[t]);return 0<=n?t:-t}return n}})(function(e){return e<0}),os=je(k),is=Ac([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),as=I(I({},is),{from:function(e){return Z(e,"%")?Mo("%",is.percent,e):Z(e,"px")?Mo("px",is.pixels,e):is.invalid(e)}}),us=function(e){if(0===e.length)return e;var t,n=f(e,function(e,t){var n=as.from(t).fold(function(){return{value:t,remainder:0}},function(e){return t=e,{value:(e=Math.floor(t))+"px",remainder:t-e};var t},function(e){return{value:e+"%",remainder:0}});return{output:[n.value].concat(e.output),remainder:e.remainder+n.remainder}},{output:[],remainder:0}),e=n.output;return e.slice(0,e.length-1).concat([(e=e[e.length-1],t=Math.round(n.remainder),as.from(e).fold(g(e),function(e){return e+t+"px"},function(e){return e+t+"%"}))])},cs=as.from,ss=zr,st=(qs=function(e){return Go(Zo,e,{validate:_,label:"function"})})(["compare","extract","mutate","sink"]),ls=qs(["element","start","stop","destroy"]),fs=qs(["forceDrop","drop","move","delayDrop"]),ds=function(e,t,n,r){e.dom.removeEventListener(t,n,r)},ms=k,gs=Jo,ps=(Rc=function(e){var t=e.replace(/\./g,"-");return{resolve:function(e){return t+"-"+e}}})("ephox-dragster").resolve,hs=st({compare:function(e,t){return jc(t.left-e.left,t.top-e.top)},extract:function(e){return H.some(jc(e.x,e.y))},sink:function(e,t){var n,r=(t=t,t=I({layerClass:ps("blocker")},t),n=Ye.fromTag("div"),xt(n,"role","presentation"),_t(n,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),ni(n,ps("blocker")),ni(n,t.layerClass),{element:function(){return n},destroy:function(){Wn(n)}}),o=Qo(r.element(),"mousedown",e.forceDrop),i=Qo(r.element(),"mouseup",e.drop),a=Qo(r.element(),"mousemove",e.move),u=Qo(r.element(),"mouseout",e.delayDrop);return ls({element:r.element,start:function(e){$n(e,r.element())},stop:function(){Wn(r.element())},destroy:function(){r.destroy(),i.unbind(),a.unbind(),u.unbind(),o.unbind()}})},mutate:function(e,t){e.mutate(t.left,t.top)}}),vs=(Ll=Rc("ephox-snooker").resolve)("resizer-bar"),bs=Ll("resizer-rows"),ys=Ll("resizer-cols"),ws=Ll("resizer-bar-dragging"),xs={structure:!1,style:!0},Ss={structure:!0,style:!1},Cs={"border-collapse":"collapse",width:"100%"},ks={border:"1"},Os="preservetable",Ts=function(e){return"fixed"===vi(e)||!1===bi(e)},As=function(e){return"responsive"===vi(e)},Rs="bar-",Ds=function(t,e,n){return t.property().isText(e)&&0===t.property().getText(e).trim().length||t.property().isComment(e)?n(e).bind(function(e){return Ds(t,e,n).orThunk(function(){return H.some(e)})}):H.none()},_s=function(e,t){var n=Ds(e,t,e.query().prevSibling).getOr(t);if(e.property().isText(n))return ji(n,Fi(e,n));t=e.property().children(n);return 0<t.length?_s(e,t[t.length-1]):ji(n,Fi(e,n))},Ns=_s,Ps=Kn(),Es=function(e,t){return Xi(e,t).filter(function(e){return!e.isLocked})},Is=function(n){return{is:function(e){return n===e},isValue:k,isError:v,getOr:g(n),getOrThunk:g(n),getOrDie:g(n),or:function(e){return Is(n)},orThunk:function(e){return Is(n)},fold:function(e,t){return t(n)},map:function(e){return Is(e(n))},mapError:function(e){return Is(n)},each:function(e){e(n)},bind:function(e){return e(n)},exists:function(e){return e(n)},forall:function(e){return e(n)},toOptional:function(){return H.some(n)}}},Bs=function(n){return{is:v,isValue:v,isError:k,getOr:s,getOrThunk:function(e){return e()},getOrDie:function(){return e=String(n),function(){throw new Error(e)}();var e},or:function(e){return e},orThunk:function(e){return e()},fold:function(e,t){return e(n)},map:function(e){return Bs(n)},mapError:function(e){return Bs(e(n))},each:F,bind:function(e){return Bs(n)},exists:v,forall:k,toOptional:H.none}},Ms={value:Is,error:Bs,fromOption:function(e,t){return e.fold(function(){return Bs(t)},Is)}},Ls=function(n,r){void 0===r&&(r=Ca);function o(e){var t=(t=r(t=e),"col"!==ot(t.element)?n.cell(t):n.col(t));return i.get().isNone()&&i.set(H.some(t)),a=H.some({item:e,replacement:t}),t}var i=Xr(H.none()),a=H.none();return{getOrInit:function(t,n){return a.fold(function(){return o(t)},function(e){return n(t,e.item)?e.replacement:o(t)})},cursor:i.get}},js=function(o,u){return function(n){function i(e){var t={scope:o},t=n.replace(e,u,t);return a.push({item:e,sub:t}),r.get().isNone()&&r.set(H.some(t)),t}var r=Xr(H.none()),a=[];return{replaceOrInit:function(t,n){return"col"===ot(t)?t:(r=t,o=n,d(a,function(e){return o(e.item,r)}).fold(function(){return i(t)},function(e){return n(t,e.item)?e.sub:i(t)}));var r,o},cursor:r.get}}},Le=function(r){var t=Xr(H.none());return{unmerge:function(n){t.get().isNone()&&t.set(H.some(n));var e=ka(n);return e.each(function(e){return xt(n,"scope",e)}),function(){var t=r.cell({element:n,colspan:1,rowspan:1});return Et(t,"width"),Et(n,"width"),e.each(function(e){return xt(t,"scope",e)}),t}},merge:function(r){return Et(r[0],"width"),function(){var e=ar(U(r,ka));if(0===e.length)return H.none();var t=e[0],n=["row","col"];return b(e,function(e){return e!==t&&z(n,e)})?H.none():H.from(t)}().fold(function(){return Ot(r[0],"scope")},function(e){return xt(r[0],"scope",e+"group")}),g(r[0])},cursor:t.get}},Fs=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],zs=Kn(),je=function(e){0===Ut(e).length&&Wn(e)},Us=function(e,t,n){return H.from(e[t]).bind(function(e){return H.from(e.cells[n]).bind(function(e){return H.from(e.element)})})},qs=function(e,t,n,r){var o=In(t),t=r.getWidths(o,r);Do(o,t,r)},st=function(e,t,n,r,o){var i=In(t),a=r.getWidths(i,r),t=r.pixelWidth(),t=o.calcRedestributedWidths(a,t,n.pixelDelta,r.isRelative),n=t.newSizes,t=t.delta;Do(i,n,r),r.adjustTableWidth(t)},$s=(_l=function(s,t,l,f,d){return function(o,i,e,r,a,u){var c=En(i);return t(c,e).map(function(e){var t=Vi(c,r,!1),n=s(t,e,re,d(r)),t=rn(n.grid);return{info:e,grid:Ki(n.grid,r),cursor:n.cursor,lockedColumns:t}}).bind(function(e){var t=$i(i,e.grid),n=H.from(a).getOrThunk(function(){return Qr(i)}),r=H.from(u).getOrThunk(Io);return l(i,e.grid,e.info,n,r),f(i),ci(o,i),Ot(i,Pn),0<e.lockedColumns.length&&xt(i,Pn,e.lockedColumns.join(",")),H.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})})}})(function(e,t,n,r){var o=t[0].row,i=Na(t),e=f(i,function(e,t){return{grid:pa(e.grid,o,t.row+e.delta,n,r.getOrInit),delta:e.delta+1}},{grid:e,delta:0}).grid;return _a(e,o,t[0].column)},Ji,F,F,Ls),Ws=_l(function(e,t,n,r){var o=Na(t),i=o[o.length-1],a=i.row+i.rowspan,e=f(o,function(e,t){return pa(e,a,t.row,n,r.getOrInit)},e);return _a(e,a,t[0].column)},Ji,F,F,Ls),Hs=_l(function(e,t,n,r){var o=t.details,t=Sa(o),i=t[0].column,e=f(t,function(e,t){return{grid:ha(e.grid,i,t.column+e.delta,n,r.getOrInit),delta:e.delta+1}},{grid:e,delta:0}).grid;return _a(e,o[0].row,i)},(Rc=function(n){return function(t,e){return Ji(t,e).filter(function(e){return!(n?Ia:Ba)(t,e)}).map(function(e){return{details:e,pixelDelta:Ma(t,e)}})}})(!0),st,F,Ls),Vs=_l(function(e,t,n,r){var o=t.details,t=o[o.length-1],i=t.column+t.colspan,t=Sa(o),e=f(t,function(e,t){return ha(e,i,t.column,n,r.getOrInit)},e);return _a(e,o[0].row,i)},Rc(!1),st,F,Ls),Ks=_l(function(e,t,n,r){var o,t=Sa(t.details),e=(e=e,o=U(t,function(e){return e.column}),x(e,function(e){var t=e.cells,t=f(o,function(e,t){return 0<=t&&t<e.length?e.slice(0,t).concat(e.slice(t+1)):e},t);return 0<t.length?[pe(t,e.section)]:[]})),t=Da(e,t[0].row,t[0].column);return Ra(e,t)},function(t,e){return Qi(t,e).map(function(e){return{details:e,pixelDelta:-Ma(t,e)}})},st,je,Ls),Gs=_l(function(e,t,n,r){var o,i=Na(t),a=(o=i[0].row,a=i[i.length-1].row,e=(i=tn(e)).rows,i.cols.concat(e.slice(0,o)).concat(e.slice(a+1))),t=Da(a,t[0].row,t[0].column);return Ra(a,t)},Ji,F,je,Ls),Zs=(_l(function(e,t,n,r){r=wa(e,t.column,n,r.replaceOrInit);return _a(r,t.row,t.column)},Es,F,F,js("row","th")),_l(function(e,t,n,r){var o=Sa(t),e=W(o,function(e,t){return wa(e,t.column,n,r.replaceOrInit)},e);return _a(e,t[0].row,t[0].column)},Qi,F,F,js("row","th"))),Xs=(_l(function(e,t,n,r){r=wa(e,t.column,n,r.replaceOrInit);return _a(r,t.row,t.column)},Es,F,F,js(null,"td")),_l(function(e,t,n,r){var o=Sa(t),e=W(o,function(e,t){return wa(e,t.column,n,r.replaceOrInit)},e);return _a(e,t[0].row,t[0].column)},Qi,F,F,js(null,"td"))),Ys=(_l(function(e,t,n,r){r=xa(e,t.row,n,r.replaceOrInit);return _a(r,t.row,t.column)},Xi,F,F,js("col","th")),_l(function(e,t,n,r){var o=Na(t),e=W(o,function(e,t){return xa(e,t.row,n,r.replaceOrInit)},e);return _a(e,t[0].row,t[0].column)},Ji,F,F,js("col","th")),_l(function(e,t,n,r){r=xa(e,t.row,n,r.replaceOrInit);return _a(r,t.row,t.column)},Xi,F,F,js(null,"td")),_l(function(e,t,n,r){var o=Na(t),e=W(o,function(e,t){return xa(e,t.row,n,r.replaceOrInit)},e);return _a(e,t[0].row,t[0].column)},Ji,F,F,js(null,"td")),_l(function(e,t,n,r){var o=t.cells;Aa(o);r=function(e,t,n){var r=tn(e).rows;if(0===r.length)return e;for(var o=t.startRow;o<=t.finishRow;o++)for(var i=t.startCol;i<=t.finishCol;i++){var a=r[o],u=Jt(a,i).isLocked;Xt(a,i,ge(n(),!1,u))}return e}(e,t.bounds,r.merge(o));return Ra(r,H.from(o[0]))},ta,qs,F,Le)),Js=_l(function(e,t,n,r){e=f(t,function(e,t){return ra(e,t,n,r.unmerge(t))},e);return Ra(e,H.from(t[0]))},na,qs,F,Le),Qs=_l(function(e,n,t,r){var o=(o=n.clipboard,i=n.generators,o=En(o),Vi(o,i,!0)),i={row:n.row,column:n.column};return da(i,e,o,n.generators,t).fold(function(){return Ra(e,H.some(n.element))},function(e){var t=Da(e,n.row,n.column);return Ra(e,t)})},function(t,n){return zt(n.element).bind(function(e){return Gi(t,e).map(function(e){return I(I({},e),{generators:n.generators,clipboard:n.clipboard})})})},qs,F,Ls),el=_l(function(e,t,n,r){var o=tn(e).rows,i=t.cells[0].column,o=o[t.cells[0].row],o=Pa(t.clipboard,t.generators,o),n=ma(i,e,o,t.generators,n),t=Da(n,t.cells[0].row,t.cells[0].column);return Ra(n,t)},(Ll=function(n){return function(t,e){return Yi(t,e).filter(function(e){return!(n?Ia:Ba)(t,e.cells)})}})(!0),F,F,Ls),tl=_l(function(e,t,n,r){var o=tn(e).rows,i=t.cells[t.cells.length-1].column+t.cells[t.cells.length-1].colspan,o=o[t.cells[0].row],o=Pa(t.clipboard,t.generators,o),n=ma(i,e,o,t.generators,n),t=Da(n,t.cells[0].row,t.cells[0].column);return Ra(n,t)},Ll(!1),F,F,Ls),nl=_l(function(e,t,n,r){var o=tn(e).rows,i=t.cells[0].row,o=o[i],o=Pa(t.clipboard,t.generators,o),n=ga(i,e,o,t.generators,n),t=Da(n,t.cells[0].row,t.cells[0].column);return Ra(n,t)},Yi,F,F,Ls),rl=_l(function(e,t,n,r){var o=tn(e).rows,i=t.cells[t.cells.length-1].row+t.cells[t.cells.length-1].rowspan,o=o[t.cells[0].row],o=Pa(t.clipboard,t.generators,o),n=ga(i,e,o,t.generators,n),t=Da(n,t.cells[0].row,t.cells[0].column);return Ra(n,t)},Yi,F,F,Ls),ol=(Ll=function(r){return function(e){var t,n=ot(e),e="col"===n||"colgroup"===n?$t(t=e).bind(function(e){return Tc(e,ts.firstSelectedSelector)}).fold(function(){return t},function(e){return e[0]}):e;return yt(e,r)}})("th,td"),il=Ll("th,td,caption"),al={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},ul=tinymce.util.Tools.resolve("tinymce.util.Tools"),cl=function(e,t){return(t||[]).concat(U(e,function(e){var t=e.text||e.title;return fe(e,"menu")?{text:t,items:cl(e.menu)}:{text:t,value:e.value}}))},sl=y(_l=function(e,t,n,r){return d(e,function(e){return n.formatter.matchNode(r,t+e)}).getOr("")},["left","center","right"],"align"),ll=y(_l,["top","middle","bottom"],"valign"),fl=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"H Align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"V Align",items:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}],dl={normal:(Ls=function(i){return function(n,r){var o=n.dom;return{setAttrib:function(e,t){i&&!t||o.setAttrib(r,e,t)},setStyle:function(e,t){i&&!t||o.setStyle(r,e,t)},setFormat:function(e,t){i&&!t||(""===t?n.formatter.remove(e,{value:null},r,!0):n.formatter.apply(e,{value:t},r))}}}})(!1),ifTruthy:Ls(!0)},ml=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],gl=tinymce.util.Tools.resolve("tinymce.Env"),pl=function(e,t,n,r){if("TD"===t.tagName||"TH"===t.tagName)T(n)?e.setStyle(t,n,r):e.setStyle(t,n);else if(t.children)for(var o=0;o<t.children.length;o++)pl(e,t.children[o],n,r)},hl={tablecellbackgroundcolor:{selector:"td,th",styles:{backgroundColor:"%value"},remove_similar:!0},tablecellbordercolor:{selector:"td,th",styles:{borderColor:"%value"},remove_similar:!0},tablecellborderstyle:{selector:"td,th",styles:{borderStyle:"%value"},remove_similar:!0},tablecellborderwidth:{selector:"td,th",styles:{borderWidth:"%value"},remove_similar:!0}},vl=Ac([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),bl=I(I({},vl),{none:function(e){return void 0===e&&(e=void 0),vl.none(e)}}),yl={before:(Ll=Ac([{before:["element"]},{on:["element","offset"]},{after:["element"]}])).before,on:Ll.on,after:Ll.after,cata:function(e,t,n,r){return e.fold(t,n,r)},getStart:function(e){return e.fold(s,s,s)}},wl=Ac([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),xl={domRange:wl.domRange,relative:wl.relative,exact:wl.exact,exactFromRange:function(e){return wl.exact(e.start,e.soffset,e.finish,e.foffset)},getWin:function(e){e=e.match({domRange:function(e){return Ye.fromDom(e.startContainer)},relative:function(e,t){return yl.getStart(e)},exact:function(e,t,n,r){return e}});return Ye.fromDom(we(e).dom.defaultView)},range:xu},Sl=Ac([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Cl=(Sl.ltr,Sl.rtl,function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom}),kl=function(e,t,n,r){return at(t)?function(t,n,r,o){var e=t.dom.createRange();e.selectNode(n.dom);e=e.getClientRects();return h(e,function(e){return Cl(e,r,o)?H.some(e):H.none()}).map(function(e){return Ru(t,n,r,o,e)})}(e,t,n,r):(t=t,i=n,a=r,u=(o=e).dom.createRange(),t=Oe(t),h(t,function(e){return u.selectNode(e.dom),Cl(u.getBoundingClientRect(),i,a)?kl(o,e,i,a):H.none()}));var o,i,a,u},Ol=document.caretPositionFromPoint?function(n,e,t){return H.from(n.dom.caretPositionFromPoint(e,t)).bind(function(e){if(null===e.offsetNode)return H.none();var t=n.dom.createRange();return t.setStart(e.offsetNode,e.offset),t.collapse(),H.some(t)})}:document.caretRangeFromPoint?function(e,t,n){return H.from(e.dom.caretRangeFromPoint(t,n))}:function(o,i,t){return Ye.fromPoint(o,i,t).bind(function(r){function e(){return e=o,n=i,(0===Oe(t=r).length?function(e,t,n){var r=t.dom.getBoundingClientRect(),n=Du(r,n);return H.some(_u(e,t,n))}:function(t,e,n){var r=t.dom.createRange();r.selectNode(e.dom);var r=r.getBoundingClientRect(),o=Du(r,n);return(!0===o?ro:oo)(e).map(function(e){return _u(t,e,o)})})(e,t,n);var e,t,n}return 0===Oe(r).length?e():function(e,t,n,r){var o=e.dom.createRange();o.selectNode(t.dom);o=o.getBoundingClientRect();return function(e,t,n,r){var o=e.dom.createRange();o.selectNode(t.dom);o=o.getBoundingClientRect(),n=Math.max(o.left,Math.min(o.right,n)),r=Math.max(o.top,Math.min(o.bottom,r));return kl(e,t,n,r)}(e,t,Math.max(o.left,Math.min(o.right,n)),Math.max(o.top,Math.min(o.bottom,r)))}(o,r,i,t).orThunk(e)})},Tl=tinymce.util.Tools.resolve("tinymce.util.VK"),Al=function(o,e,t,i){return t.fold(H.none,H.none,function(e,t){return ro(t).map(function(e){return Wu(0,e)})},function(r){return $t(r,e).bind(function(e){var t,n=To(r);return o.undoManager.transact(function(){i.insertRowsAfter(e,n)}),t=Ne(e,"tr"),c(t).bind(function(e){return bt(e,"td,th").map(function(e){return Wu(0,e)})})})})},Rl=["table","li","dl"],Dl=Vu,_l=function(e,t,n,r){return void 0===r&&(r=Nl),e.property().parent(t).map(function(e){return Zu(e,r)})},Nl=function(e,t,n,r){return void 0===r&&(r=Pl),n.sibling(e,t).map(function(e){return Zu(e,r)})},Pl=function(e,t,n,r){void 0===r&&(r=Pl);t=e.property().children(t);return n.first(t).map(function(e){return Zu(e,r)})},El=[{current:_l,next:Nl,fallback:H.none()},{current:Nl,next:Pl,fallback:H.some(_l)},{current:Pl,next:Pl,fallback:H.some(Nl)}],Il=function(t,n,r,o,e){return d(e=void 0===e?El:e,function(e){return e.current===r}).bind(function(e){return e.current(t,n,o,e.next).orThunk(function(){return e.fallback.bind(function(e){return Il(t,n,e,o)})})})},Bl=function(t,e,n,r,o,i){return Il(t,e,r,o).bind(function(e){return i(e.item)?H.none():n(e.item)?H.some(e.item):Bl(t,e.item,n,e.mode,o,i)})},Ml=Kn(),Ls=function(e,t){return Yu(Ml,e,Xu(Ml),t)},Ll=function(e,t){return Ju(Ml,e,Xu(Ml),t)},jl=Ac([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Fl=I(I({},jl),{verify:function(i,e,t,n,a,u,r){return yt(n,"td,th",r).bind(function(o){return yt(e,"td,th",r).map(function(r){return re(o,r)?re(n,o)&&to(o)===a?u(r):jl.none("in same cell"):Zn(Qu,[o,r]).fold(function(){return n=o,t=(e=i).getRect(r),(n=e.getRect(n)).right>t.left&&n.left<t.right?jl.success():u(r);var e,t,n},function(e){return u(r)})})}).getOr(jl.none("default"))},cata:function(e,t,n,r,o){return e.fold(t,n,r,o)}}),zl=function(e,t,n){return t(e,n).bind(function(e){return at(e)&&0===xn(e).trim().length?zl(e,t,n):H.some(e)})},Ul=Ac([{none:[]},{retry:["caret"]}]),_l={point:function(e){return e.bottom},adjuster:function(e,t,n,r,o){var i=nc(o,5);return Math.abs(n.bottom-r.bottom)<1||n.top>o.bottom?Ul.retry(i):n.top===o.bottom?Ul.retry(nc(o,1)):sc(e,t,o)?Ul.retry(oc(i,5,0)):Ul.none()},move:nc,gather:Ll},ql=function(n,r,o,i,a){return 0===a?H.some(i):(e=n,t=i.left,u=r.point(i),e.elementFromPoint(t,u).filter(function(e){return"table"===ot(e)}).isSome()?(u=a-1,ql(n,r,o,r.move(i,5),u)):n.situsFromPoint(i.left,r.point(i)).bind(function(e){return e.start.fold(H.none,function(t){return cc(n,t).bind(function(e){return r.adjuster(n,t,e,o,i).fold(H.none,function(e){return ql(n,r,o,e,a-1)})}).orThunk(function(){return H.some(i)})},H.none)}));var e,t,u},$l={tryUp:y(Ac=function(t,n,e){var r=t.move(e,5),o=ql(n,t,e,r,100).getOr(r),i=o,e=n;return((r=t).point(i)>e.getInnerHeight()?H.some(r.point(i)-e.getInnerHeight()):r.point(i)<0?H.some(-r.point(i)):H.none()).fold(function(){return n.situsFromPoint(o.left,t.point(o))},function(e){return n.scrollBy(0,e),n.situsFromPoint(o.left,t.point(o)-e)})},{point:function(e){return e.top},adjuster:function(e,t,n,r,o){var i=rc(o,5);return Math.abs(n.top-r.top)<1||n.bottom<o.top?Ul.retry(i):n.bottom===o.top?Ul.retry(rc(o,1)):sc(e,t,o)?Ul.retry(oc(i,5,0)):Ul.none()},move:rc,gather:Ls}),tryDown:y(Ac,_l),ieTryUp:function(e,t){return e.situsFromPoint(t.left,t.top-5)},ieTryDown:function(e,t){return e.situsFromPoint(t.left,t.bottom+5)},getJumpSize:g(5)},Wl=function(n,r,o,i,a,u){return 0===u?H.none():Kl(n,r,o,i,a).bind(function(e){var t=n.fromSitus(e),t=Fl.verify(n,o,i,t.finish,t.foffset,a.failure,r);return Fl.cata(t,function(){return H.none()},function(){return H.some(e)},function(e){return re(o,e)&&0===i?Hl(n,o,i,rc,a):Wl(n,r,e,0,a,u-1)},function(e){return re(o,e)&&i===to(e)?Hl(n,o,i,nc,a):Wl(n,r,e,to(e),a,u-1)})})},Hl=function(t,e,n,r,o){return uc(t,e,n).bind(function(e){return Vl(t,o,r(e,$l.getJumpSize()))})},Vl=function(e,t,n){var r=Xe().browser;return r.isChrome()||r.isSafari()||r.isFirefox()||r.isEdge()?t.otherRetry(e,n):r.isIE()?t.ieRetry(e,n):H.none()},Kl=function(t,e,n,r,o){return uc(t,n,r).bind(function(e){return Vl(t,o,e)})},Gl={traverse:ke,gather:Ll,relative:yl.before,otherRetry:$l.tryDown,ieRetry:$l.ieTryDown,failure:Fl.failedDown},Zl={traverse:Ce,gather:Ls,relative:yl.before,otherRetry:$l.tryUp,ieRetry:$l.ieTryUp,failure:Fl.failedUp},Xl=(Ls=function(t){return function(e){return e===t}})(38),Yl=Ls(40),Jl={isBackward:Ls(37),isForward:Ls(39)},Ql={isBackward:Ls(39),isForward:Ls(37)};function ef(h,v,e){var b=Sc(ts,function(o,i,c){e.targets().each(function(r){$t(i).each(function(e){var a,u,t=_i(h),n=fo(F,Ye.fromDom(h.getDoc()),t),t=(t=r,a=n,u=En(e),Ji(u,t).map(function(e){var t,n,r,o,i=Vi(u,a,!1);return{upOrLeftCells:(t=e,r=a,n=i.slice(0,t[t.length-1].row+1),r=Ki(n,r),x(r,function(e){e=e.cells.slice(0,t[t.length-1].column+1);return U(e,function(e){return e.element})})),downOrRightCells:(o=e,e=a,i=i.slice(o[0].row+o[0].rowspan-1,i.length),e=Ki(i,e),x(e,function(e){e=e.cells.slice(o[0].column+o[0].colspan-1,e.cells.length);return U(e,function(e){return e.element})}))}}));h.fire("TableSelectionChange",{cells:o,start:i,finish:c,otherCells:t})})})},function(){h.fire("TableSelectionClear")});return h.on("init",function(e){var t,r,o,i,a,n=h.getWin(),u=ho(h),c=yo(h),s=(t=yc(n),{clearstate:(t=vc(t,u,c,b)).clearstate,mousedown:t.mousedown,mouseover:t.mouseover,mouseup:t.mouseup}),l=xc(n,u,c,b),f=(r=u,o=c,i=b,a=yc(n),function(e,n){i.clearBeforeUpdate(r),Yn(e,n,o).each(function(e){var t=e.boxes.getOr([]);i.selectRange(r,t,e.start,e.finish),a.selectContents(n),a.collapseSelection()})});h.on("TableSelectorChange",function(e){return f(e.start,e.finish)});function d(e,t){!0===e.raw.shiftKey&&(t.kill&&e.kill(),t.selection.each(function(e){e=xl.relative(e.start,e.finish),e=Au(n,e);h.selection.setRng(e)}))}function m(e){return 0===e.button}var g,p,c=(g=Xr(Ye.fromDom(u)),p=Xr(0),{touchEnd:function(e){var t,n,r=Ye.fromDom(e.target);"td"!==ot(r)&&"th"!==ot(r)||(t=g.get(),n=p.get(),re(t,r)&&e.timeStamp-n<300&&(e.preventDefault(),f(r,r))),g.set(r),p.set(e.timeStamp)}});h.on("dragstart",function(e){s.clearstate()}),h.on("mousedown",function(e){m(e)&&Cc(e)&&s.mousedown(gs(e))}),h.on("mouseover",function(e){var t;(void 0===(t=e).buttons||gl.browser.isEdge()&&0===t.buttons||0!=(1&t.buttons))&&Cc(e)&&s.mouseover(gs(e))}),h.on("mouseup",function(e){m(e)&&Cc(e)&&s.mouseup(gs(e))}),h.on("touchend",c.touchEnd),h.on("keyup",function(e){var t,n,r=gs(e);r.raw.shiftKey&&bc(r.raw.which)&&(t=h.selection.getRng(),n=Ye.fromDom(t.startContainer),e=Ye.fromDom(t.endContainer),l.keyup(r,n,t.startOffset,e,t.endOffset).each(function(e){d(r,e)}))}),h.on("keydown",function(e){var t=gs(e);v().each(function(e){return e.hideBars()});var n=h.selection.getRng(),r=Ye.fromDom(n.startContainer),o=Ye.fromDom(n.endContainer),e=dr(Jl,Ql)(Ye.fromDom(h.selection.getStart()));l.keydown(t,r,n.startOffset,o,n.endOffset,e).each(function(e){d(t,e)}),v().each(function(e){return e.showBars()})}),h.on("NodeChange",function(){var e=h.selection,t=Ye.fromDom(e.getStart()),e=Ye.fromDom(e.getEnd());Zn($t,[t,e]).fold(function(){return b.clear(u)},F)})}),{clear:b.clear}}Pc.add("table",function(a){var e,t,n,r,o,i,u,c,s,l,f,d,m,g,p,h,v,b,y,w,x,S,C,k,O,T,A,R,D,_,N=(e=function(){return ho(a)},t=function(){return il(ko(a))},n=ts.selectedSelector,{get:function(){return Tc(e(),n).fold(function(){return t().map(Nc).getOrThunk(Dc)},function(e){return _c(e)})}}),P=(r=a,o=N,i=Xr(H.none()),u=Xr([]),c=H.none(),s=be("caption"),l=function(t){return c.forall(function(e){return!e[t]})},f=function(){return il(ko(r)).bind(function(t){return $t(t).map(function(e){return s(t)?To(t):Ao(o,e,t)})})},d=function(t){return $t(t.element).map(function(e){var n=En(e),e=Ji(n,t).getOr([]),e=W(e,function(e,t){return t.isLocked&&(e.onAny=!0,0===t.column?e.onFirst=!0:t.column+t.colspan>=n.grid.columns&&(e.onLast=!0)),e},{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:ta(n,t).isSome(),unmergeable:na(n,t).isSome(),locked:e}})},S=function(){i.set(V(f)()),c=i.get().bind(d),q(u.get(),function(e){return e()})},m=function(t,n){function r(){return i.get().fold(function(){t.setDisabled(!0)},function(e){t.setDisabled(n(e))})}return r(),u.set(u.get().concat([r])),function(){u.set($(u.get(),function(e){return e!==r}))}},g=function(t){return c.exists(function(e){return e.locked[t]})},r.on("NodeChange ExecCommand TableSelectorChange",S),{onSetupTable:function(e){return m(e,function(e){return!1})},onSetupCellOrRow:function(e){return m(e,function(e){return s(e.element)})},onSetupColumn:function(t){return function(e){return m(e,function(e){return s(e.element)||g(t)})}},onSetupPasteable:function(t){return function(e){return m(e,function(e){return s(e.element)||t().isNone()})}},onSetupPasteableColumn:function(t,n){return function(e){return m(e,function(e){return s(e.element)||t().isNone()||g(n)})}},onSetupMergeable:function(e){return m(e,function(e){return l("mergeable")})},onSetupUnmergeable:function(e){return m(e,function(e){return l("unmergeable")})},resetTargets:S,targets:function(){return i.get()}}),E=Li(a),I=ef(a,E.lazyResize,P),B=Ka(a,E.lazyWire,N),M=(p=Xr(H.none()),h=Xr(H.none()),v=function(e){e.set(H.none())},{getRows:p.get,setRows:function(e){p.set(e),v(h)},clearRows:function(){return v(p)},getColumns:h.get,setColumns:function(e){h.set(e),v(p)},clearColumns:function(){return v(h)}});return yu(a,B,I,N,M),R=B,D=N,_=yo(A=a),ie({mceTableRowType:function(){return R.getTableRowType(A)},mceTableCellType:function(){return R.getTableCellType(A)},mceTableColType:function(){return ol(ko(A)).bind(function(n){return $t(n,_).map(function(e){var t=Ao(D,e,n);return R.getTableColType(e,t)})}).getOr("")}},function(e,t){return A.addQueryValueHandler(t,e)}),k=N,O=B,T=I,(C=a).on("BeforeGetContent",function(n){!0===n.selection&&nr(k.get(),F,function(e){n.preventDefault(),$t(e[0]).map(function(e){e=eo(e,"[data-mce-selected]");return xo(e),[e]}).each(function(e){var t;n.content="text"===n.format?U(e,function(e){return e.dom.innerText}).join(""):(t=C,U(e,function(e){return t.selection.serializer.serialize(e.dom,{})}).join(""))})},F)}),C.on("BeforeSetContent",function(i){!0===i.selection&&!0===i.paste&&H.from(C.dom.getParent(C.selection.getStart(),"th,td")).each(function(e){var o=Ye.fromDom(e);$t(o).each(function(t){var e,n,r=$((e=i.content,(r=document.createElement("div")).innerHTML=e,Oe(Ye.fromDom(r))),function(e){return"meta"!==ot(e)});1===r.length&&(n=r[0],"table"===ot(n))&&(i.preventDefault(),n=Ye.fromDom(C.getDoc()),n=mo(n),n={element:o,clipboard:r[0],generators:n},O.pasteCells(t,n).each(function(e){C.selection.setRng(e.rng),C.focus(),T.clear(t)}))})})}),w=a,S=M,N={text:"Table properties",onSetup:(x=P).onSetupTable,onAction:L("mceTableProps")},I={text:"Delete table",icon:"table-delete-table",onSetup:x.onSetupTable,onAction:L("mceTableDelete")},w.ui.registry.addMenuItem("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",onAction:L("mceTableInsertRowBefore"),onSetup:x.onSetupCellOrRow}),w.ui.registry.addMenuItem("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",onAction:L("mceTableInsertRowAfter"),onSetup:x.onSetupCellOrRow}),w.ui.registry.addMenuItem("tabledeleterow",{text:"Delete row",icon:"table-delete-row",onAction:L("mceTableDeleteRow"),onSetup:x.onSetupCellOrRow}),w.ui.registry.addMenuItem("tablerowprops",{text:"Row properties",icon:"table-row-properties",onAction:L("mceTableRowProps"),onSetup:x.onSetupCellOrRow}),w.ui.registry.addMenuItem("tablecutrow",{text:"Cut row",icon:"cut-row",onAction:L("mceTableCutRow"),onSetup:x.onSetupCellOrRow}),w.ui.registry.addMenuItem("tablecopyrow",{text:"Copy row",icon:"duplicate-row",onAction:L("mceTableCopyRow"),onSetup:x.onSetupCellOrRow}),w.ui.registry.addMenuItem("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",onAction:L("mceTablePasteRowBefore"),onSetup:x.onSetupPasteable(S.getRows)}),w.ui.registry.addMenuItem("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",onAction:L("mceTablePasteRowAfter"),onSetup:x.onSetupPasteable(S.getRows)}),w.ui.registry.addMenuItem("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",onAction:L("mceTableInsertColBefore"),onSetup:x.onSetupColumn("onFirst")}),w.ui.registry.addMenuItem("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",onAction:L("mceTableInsertColAfter"),onSetup:x.onSetupColumn("onLast")}),w.ui.registry.addMenuItem("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",onAction:L("mceTableDeleteCol"),onSetup:x.onSetupColumn("onAny")}),w.ui.registry.addMenuItem("tablecutcolumn",{text:"Cut column",icon:"cut-column",onAction:L("mceTableCutCol"),onSetup:x.onSetupColumn("onAny")}),w.ui.registry.addMenuItem("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",onAction:L("mceTableCopyCol"),onSetup:x.onSetupColumn("onAny")}),w.ui.registry.addMenuItem("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",onAction:L("mceTablePasteColBefore"),onSetup:x.onSetupPasteableColumn(S.getColumns,"onFirst")}),w.ui.registry.addMenuItem("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",onAction:L("mceTablePasteColAfter"),onSetup:x.onSetupPasteableColumn(S.getColumns,"onLast")}),w.ui.registry.addMenuItem("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",onAction:L("mceTableCellProps"),onSetup:x.onSetupCellOrRow}),w.ui.registry.addMenuItem("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",onAction:L("mceTableMergeCells"),onSetup:x.onSetupMergeable}),w.ui.registry.addMenuItem("tablesplitcells",{text:"Split cell",icon:"table-split-cells",onAction:L("mceTableSplitCells"),onSetup:x.onSetupUnmergeable}),!1===w.getParam("table_grid",!0,"boolean")?w.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:L("mceInsertTable")}):w.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:j}]}}),w.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:L("mceInsertTable")}),w.ui.registry.addMenuItem("tableprops",N),w.ui.registry.addMenuItem("deletetable",I),w.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:function(){return"tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter"}}),w.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:function(){return"tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter"}}),w.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:function(){return"tablecellprops tablemergecells tablesplitcells"}}),w.ui.registry.addContextMenu("table",{update:function(){return x.resetTargets(),x.targets().fold(function(){return""},function(e){return"caption"===ot(e.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"})}}),function(t,e,n){t.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(e){return e("inserttable | cell row column | advtablesort | tableprops deletetable")}});function r(e){return function(){return t.execCommand(e)}}t.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:r("mceTableProps"),icon:"table",onSetup:e.onSetupTable}),t.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:r("mceTableDelete"),icon:"table-delete-table",onSetup:e.onSetupTable}),t.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:r("mceTableCellProps"),icon:"table-cell-properties",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:r("mceTableMergeCells"),icon:"table-merge-cells",onSetup:e.onSetupMergeable}),t.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:r("mceTableSplitCells"),icon:"table-split-cells",onSetup:e.onSetupUnmergeable}),t.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:r("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:r("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:r("mceTableDeleteRow"),icon:"table-delete-row",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:r("mceTableRowProps"),icon:"table-row-properties",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:r("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:e.onSetupColumn("onFirst")}),t.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:r("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:e.onSetupColumn("onLast")}),t.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:r("mceTableDeleteCol"),icon:"table-delete-column",onSetup:e.onSetupColumn("onAny")}),t.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",icon:"cut-row",onAction:r("mceTableCutRow"),onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",icon:"duplicate-row",onAction:r("mceTableCopyRow"),onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",icon:"paste-row-before",onAction:r("mceTablePasteRowBefore"),onSetup:e.onSetupPasteable(n.getRows)}),t.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",icon:"paste-row-after",onAction:r("mceTablePasteRowAfter"),onSetup:e.onSetupPasteable(n.getRows)}),t.ui.registry.addButton("tablecutcol",{tooltip:"Cut column",icon:"cut-column",onAction:r("mceTableCutCol"),onSetup:e.onSetupColumn("onAny")}),t.ui.registry.addButton("tablecopycol",{tooltip:"Copy column",icon:"duplicate-column",onAction:r("mceTableCopyCol"),onSetup:e.onSetupColumn("onAny")}),t.ui.registry.addButton("tablepastecolbefore",{tooltip:"Paste column before",icon:"paste-column-before",onAction:r("mceTablePasteColBefore"),onSetup:e.onSetupPasteableColumn(n.getColumns,"onFirst")}),t.ui.registry.addButton("tablepastecolafter",{tooltip:"Paste column after",icon:"paste-column-after",onAction:r("mceTablePasteColAfter"),onSetup:e.onSetupPasteableColumn(n.getColumns,"onLast")}),t.ui.registry.addButton("tableinsertdialog",{tooltip:"Insert table",onAction:r("mceInsertTable"),icon:"table"})}(a,P,M),0<(I=(b=a).getParam("table_toolbar","tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol")).length&&b.ui.registry.addContextToolbar("table",{predicate:function(e){return b.dom.is(e,"table")&&b.getBody().contains(e)},items:I,scope:"node",position:"node"}),a.on("PreInit",function(){a.serializer.addTempAttr(ts.firstSelected),a.serializer.addTempAttr(ts.lastSelected),a.formatter.register(hl)}),a.getParam("table_tab_navigation",!0,"boolean")&&a.on("keydown",function(e){var t,n,r,o=a,i=B;(t=e).keyCode===Tl.TAB&&(n=ho(o),r=function(e){var t=ot(e);return re(e,n)||z(Rl,t)},(e=o.selection.getRng()).collapsed&&(e=Ye.fromDom(e.startContainer),zt(e,r).each(function(e){t.preventDefault(),(t.shiftKey?function(e,t,n,r){return Al(e,t,wu(o=n,void 0).fold(function(){return bl.none()},function(e){return 0<=e.index-1?bl.middle(o,e.all[e.index-1]):bl.first(o)}),r);var o}:function(e,t,n,r){return Al(e,t,wu(o=n,void 0).fold(function(){return bl.none(o)},function(e){return e.index+1<e.all.length?bl.middle(o,e.all[e.index+1]):bl.last(o)}),r);var o})(o,r,e,i).each(function(e){o.selection.setRng(e)})})))}),a.on("remove",function(){E.destroy()}),I=E,P=P,{insertTable:(y=a,function(e,t,n){n=Ya(y,t,e,n=void 0===n?{}:n,"Invalid values for insertTable - rows and columns values are required to insert a table.");return y.undoManager.add(),n}),setClipboardRows:Qa((M=M).setRows),getClipboardRows:Ja(M.getRows),setClipboardCols:Qa(M.setColumns),getClipboardCols:Ja(M.getColumns),resizeHandler:I,selectionTargets:P};function L(e){return function(){return w.execCommand(e)}}function j(e){w.execCommand("mceInsertTable",!1,{rows:e.numRows,columns:e.numColumns})}})}(),function(){"use strict";function c(e,t){t=e.fire("insertCustomChar",{chr:t}).chr,e.execCommand("mceInsertContent",!1,t)}function i(e){return function(){return e}}function e(){return u}function s(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r}function r(e){return S(e)?[].concat(x.grep(e,function(e){return S(e)&&2===e.length})):"function"==typeof e?e():[]}function l(e){return 1<(e=function(e,t){var n=e.getParam("charmap");n&&(t=[{name:C,characters:r(n)}]);n=e.getParam("charmap_append");if(n){e=x.grep(t,function(e){return e.name===C});return e.length?(e[0].characters=[].concat(e[0].characters).concat(r(n)),t):[].concat(t).concat({name:C,characters:r(n)})}return t}(e,[{name:"Currency",characters:[[36,"dollar sign"],[162,"cent sign"],[8364,"euro sign"],[163,"pound sign"],[165,"yen sign"],[164,"currency sign"],[8352,"euro-currency sign"],[8353,"colon sign"],[8354,"cruzeiro sign"],[8355,"french franc sign"],[8356,"lira sign"],[8357,"mill sign"],[8358,"naira sign"],[8359,"peseta sign"],[8360,"rupee sign"],[8361,"won sign"],[8362,"new sheqel sign"],[8363,"dong sign"],[8365,"kip sign"],[8366,"tugrik sign"],[8367,"drachma sign"],[8368,"german penny symbol"],[8369,"peso sign"],[8370,"guarani sign"],[8371,"austral sign"],[8372,"hryvnia sign"],[8373,"cedi sign"],[8374,"livre tournois sign"],[8375,"spesmilo sign"],[8376,"tenge sign"],[8377,"indian rupee sign"],[8378,"turkish lira sign"],[8379,"nordic mark sign"],[8380,"manat sign"],[8381,"ruble sign"],[20870,"yen character"],[20803,"yuan character"],[22291,"yuan character, in hong kong and taiwan"],[22278,"yen/yuan character variant one"]]},{name:"Text",characters:[[169,"copyright sign"],[174,"registered sign"],[8482,"trade mark sign"],[8240,"per mille sign"],[181,"micro sign"],[183,"middle dot"],[8226,"bullet"],[8230,"three dot leader"],[8242,"minutes / feet"],[8243,"seconds / inches"],[167,"section sign"],[182,"paragraph sign"],[223,"sharp s / ess-zed"]]},{name:"Quotations",characters:[[8249,"single left-pointing angle quotation mark"],[8250,"single right-pointing angle quotation mark"],[171,"left pointing guillemet"],[187,"right pointing guillemet"],[8216,"left single quotation mark"],[8217,"right single quotation mark"],[8220,"left double quotation mark"],[8221,"right double quotation mark"],[8218,"single low-9 quotation mark"],[8222,"double low-9 quotation mark"],[60,"less-than sign"],[62,"greater-than sign"],[8804,"less-than or equal to"],[8805,"greater-than or equal to"],[8211,"en dash"],[8212,"em dash"],[175,"macron"],[8254,"overline"],[164,"currency sign"],[166,"broken bar"],[168,"diaeresis"],[161,"inverted exclamation mark"],[191,"turned question mark"],[710,"circumflex accent"],[732,"small tilde"],[176,"degree sign"],[8722,"minus sign"],[177,"plus-minus sign"],[247,"division sign"],[8260,"fraction slash"],[215,"multiplication sign"],[185,"superscript one"],[178,"superscript two"],[179,"superscript three"],[188,"fraction one quarter"],[189,"fraction one half"],[190,"fraction three quarters"]]},{name:"Mathematical",characters:[[402,"function / florin"],[8747,"integral"],[8721,"n-ary sumation"],[8734,"infinity"],[8730,"square root"],[8764,"similar to"],[8773,"approximately equal to"],[8776,"almost equal to"],[8800,"not equal to"],[8801,"identical to"],[8712,"element of"],[8713,"not an element of"],[8715,"contains as member"],[8719,"n-ary product"],[8743,"logical and"],[8744,"logical or"],[172,"not sign"],[8745,"intersection"],[8746,"union"],[8706,"partial differential"],[8704,"for all"],[8707,"there exists"],[8709,"diameter"],[8711,"backward difference"],[8727,"asterisk operator"],[8733,"proportional to"],[8736,"angle"]]},{name:"Extended Latin",characters:[[192,"A - grave"],[193,"A - acute"],[194,"A - circumflex"],[195,"A - tilde"],[196,"A - diaeresis"],[197,"A - ring above"],[256,"A - macron"],[198,"ligature AE"],[199,"C - cedilla"],[200,"E - grave"],[201,"E - acute"],[202,"E - circumflex"],[203,"E - diaeresis"],[274,"E - macron"],[204,"I - grave"],[205,"I - acute"],[206,"I - circumflex"],[207,"I - diaeresis"],[298,"I - macron"],[208,"ETH"],[209,"N - tilde"],[210,"O - grave"],[211,"O - acute"],[212,"O - circumflex"],[213,"O - tilde"],[214,"O - diaeresis"],[216,"O - slash"],[332,"O - macron"],[338,"ligature OE"],[352,"S - caron"],[217,"U - grave"],[218,"U - acute"],[219,"U - circumflex"],[220,"U - diaeresis"],[362,"U - macron"],[221,"Y - acute"],[376,"Y - diaeresis"],[562,"Y - macron"],[222,"THORN"],[224,"a - grave"],[225,"a - acute"],[226,"a - circumflex"],[227,"a - tilde"],[228,"a - diaeresis"],[229,"a - ring above"],[257,"a - macron"],[230,"ligature ae"],[231,"c - cedilla"],[232,"e - grave"],[233,"e - acute"],[234,"e - circumflex"],[235,"e - diaeresis"],[275,"e - macron"],[236,"i - grave"],[237,"i - acute"],[238,"i - circumflex"],[239,"i - diaeresis"],[299,"i - macron"],[240,"eth"],[241,"n - tilde"],[242,"o - grave"],[243,"o - acute"],[244,"o - circumflex"],[245,"o - tilde"],[246,"o - diaeresis"],[248,"o slash"],[333,"o macron"],[339,"ligature oe"],[353,"s - caron"],[249,"u - grave"],[250,"u - acute"],[251,"u - circumflex"],[252,"u - diaeresis"],[363,"u - macron"],[253,"y - acute"],[254,"thorn"],[255,"y - diaeresis"],[563,"y - macron"],[913,"Alpha"],[914,"Beta"],[915,"Gamma"],[916,"Delta"],[917,"Epsilon"],[918,"Zeta"],[919,"Eta"],[920,"Theta"],[921,"Iota"],[922,"Kappa"],[923,"Lambda"],[924,"Mu"],[925,"Nu"],[926,"Xi"],[927,"Omicron"],[928,"Pi"],[929,"Rho"],[931,"Sigma"],[932,"Tau"],[933,"Upsilon"],[934,"Phi"],[935,"Chi"],[936,"Psi"],[937,"Omega"],[945,"alpha"],[946,"beta"],[947,"gamma"],[948,"delta"],[949,"epsilon"],[950,"zeta"],[951,"eta"],[952,"theta"],[953,"iota"],[954,"kappa"],[955,"lambda"],[956,"mu"],[957,"nu"],[958,"xi"],[959,"omicron"],[960,"pi"],[961,"rho"],[962,"final sigma"],[963,"sigma"],[964,"tau"],[965,"upsilon"],[966,"phi"],[967,"chi"],[968,"psi"],[969,"omega"]]},{name:"Symbols",characters:[[8501,"alef symbol"],[982,"pi symbol"],[8476,"real part symbol"],[978,"upsilon - hook symbol"],[8472,"Weierstrass p"],[8465,"imaginary part"]]},{name:"Arrows",characters:[[8592,"leftwards arrow"],[8593,"upwards arrow"],[8594,"rightwards arrow"],[8595,"downwards arrow"],[8596,"left right arrow"],[8629,"carriage return"],[8656,"leftwards double arrow"],[8657,"upwards double arrow"],[8658,"rightwards double arrow"],[8659,"downwards double arrow"],[8660,"left right double arrow"],[8756,"therefore"],[8834,"subset of"],[8835,"superset of"],[8836,"not a subset of"],[8838,"subset of or equal to"],[8839,"superset of or equal to"],[8853,"circled plus"],[8855,"circled times"],[8869,"perpendicular"],[8901,"dot operator"],[8968,"left ceiling"],[8969,"right ceiling"],[8970,"left floor"],[8971,"right floor"],[9001,"left-pointing angle bracket"],[9002,"right-pointing angle bracket"],[9674,"lozenge"],[9824,"black spade suit"],[9827,"black club suit"],[9829,"black heart suit"],[9830,"black diamond suit"],[8194,"en space"],[8195,"em space"],[8201,"thin space"],[8204,"zero width non-joiner"],[8205,"zero width joiner"],[8206,"left-to-right mark"],[8207,"right-to-left mark"]]}])).length?[{name:"All",characters:function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!y(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);w.apply(t,e[n])}return t}(s(e,function(e){return e.characters}))}].concat(e):e}function f(e){var t=e;return{get:function(){return t},set:function(e){t=e}}}function d(e,t){return-1!==e.indexOf(t)}function m(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(k)return k.apply(void 0,e);for(var n=[],r="",o=0,i=e.length;o!==i;++o){var a=+e[o];if(!(a<1114111&&a>>>0===a))throw RangeError("Invalid code point: "+a);16383<=(a<=65535?n.push(a):(a-=65536,n.push(55296+(a>>10),a%1024+56320)))&&(r+=String.fromCharCode.apply(null,n),n.length=0)}return r+String.fromCharCode.apply(null,n)}function g(e,t){var u=[],c=t.toLowerCase();return function(e){for(var t,n,r,o,i=0,a=e.length;i<a;i++)t=e[i],o=r=n=void 0,n=t[0],r=t[1],o=c,(d(m(n).toLowerCase(),o)||d(r.toLowerCase(),o)||d(r.toLowerCase().replace(/\s+/g,""),o))&&u.push(t)}(e.characters),s(u,function(e){return{text:e[1],value:m(e[0]),icon:m(e[0])}})}function p(n,o){function t(){return[{label:"Search",type:"input",name:O},{type:"collection",name:"results"}]}var r,i,a=1===o.length?f(C):f("All"),u=(r=function(e){var t=e.getData().pattern,n=e,r=t;(function(e,t,n){for(var r=0,o=e.length;r<o;r++){var i=e[r];if(t(i,r))return b.some(i);if(n(i,r))break}return b.none()})(o,function(e){return e.name===a.get()},h).each(function(e){e=g(e,r);n.setData({results:e})})},i=null,{cancel:function(){null!==i&&(clearTimeout(i),i=null)},throttle:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];null!==i&&clearTimeout(i),i=setTimeout(function(){r.apply(null,e),i=null},40)}}),e={title:"Special Character",size:"normal",body:1===o.length?{type:"panel",items:t()}:{type:"tabpanel",tabs:s(o,function(e){return{title:e.name,name:e.name,items:t()}})},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{pattern:"",results:g(o[0],"")},onAction:function(e,t){"results"===t.name&&(c(n,t.value),e.close())},onTabChange:function(e,t){a.set(t.newTabName),u.throttle(e)},onChange:function(e,t){t.name===O&&u.throttle(e)}};n.windowManager.open(e).focus(O)}var t,n,o=tinymce.util.Tools.resolve("tinymce.PluginManager"),h=i(!1),a=i(!0),u={fold:function(e,t){return e()},is:h,isSome:h,isNone:a,getOr:n=function(e){return e},getOrThunk:t=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:i(null),getOrUndefined:i(void 0),or:n,orThunk:t,map:e,each:function(){},bind:e,exists:h,forall:a,filter:e,equals:t=function(e){return e.isNone()},equals_:t,toArray:function(){return[]},toString:i("none()")},v=function(n){function e(){return o}function t(e){return e(n)}var r=i(n),o={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:a,isNone:h,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return v(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:u},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(h,function(e){return t(n,e)})}};return o},b={some:v,none:e,from:function(e){return null==e?u:v(e)}},y=function(e){return e=typeof(t=e),"array"==(null===t?"null":"object"==e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"==e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e);var t},w=Array.prototype.push,x=tinymce.util.Tools.resolve("tinymce.util.Tools"),S=x.isArray,C="User Defined",k=String.fromCodePoint,O="pattern",T=tinymce.util.Tools.resolve("tinymce.util.Promise");o.add("charmap",function(e){var t,n,r,o,i,a=l(e),u=a;return(t=e).addCommand("mceShowCharmap",function(){p(t,u)}),(n=e).ui.registry.addButton("charmap",{icon:"insert-character",tooltip:"Special character",onAction:function(){return n.execCommand("mceShowCharmap")}}),n.ui.registry.addMenuItem("charmap",{icon:"insert-character",text:"Special character...",onAction:function(){return n.execCommand("mceShowCharmap")}}),r=e,o=a[0],r.ui.registry.addAutocompleter("charmap",{ch:":",columns:"auto",minChars:2,fetch:function(n,e){return new T(function(e,t){e(g(o,n))})},onAction:function(e,t,n){r.selection.setRng(t),r.insertContent(n),e.hide()}}),i=e,{getCharMap:function(){return l(i)},insertChar:function(e){c(i,e)}}})}(),function(){"use strict";tinymce.util.Tools.resolve("tinymce.PluginManager").add("hr",function(e){var t,n;(t=e).addCommand("InsertHorizontalRule",function(){t.execCommand("mceInsertContent",!1,"<hr />")}),(n=e).ui.registry.addButton("hr",{icon:"horizontal-rule",tooltip:"Horizontal line",onAction:function(){return n.execCommand("InsertHorizontalRule")}}),n.ui.registry.addMenuItem("hr",{icon:"horizontal-rule",text:"Horizontal line",onAction:function(){return n.execCommand("InsertHorizontalRule")}})})}(),function(){"use strict";function r(e,t){for(var n="",r=0;r<t;r++)n+=e;return n}function i(e,t){var n=e.getParam("nonbreaking_wrap",!0,"boolean")||e.plugins.visualchars?'<span class="'+(e.plugins.visualchars&&e.plugins.visualchars.isEnabled()?"mce-nbsp-wrap mce-nbsp":"mce-nbsp-wrap")+'" contenteditable="false">'+r("&nbsp;",t)+"</span>":r("&nbsp;",t);e.undoManager.transact(function(){return e.insertContent(n)})}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),a=tinymce.util.Tools.resolve("tinymce.util.VK");e.add("nonbreaking",function(e){var t,n,r,o;(t=e).addCommand("mceNonBreaking",function(){i(t,1)}),(n=e).ui.registry.addButton("nonbreaking",{icon:"non-breaking",tooltip:"Nonbreaking space",onAction:function(){return n.execCommand("mceNonBreaking")}}),n.ui.registry.addMenuItem("nonbreaking",{icon:"non-breaking",text:"Nonbreaking space",onAction:function(){return n.execCommand("mceNonBreaking")}}),0<(o="boolean"==typeof(e=(r=e).getParam("nonbreaking_force_tab",0))?!0===e?3:0:e)&&r.on("keydown",function(e){e.keyCode!==a.TAB||e.isDefaultPrevented()||e.shiftKey||(e.preventDefault(),e.stopImmediatePropagation(),i(r,o))})})}(),function(){"use strict";function a(e,t,n){t="UL"===t?"InsertUnorderedList":"InsertOrderedList",e.execCommand(t,!1,!1===n?null:{"list-style-type":n})}function i(e){return function(){return e}}function u(e){return e&&/^(TH|TD)$/.test(e.nodeName)}function s(e,t,n){var r,o=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}(t.parents,u),t=-1!==o?t.parents.slice(0,o):t.parents;return 0<(e=c.grep(t,(r=e,function(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)&&(e=e,r.$.contains(r.getBody(),e))}))).length&&e[0].nodeName===n}function l(r,e,t,n,o,i){r.ui.registry.addSplitButton(e,{tooltip:t,icon:"OL"===o?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:function(e){e(c.map(i,function(e){return{type:"choiceitem",value:"default"===e?"":e,icon:"list-"+("OL"===o?"num":"bull")+"-"+("disc"===e||"decimal"===e?"default":e),text:e.replace(/\-/g," ").replace(/\b\w/g,function(e){return e.toUpperCase()})}}))},onAction:function(){return r.execCommand(n)},onItemAction:function(e,t){a(r,o,t)},select:function(t){var e,n=(e=r).dom.getParent(e.selection.getNode(),"ol,ul"),n=e.dom.getStyle(n,"listStyleType");return(null==(n=n)?m:g(n)).map(function(e){return t===e}).getOr(!1)},onSetup:function(t){function e(e){t.setActive(s(r,e,o))}return r.on("NodeChange",e),function(){return r.off("NodeChange",e)}}})}function o(e,t,n,r,o,i){var a,u,c;1<i.length?l(e,t,n,r,o,i):(u=r,c=o,(a=e).ui.registry.addToggleButton(t,{active:!1,tooltip:n,icon:"OL"===c?"ordered-list":"unordered-list",onSetup:function(t){function e(e){t.setActive(s(a,e,c))}return a.on("NodeChange",e),function(){return a.off("NodeChange",e)}},onAction:function(){return a.execCommand(u)}}))}var e,t,n=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=tinymce.util.Tools.resolve("tinymce.util.Tools"),f=i(!1),d=i(!0),r=function(){return m},m={fold:function(e,t){return e()},is:f,isSome:f,isNone:d,getOr:t=function(e){return e},getOrThunk:e=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:i(null),getOrUndefined:i(void 0),or:t,orThunk:e,map:r,each:function(){},bind:r,exists:f,forall:d,filter:r,equals:r=function(e){return e.isNone()},equals_:r,toArray:function(){return[]},toString:i("none()")},g=function(n){function e(){return o}function t(e){return e(n)}var r=i(n),o={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:d,isNone:f,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return g(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:m},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(f,function(e){return t(n,e)})}};return o};n.add("advlist",function(e){var n,t,r;e.hasPlugin("lists")?(o(r=e,"numlist","Numbered list","InsertOrderedList","OL",(t=r.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman"))?t.split(/[ ,]/):[]),o(r,"bullist","Bullet list","InsertUnorderedList","UL",(r=r.getParam("advlist_bullet_styles","default,circle,square"))?r.split(/[ ,]/):[]),(n=e).addCommand("ApplyUnorderedListStyle",function(e,t){a(n,"UL",t["list-style-type"])}),n.addCommand("ApplyOrderedListStyle",function(e,t){a(n,"OL",t["list-style-type"])})):console.error("Please use the Lists plugin together with the Advanced List plugin.")})}(),function(){"use strict";function c(){}function l(e){return function(){return e}}function u(t){return function(e){return!t(e)}}function s(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r}function f(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}function d(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n}function r(e,t,n){return f(e,function(e){n=t(n,e)}),n}function m(e,t,n){for(var r=0,o=e.length;r<o;r++){var i=e[r];if(t(i,r))return Ue.some(i);if(n(i,r))break}return Ue.none()}function g(e,t){return m(e,t,Le)}function p(e,t){return function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!$e(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);Ge.apply(t,e[n])}return t}(s(e,t))}function h(e){return(e=Ke.call(e,0)).reverse(),e}function t(e,t){return 0<=t&&t<e.length?Ue.some(e[t]):Ue.none()}function v(e){return t(e,0)}function a(e){return t(e,e.length-1)}function n(){return Xe(0,0)}function b(e,t){var n=String(t).toLowerCase();return g(e,function(e){return e.search(n)})}function o(e,t){return-1!==e.indexOf(t)}function e(e){var t=e.current,n=e.version;return{current:t,version:n,isEdge:(e=function(e){return function(){return t===e}})("Edge"),isChrome:e("Chrome"),isIE:e("IE"),isOpera:e("Opera"),isFirefox:e("Firefox"),isSafari:e("Safari")}}function i(e){var t=e.current,n=e.version;return{current:t,version:n,isWindows:(e=function(e){return function(){return t===e}})("Windows"),isiOS:e("iOS"),isAndroid:e("Android"),isOSX:e("OSX"),isLinux:e("Linux"),isSolaris:e("Solaris"),isFreeBSD:e("FreeBSD"),isChromeOS:e("ChromeOS")}}function y(e,t){var n,r,o,i,a=tt.browsers(),u=tt.oses(),c=b(a,i=e).map(function(e){var t=Ye(e.versionRegexes,i);return{current:e.name,version:t}}).fold(nt,rt),s=b(u,o=e).map(function(e){var t=Ye(e.versionRegexes,o);return{current:e.name,version:t}}).fold(ot,it);return{browser:c,os:s,deviceType:(n=c,r=e,a=t,c=(u=s).isiOS()&&!0===/ipad/i.test(r),e=u.isiOS()&&!c,s=(t=u.isiOS()||u.isAndroid())||a("(pointer:coarse)"),a=c||!e&&t&&a("(min-device-width:768px)"),t=e||t&&!a,n=n.isSafari()&&u.isiOS()&&!1===/safari/i.test(r),r=!t&&!a&&!n,{isiPad:l(c),isiPhone:l(e),isTablet:l(a),isPhone:l(t),isTouch:l(s),isAndroid:u.isAndroid,isiOS:u.isiOS,isWebView:l(n),isDesktop:l(r)})}}function w(e){return window.matchMedia(e).matches}function x(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}}function S(e,t){return e.dom===t.dom}function C(e,t){return at().browser.isIE()?(r=t,o=(n=e).dom,n=r.dom,r=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(o.compareDocumentPosition(n)&r)):(e=e.dom)!==(t=t.dom)&&e.contains(t);var n,r,o}function k(e,t){if(1!==(e=e.dom).nodeType)return!1;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}function O(e,t){for(var n=dt(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}}function T(e){return 1===e.dom.nodeType}function A(e,t){var n=e.dom;O(t,function(e,t){!function(e,t,n){if(!(qe(n)||We(n)||Ve(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")}(n,t,e)})}function R(e){return r(e.dom.attributes,function(e,t){return e[t.name]=t.value,e},{})}function D(e){return Ue.from(e.dom.parentNode).map(ct)}function _(e){return s(e.dom.childNodes,ct)}function N(e,t){return e=e.dom.childNodes,Ue.from(e[t]).map(ct)}function P(e){return N(e,0)}function E(e){return N(e,e.dom.childNodes.length-1)}function I(t,n){D(t).each(function(e){e.dom.insertBefore(n.dom,t.dom)})}function B(e,t){e.dom.appendChild(t.dom)}function M(t,e){f(e,function(e){B(t,e)})}function L(e){null!==(e=e.dom).parentNode&&e.parentNode.removeChild(e)}function j(e){return ct(e.dom.cloneNode(!0))}function F(e,t){var n=(n=e,t=ut(t),n=R(n),A(t,n),t);return I(e,n),t=_(e),M(n,t),L(e),n}function z(e){return e&&3===e.nodeType}function U(e,t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]}function q(e,t){return e&&e.nodeName in t}function $(e,t,n){var r=e.isEmpty(t);return!(n&&0<e.select("span[data-mce-type=bookmark]",t).length)&&r}function W(e,t){return e.isChildOf(t,e.getRoot())}function H(e,t){var n,r,o,i,a=e.dom,u=e.schema.getBlockElements(),c=a.createFragment(),s=!1===(n=e.getParam("forced_root_block","p"))?"":!0===n?"p":n;if(s&&((o=a.create(s)).tagName===s.toUpperCase()&&a.setAttribs(o,e.getParam("forced_root_block_attrs",{})),q(t.firstChild,u)||c.appendChild(o)),t)for(;r=t.firstChild;){var l=r.nodeName;i||"SPAN"===l&&"bookmark"===r.getAttribute("data-mce-type")||(i=!0),q(r,u)?(c.appendChild(r),o=null):s?(o||(o=a.create(s),c.appendChild(o)),o.appendChild(r)):c.appendChild(r)}return s?i||o.appendChild(a.create("br",{"data-mce-bogus":"1"})):c.appendChild(a.create("br")),c}function V(e){k(e,"dt")&&F(e,"dd")}function K(e,t){if(z(e))return{container:e,offset:t};var n=st.getNode(e,t);return z(n)?{container:n,offset:t>=e.childNodes.length?n.data.length:0}:n.previousSibling&&z(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&z(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:e,offset:t}}function G(e){var t=e.cloneRange(),n=K(e.startContainer,e.startOffset);return t.setStart(n.container,n.offset),e=K(e.endContainer,e.endOffset),t.setEnd(e.container,e.offset),t}function Z(e,t){return t=t||e.selection.getStart(!0),e.dom.getParent(t,"OL,UL,DL",Ot(e,t))}function X(e){var t,n=e.selection.getSelectedBlocks();return pt.grep((t=e,n=pt.map(n,function(e){return t.dom.getParent(e,"li,dd,dt",Ot(t,e))||e}),kt.unique(n)),function(e){return yt(e)})}function Y(e,t){return t=e.dom.getParents(t,"ol,ul",Ot(e,t)),a(t)}function J(e,t,n){return e.isSome()&&t.isSome()?Ue.some(n(e.getOrDie(),t.getOrDie())):Ue.none()}function Q(e,t,n){return e.fire("ListMutation",{action:t,element:n})}function ee(e,t){B(e.item,t.list)}function te(e,t){for(var n=0;n<e.length-1;n++)(function(e,t,n){if(!qe(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);void 0!==e.style&&He(e.style.getPropertyValue)&&e.style.setProperty(t,n)})(e[n].item.dom,"list-style-type","none");a(e).each(function(e){A(e.list,t.listAttributes),A(e.item,t.itemAttributes),M(e.item,t.content)})}function ne(e,t,n){return function(e){for(var t=1;t<e.length;t++)ee(e[t-1],e[t])}(e=function(e,t,n){for(var r,o,i=[],a=0;a<n;a++)i.push((o=e,r=t.listType,o={list:ut(r,o),item:ut("li",o)},B(o.list,o.item),o));return i}(e,n,n.depth-t.length)),te(e,n),n=e,J(a(t),v(n),ee),t.concat(e)}function re(e){return k(e,"OL,UL")}function oe(e){return P(e).map(re).getOr(!1)}function ie(e){return 0<e.depth}function ae(e){return e.isSelected}function ue(u){return f(u,function(a,e){var t,n,r=(t=u)[n=e].depth,o=function(e){return e.depth===r&&!e.dirty},i=function(e){return e.depth<r};m(h(t.slice(0,n)),o,i).orThunk(function(){return m(t.slice(n+1),o,i)}).fold(function(){var e,t,n,r,o,i;a.dirty&&(a.listAttributes=(e=a.listAttributes,n=function(e,t){return"start"!==t},r=t={},o=function(e,t){r[t]=e},i=c,O(e,function(e,t){(n(e,t)?o:i)(e,t)}),t))},function(e){a.listType=e.listType,a.listAttributes=Ze({},e.listAttributes)})}),u}function ce(n,a,u,c){return P(c).filter(re).fold(function(){a.each(function(e){S(e.start,c)&&u.set(!0)});var r,o,i,e=(r=c,o=n,i=u.get(),D(r).filter(T).map(function(e){return{depth:o,dirty:!1,isSelected:i,content:(n=_(t=r),n=E(t).map(re).getOr(!1)?n.slice(0,-1):n,s(n,j)),itemAttributes:R(r),listAttributes:R(e),listType:mt(e)};var t,n}));a.each(function(e){S(e.end,c)&&u.set(!1)});var t=E(c).filter(re).map(function(e){return At(n,a,u,e)}).getOr([]);return e.toArray().concat(t)},function(e){return At(n,a,u,e)})}function se(e,t){var t=ue(t),n=e.contentDocument,t=r(t,function(e,t){return(t.depth>e.length?ne:function(o,e,i){e=e.slice(0,i.depth);return a(e).each(function(e){var t,n,r=(t=i.itemAttributes,r=i.content,n=ut("li",o),A(n,t),M(n,r),n);B((n=e).list,r),n.item=r,r=i,mt((e=e).list)!==r.listType&&(e.list=F(e.list,r.listType)),A(e.list,r.listAttributes)}),e})(n,e,t)},[]);return v(t).map(function(e){return e.list}).toArray()}function le(i,e,a){var t,n,r,o=(o=e,e=s(X(i),ct),t=J(g(e,u(oe)),g(h(e),u(oe)),function(e,t){return{start:e,end:t}}),n=!1,r={get:function(){return n},set:function(e){n=e}},s(o,function(e){return{sourceList:e,entries:At(0,t,r,e)}}));f(o,function(e){var t=e.entries,n=a;f(d(t,ae),function(e){return function(e){switch(n){case"Indent":e.depth++;break;case"Outdent":e.depth--;break;case"Flatten":e.depth=0}e.dirty=!0}(e),0});var r,o,t=(r=i,t=e.entries,p(function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,a=e.length;i<a;i++){var u=e[i],c=t(u);c!==n&&(r.push(o),o=[]),n=c,o.push(u)}return 0!==o.length&&r.push(o),r}(t,ie),function(e){return(v(e).map(ie).getOr(!1)?se:function(n,e){e=ue(e);return s(e,function(e){var t,e=(e=e.content,t=document.createDocumentFragment(),f(e,function(e){t.appendChild(e.dom)}),ct(t));return ct(H(n,e.dom))})})(r,e)}));f(t,function(e){Q(i,"Indent"===a?"IndentList":"OutdentList",e.dom)}),o=e.sourceList,f(t,function(e){I(o,e)}),L(e.sourceList)})}function fe(e,t){var r,n,o=s((i=Y(n=a=e,n.selection.getStart()),n=d(n.selection.getSelectedBlocks(),vt),n=i.toArray().concat(n),Tt(a,n)),ct),i=s(d(X(e),wt),ct),a=!1;return(o.length||i.length)&&(n=e.selection.getBookmark(),le(e,o,t),r=e,f(i,"Indent"===t?V:function(e){return t=r,k(n=e,"dd")?F(n,"dt"):k(n,"dt")&&D(n).each(function(e){return function(e,t,n){var r=Ct.select('span[data-mce-type="bookmark"]',t),o=H(e,n),i=Ct.createRng();i.setStartAfter(n),i.setEndAfter(t);for(var a,i=i.extractContents(),u=i.firstChild;u;u=u.firstChild)if("LI"===u.nodeName&&e.dom.isEmpty(u)){Ct.remove(u);break}e.dom.isEmpty(i)||Ct.insertAfter(i,t),Ct.insertAfter(o,t),$(e.dom,n.parentNode)&&(a=n.parentNode,pt.each(r,function(e){a.parentNode.insertBefore(e,n.parentNode)}),Ct.remove(a)),Ct.remove(n),$(e.dom,t)&&Ct.remove(t)}(t,e.dom,n.dom)}),0;var t,n}),e.selection.moveToBookmark(n),e.selection.setRng(G(e.selection.getRng())),e.nodeChanged(),a=!0),a}function de(e){return fe(e,"Indent")}function me(e){return fe(e,"Outdent")}function ge(e){return fe(e,"Flatten")}function pe(o){function e(e){var t,n=o[e?"startContainer":"endContainer"],r=o[e?"startOffset":"endOffset"];1===n.nodeType&&(t=Dt.create("span",{"data-mce-type":"bookmark"}),n.hasChildNodes()?(r=Math.min(r,n.childNodes.length-1),e?n.insertBefore(t,n.childNodes[r]):Dt.insertAfter(t,n.childNodes[r])):n.appendChild(t),n=t,r=0),i[e?"startContainer":"endContainer"]=n,i[e?"startOffset":"endOffset"]=r}var i={};return e(!0),o.collapsed||e(),i}function he(o){var e=function(e){var t,n=t=o[e?"startContainer":"endContainer"],r=o[e?"startOffset":"endOffset"];n&&(1===n.nodeType&&(r=function(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t===e)return n;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1}(n),n=n.parentNode,Dt.remove(t),!n.hasChildNodes()&&Dt.isBlock(n)&&n.appendChild(Dt.create("br"))),o[e?"startContainer":"endContainer"]=n,o[e?"startOffset":"endOffset"]=r)};return e(!0),e(),(e=Dt.createRng()).setStart(o.startContainer,o.startOffset),o.endContainer&&e.setEnd(o.endContainer,o.endOffset),G(e)}function ve(e){switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}}function be(e){return/\btox\-/.test(e.className)}function ye(e,t,n){function r(e){e=m(e.parents,ht,xt).filter(function(e){return e.nodeName===t&&!be(e)}).isSome(),n(e)}var o=e.dom.getParents(e.selection.getNode());return r({parents:o}),e.on("NodeChange",r),function(){return e.off("NodeChange",r)}}function we(n,e){pt.each(e,function(e,t){n.setAttribute(t,e)})}function xe(e,t,n){var r,o=n["list-style-type"]?n["list-style-type"]:null;e.setStyle(t,"list-style-type",o),e=e,we(t=t,(r=n)["list-attributes"]),pt.each(e.select("li",t),function(e){we(e,r["list-item-attributes"])})}function Se(e,t,n,r){var o=t[n?"startContainer":"endContainer"],t=t[n?"startOffset":"endOffset"];for(1===o.nodeType&&(o=o.childNodes[Math.min(t,o.childNodes.length-1)]||o),!n&&St(o.nextSibling)&&(o=o.nextSibling);o.parentNode!==r;){if(U(e,o))return o;if(/^(TD|TH)$/.test(o.parentNode.nodeName))return o;o=o.parentNode}return o}function Ce(a,u,c){void 0===c&&(c={});var e,t=a.selection.getRng(),s="LI",n=Ot(a,a.selection.getStart(!0)),l=a.dom;"false"!==l.getContentEditable(a.selection.getNode())&&("DL"===(u=u.toUpperCase())&&(s="DT"),e=pe(t),n=function(n,e,r){for(var o,i=[],a=n.dom,t=Se(n,e,!0,r),u=Se(n,e,!1,r),c=[],s=t;s&&(c.push(s),s!==u);s=s.nextSibling);return pt.each(c,function(e){if(U(n,e))return i.push(e),void(o=null);if(a.isBlock(e)||St(e))return St(e)&&a.remove(e),void(o=null);var t=e.nextSibling;Rt.isBookmarkNode(e)&&(ht(t)||U(n,t)||!t&&e.parentNode===r)?o=null:(o||(o=a.create("p"),e.parentNode.insertBefore(o,e),i.push(o)),o.appendChild(e))}),i}(a,t,n),pt.each(n,function(e){var t,n,r,o=e.previousSibling,i=e.parentNode;yt(i)||(o&&ht(o)&&o.nodeName===u&&(i=c,l.getStyle(o,"list-style-type")===(i=null===(i=i?i["list-style-type"]:"")?"":i))?(t=o,e=l.rename(e,s),o.appendChild(e)):(t=l.create(u),e.parentNode.insertBefore(t,e),t.appendChild(e),e=l.rename(e,s)),n=l,r=e,e=["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"],pt.each(e,function(e){var t;return n.setStyle(r,((t={})[e]="",t))}),xe(l,t,c),_t(a.dom,t))}),a.selection.setRng(he(e)))}function ke(e,t,n){return o=n,(r=t)&&o&&ht(r)&&r.nodeName===o.nodeName&&(o=n,(e=e).getStyle(t,"list-style-type",!0)===e.getStyle(o,"list-style-type",!0))&&t.className===n.className;var r,o}function Oe(e,t,n){var r,i,o,a,u,c,s,l=Z(e),f=(r=Z(o=e),o=o.selection.getSelectedBlocks(),r&&1===o.length&&o[0]===r?pt.grep(r.querySelectorAll("ol,ul,dl"),function(e){return ht(e)}):pt.grep(o,function(e){return ht(e)&&r!==e}));n=n||{},0<f.length?(i=e,a=f,u=t,c=n,(f=ht(o=l))&&o.nodeName===u&&!Nt(c)?ge(i):(Ce(i,u,c),s=pe(i.selection.getRng(!0)),a=f?function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r}([o],a):a,pt.each(a,function(e){var t,n=i,r=u,o=c;(t=e).nodeName!==r?(e=n.dom.rename(t,r),xe(n.dom,e,o),Q(n,ve(r),e)):(xe(n.dom,t,o),Q(n,ve(r),t))}),i.selection.setRng(he(s)))):(a=t,s=n,(t=l)!==(n=e).getBody()&&(t?t.nodeName!==a||Nt(s)||be(t)?(l=pe(n.selection.getRng(!0)),xe(n.dom,t,s),e=n.dom.rename(t,a),_t(n.dom,e),n.selection.setRng(he(l)),Ce(n,a,s),Q(n,ve(a),e)):ge(n):(Ce(n,a,s),Q(n,ve(a),t))))}function Te(e,t,n,r){var o=t.startContainer,t=t.startOffset;if(z(o)&&(n?t<o.data.length:0<t))return o;var i=e.schema.getNonEmptyElements();1===o.nodeType&&(o=st.getNode(o,t));var a=new lt(o,r);for(n&&(r=e.dom,St(e=o)&&r.isBlock(e.nextSibling)&&!St(e.previousSibling)&&a.next());o=a[n?"next":"prev2"]();){if("LI"===o.nodeName&&!o.hasChildNodes())return o;if(i[o.nodeName])return o;if(z(o)&&0<o.data.length)return o}}function Ae(e,t){return 1===(t=t.childNodes).length&&!ht(t[0])&&e.isBlock(t[0])}function Re(t,e,n){var r,o=e.parentNode;W(t,e)&&W(t,n)&&(ht(n.lastChild)&&(r=n.lastChild),o===n.lastChild&&St(o.previousSibling)&&t.remove(o.previousSibling),(o=n.lastChild)&&St(o)&&e.hasChildNodes()&&t.remove(o),$(t,n,!0)&&t.$(n).empty(),function(e,t,n){var r,o,i=Ae(e,n)?n.firstChild:n;if(Ae(o=e,n=t)&&o.remove(n.firstChild,!0),!$(e,t,!0))for(;r=t.firstChild;)i.appendChild(r)}(t,e,n),r&&n.appendChild(r),n=C(ct(n),ct(e))?t.getParents(e,ht,n):[],t.remove(e),f(n,function(e){$(t,e)&&e!==t.getRoot()&&t.remove(e)}))}function De(c,s){var e=c.dom,t=c.selection,n=t.getStart(),r=Ot(c,n),l=e.getParent(t.getStart(),"LI",r);if(l){n=l.parentNode;if(n===c.getBody()&&$(e,n))return!0;var f=G(t.getRng()),d=e.getParent(Te(c,f,s,r),"LI",r);if(d&&d!==l)return c.undoManager.transact(function(){var e,t,n,r,o,i,a,u;s?(t=f,n=d,r=l,(u=(e=c).dom).isEmpty(r)?(i=n,a=r,(o=e).dom.$(a).empty(),Re(o.dom,i,a),o.selection.setCursorLocation(a,0)):(t=pe(t),Re(u,n,r),e.selection.setRng(he(t)))):l.parentNode.firstChild===l?me(c):(n=c,r=l,e=d,t=pe(f),Re(n.dom,r,e),t=he(t),n.selection.setRng(t))}),!0;if(!d&&!s&&0===f.startOffset&&0===f.endOffset)return c.undoManager.transact(function(){ge(c)}),!0}return!1}function _e(e,t){return e.selection.isCollapsed()?De(r=e,o=t)||function(r,o){var i=r.dom,e=r.selection.getStart(),a=Ot(r,e),u=i.getParent(e,i.isBlock,a);if(u&&i.isEmpty(u)){var e=G(r.selection.getRng()),c=i.getParent(Te(r,e,o,a),"LI",a);if(c)return r.undoManager.transact(function(){var e,t=u,n=(e=i).getParent(t.parentNode,e.isBlock,a);e.remove(t),n&&e.isEmpty(n)&&e.remove(n),_t(i,c.parentNode),r.selection.select(c,!0),r.selection.collapse(o)}),!0}return!1}(r,o):(o=(n=e).selection.getStart(),e=Ot(n,o),!!(n.dom.getParent(o,"LI,DT,DD",e)||0<X(n).length)&&(n.undoManager.transact(function(){var o,e;n.execCommand("Delete"),o=n.dom,e=n.getBody(),pt.each(pt.grep(o.select("ol,ul",e)),function(e){var t,n,r=o;"LI"===(e=(t=e).parentNode).nodeName&&e.firstChild===t&&((n=e.previousSibling)&&"LI"===n.nodeName?(n.appendChild(t),$(r,e)&&Pt.remove(e)):Pt.setStyle(e,"listStyleType","none")),ht(e)&&(n=e.previousSibling)&&"LI"===n.nodeName&&n.appendChild(t)})}),!0));var n,r,o}function Ne(n){var r=n.dom,e=Z(n);bt(e)&&n.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:r.getAttrib(e,"start")||"1"},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(e){var t=e.getData();n.undoManager.transact(function(){r.setAttrib(Z(n),"start","1"===t.start?"":t.start)}),e.close()}})}function Pe(t,n){return function(){var e=t.dom.getParent(t.selection.getStart(),"UL,OL,DL");return e&&e.nodeName===n}}var Ee,Ie,Be,Me=tinymce.util.Tools.resolve("tinymce.PluginManager"),Le=l(!1),je=l(!0),Fe={fold:function(e,t){return e()},is:Le,isSome:Le,isNone:je,getOr:Qe=function(e){return e},getOrThunk:gt=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:l(null),getOrUndefined:l(void 0),or:Qe,orThunk:gt,map:et=function(){return Fe},each:c,bind:et,exists:Le,forall:je,filter:et,equals:Qe=function(e){return e.isNone()},equals_:Qe,toArray:function(){return[]},toString:l("none()")},ze=function(n){function e(){return o}function t(e){return e(n)}var r=l(n),o={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:je,isNone:Le,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return ze(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:Fe},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(Le,function(e){return t(n,e)})}};return o},Ue={some:ze,none:et,from:function(e){return null==e?Fe:ze(e)}},qe=(gt=function(n){return function(e){return e=typeof(t=e),(null===t?"null":"object"==e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"==e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e)===n;var t}})("string"),$e=gt("array"),We=(Qe=function(t){return function(e){return typeof e===t}})("boolean"),He=Qe("function"),Ve=Qe("number"),Ke=Array.prototype.slice,Ge=Array.prototype.push,Ze=function(){return(Ze=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Xe=function(e,t){return{major:e,minor:t}},Ye=function(e,t){t=String(t).toLowerCase();return 0===e.length?n():function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(e,t);if(!n)return{major:0,minor:0};e=function(e){return Number(t.replace(n,"$"+e))};return Xe(e(1),e(2))}(e,t)},Je=n,Qe=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return o(e,"edge/")&&o(e,"chrome")&&o(e,"safari")&&o(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,et=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/],search:function(e){return o(e,"chrome")&&!o(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return o(e,"msie")||o(e,"trident")}},{name:"Opera",versionRegexes:[et,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:(gt=function(t){return function(e){return o(e,t)}})("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:gt("firefox")},{name:"Safari",versionRegexes:[et,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(o(e,"safari")||o(e,"mobile/"))&&o(e,"applewebkit")}}],et=[{name:"Windows",search:gt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return o(e,"iphone")||o(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:gt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:gt("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:gt("linux"),versionRegexes:[]},{name:"Solaris",search:gt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:gt("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:gt("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],tt={browsers:l(Qe),oses:l(et)},nt=function(){return e({current:void 0,version:Je()})},rt=e,ot=(l("Edge"),l("Chrome"),l("IE"),l("Opera"),l("Firefox"),l("Safari"),function(){return i({current:void 0,version:Je()})}),it=i,at=(l("Windows"),l("iOS"),l("Android"),l("Linux"),l("OSX"),l("Solaris"),l("FreeBSD"),l("ChromeOS"),Be=!(Ee=function(){return y(navigator.userAgent,w)}),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Be||(Be=!0,Ie=Ee.apply(null,e)),Ie}),ut=function(e,t){e=(t||document).createElement(e);return x(e)},ct=x,st=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),lt=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),ft=tinymce.util.Tools.resolve("tinymce.util.VK"),dt=Object.keys,mt=("undefined"!=typeof window||Function("return this;")(),function(e){return e.dom.nodeName.toLowerCase()}),gt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),pt=tinymce.util.Tools.resolve("tinymce.util.Tools"),Qe=function(t){return function(e){return e&&e.nodeName.toLowerCase()===t}},ht=(et=function(t){return function(e){return e&&t.test(e.nodeName)}})(/^(OL|UL|DL)$/),vt=et(/^(OL|UL)$/),bt=Qe("ol"),yt=et(/^(LI|DT|DD)$/),wt=et(/^(DT|DD)$/),xt=et(/^(TH|TD)$/),St=Qe("br"),Ct=gt.DOM,kt=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),Ot=function(e,t){t=e.dom.getParents(t,"TD,TH");return 0<t.length?t[0]:e.getBody()},Tt=function(t,e){e=s(e,function(e){return Y(t,e).getOr(e)});return kt.unique(e)},At=function(t,n,r,e){return p(_(e),function(e){return(re(e)?At:ce)(t+1,n,r,e)})},Rt=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),Dt=gt.DOM,_t=function(e,t){var n,r=t.nextSibling;if(ke(e,t,r)){for(;n=r.firstChild;)t.appendChild(n);e.remove(r)}if(r=t.previousSibling,ke(e,t,r)){for(;n=r.lastChild;)t.insertBefore(n,t.firstChild);e.remove(r)}},Nt=function(e){return"list-style-type"in e},Pt=gt.DOM;Me.add("lists",function(e){var n,t,r,o,i,a,u;return!1===e.hasPlugin("rtc",!0)&&((i=e).getParam("lists_indent_on_tab",!0)&&(a=i).on("keydown",function(e){e.keyCode!==ft.TAB||ft.metaKeyPressed(e)||a.undoManager.transact(function(){(e.shiftKey?me:de)(a)&&e.preventDefault()})}),(u=i).on("keydown",function(e){e.keyCode===ft.BACKSPACE?_e(u,!1)&&e.preventDefault():e.keyCode===ft.DELETE&&_e(u,!0)&&e.preventDefault()}),(n=e).on("BeforeExecCommand",function(e){e=e.command.toLowerCase();"indent"===e?de(n):"outdent"===e&&me(n)}),n.addCommand("InsertUnorderedList",function(e,t){Oe(n,"UL",t)}),n.addCommand("InsertOrderedList",function(e,t){Oe(n,"OL",t)}),n.addCommand("InsertDefinitionList",function(e,t){Oe(n,"DL",t)}),n.addCommand("RemoveList",function(){ge(n)}),n.addCommand("mceListProps",function(){Ne(n)}),n.addQueryStateHandler("InsertUnorderedList",Pe(n,"UL")),n.addQueryStateHandler("InsertOrderedList",Pe(n,"OL")),n.addQueryStateHandler("InsertDefinitionList",Pe(n,"DL"))),i=function(e){return function(){return t.execCommand(e)}},(t=e).hasPlugin("advlist")||(t.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:i("InsertOrderedList"),onSetup:function(e){return ye(t,"OL",e.setActive)}}),t.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:i("InsertUnorderedList"),onSetup:function(e){return ye(t,"UL",e.setActive)}})),i={text:"List properties...",icon:"ordered-list",onAction:function(){return Ne(r)},onSetup:function(t){return ye(r,"OL",function(e){return t.setDisabled(!e)})}},(r=e).ui.registry.addMenuItem("listprops",i),r.ui.registry.addContextMenu("lists",{update:function(e){e=Z(r,e);return bt(e)?["listprops"]:[]}}),o=e,{backspaceDelete:function(e){_e(o,e)}}})}(),function(){"use strict";function n(e){return e}function l(e){for(var t=13,n=y.length,r=0;r<n;++r){var o=y[r];if(o&&o.test(e)){t=r;break}}return t}function f(e,t,n,r){for(var o,i,a,u,c=[],s=[],l=0;l<n.length;++l)s.push(e[l]),function(e,t){var n=e[t],r=e[t+1];if(!(t<0||t>e.length-1&&0!==t||0===n&&0===r)){var o=e[t+2];if(0!==n||2!==r&&1!==r&&12!==r||0!==o){t=e[t-1];return(2!==n&&1!==n&&12!==r||0!==r||0!==t)&&(4!==n&&0!==n||4!==r&&0!==r)&&(3!==n&&1!==n||4!==r||4!==t)&&(4!==n||3!==r&&1!==r||4!==o)&&8!==n&&9!==n&&8!==t&&9!==t&&8!==r&&9!==r&&(5!==n||6!==r)&&(7===n||5===n||6===n||7===r||5===r||6===r||(10!==n||10!==r)&&(11!==r||0!==n&&4!==n&&10!==n&&11!==n)&&(11!==n||0!==r&&4!==r&&10!==r)&&12!==n)}}}(n,l)&&(i=t[l],!r.includeWhitespace&&w.test(i)||!r.includePunctuation&&x.test(i)||(u=l-s.length+1,o=l+1,"http"!==(i=t.slice(u,o).join(""))&&"https"!==i||(a=l,u=void 0,u=function(e){for(var t=a+1;t<e.length&&!w.test(e[t]);t++);return t}(i=t),u="://"===i.slice(a+1,u).join("").substr(0,3)?u:a,o=e.slice(o,u),Array.prototype.push.apply(s,o),l=u),c.push(s)),s=[]);return c}function r(e,t,n){n=b(b({},{includeWhitespace:!1,includePunctuation:!1}),n);for(var r=[],o=[],i=0;i<e.length;i++){var a=t(e[i]);"\ufeff"!==a&&(r.push(e[i]),o.push(a))}var u,c,s=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r}(o,(u=l,c={},function(e){if(c[e])return c[e];var t=u(e);return c[e]=t}));return f(r,o,s,n)}function o(e,t){for(var n=t.getBlockElements(),r=t.getShortEndedElements(),o=[],i="",a=new S(e,e);e=a.next();)3===e.nodeType?i+=e.data.replace(/\uFEFF/g,""):(n[e.nodeName]||r[e.nodeName])&&i.length&&(o.push(i),i="");return i.length&&o.push(i),o}function i(e){return e.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length}function u(e,t){return t=o(e,t).join("\n"),r(t.split(""),n).length}function c(e,t){return t=o(e,t).join(""),i(t)}function s(e,t){return t=o(e,t).join("").replace(/\s/g,""),i(t)}function d(e,t){return function(){return t(e.getBody(),e.schema)}}function m(e,t){return function(){return t(e.selection.getRng().cloneContents(),e.schema)}}function g(e){return d(e,u)}function p(e,t){e.fire("wordCountUpdate",{wordCount:{words:t.body.getWordCount(),characters:t.body.getCharacterCount(),charactersWithoutSpaces:t.body.getCharacterCountWithoutSpaces()}})}function h(e,t){e.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(t.body.getWordCount()),String(t.selection.getWordCount())],["Characters (no spaces)",String(t.body.getCharacterCountWithoutSpaces()),String(t.selection.getCharacterCountWithoutSpaces())],["Characters",String(t.body.getCharacterCount()),String(t.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})}var v,e=tinymce.util.Tools.resolve("tinymce.PluginManager"),b=function(){return(b=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},t=[new RegExp("[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-׳ؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆༀཀ-ཇཉ-ཬྈ-ྌႠ-Ⴥა-ჺჼᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᨀ-ᨖᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᯀ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⴀ-ⴥⴰ-ⵥⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〻〼ㄅ-ㄭㄱ-ㆎㆠ-ㆺꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐꞑꞠ-ꞩꟺ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),new RegExp("[-'\\.‘’․﹒＇．]"),new RegExp("[:··״‧︓﹕：]"),new RegExp("[±+*/,;;։،؍٬߸⁄︐︔﹐﹔，；]"),new RegExp("[0-9٠-٩٫۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹]"),new RegExp("\\r"),new RegExp("\\n"),new RegExp("[\v\f\u2028\u2029]"),new RegExp("[̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ऀ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఁ-ఃా-ౄె-ైొ-్ౕౖౢౣಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣംഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳា-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈᧉᨗ-ᨛᩕ-ᩞ᩠-᩿᩼ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-᯦᮪-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ᷀-ᷦ᷼-᷿‌‍⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲꙼꙽꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꨩ-ꨶꩃꩌꩍꩻꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︦ﾞﾟ]"),new RegExp("[­؀-؃۝܏឴឵‎‏‪-‮⁠-⁤⁪-⁯\ufeff￹-￻]"),new RegExp("[〱-〵゛゜゠-ヺー-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ﾝ]"),new RegExp("[=_‿⁀⁔︳︴﹍-﹏＿∀-⋿<>]"),new RegExp("@")],a=new RegExp("^[!-#%-*,-\\/:;?@\\[-\\]_{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]$"),y=t,w=/^\s+$/,x=a,S=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),C=tinymce.util.Tools.resolve("tinymce.util.Delay");void 0===v&&(v=300),e.add("wordcount",function(e){var t,n,r,o,i={body:{getWordCount:g(i=e),getCharacterCount:d(i,c),getCharacterCountWithoutSpaces:d(i,s)},selection:{getWordCount:m(i,u),getCharacterCount:m(i,c),getCharacterCountWithoutSpaces:m(i,s)},getCount:g(i)},a=i;return(t=e).ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:function(){return h(t,a)}}),t.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:function(){return h(t,a)}}),n=e,r=i,o=C.debounce(function(){return p(n,r)},v),n.on("init",function(){p(n,r),C.setEditorTimeout(n,function(){n.on("SetContent BeforeAddUndo Undo Redo keyup",o)},0)}),i})}(),function(){"use strict";function l(e){var t=e;return{get:function(){return t},set:function(e){t=e}}}function r(){}function a(e){return function(){return e}}function g(e){return!(null===e||void 0===e)}function s(e,t){return C(document.createElement("canvas"),e,t)}function u(e){var t=s(e.width,e.height);return S(t).drawImage(e,0,0),t}var e,t,i,o,n,c,f,d=tinymce.util.Tools.resolve("tinymce.PluginManager"),m=tinymce.util.Tools.resolve("tinymce.util.Tools"),p=a(!1),h=a(!0),v=function(){return b},b={fold:function(e,t){return e()},is:p,isSome:p,isNone:h,getOr:t=function(e){return e},getOrThunk:e=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:a(null),getOrUndefined:a(void 0),or:t,orThunk:e,map:v,each:r,bind:v,exists:p,forall:h,filter:v,equals:e=function(e){return e.isNone()},equals_:e,toArray:function(){return[]},toString:a("none()")},y=function(n){function e(){return o}function t(e){return e(n)}var r=a(n),o={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:h,isNone:p,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return y(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:b},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(p,function(e){return t(n,e)})}};return o},w={some:y,none:v,from:function(e){return null==e?b:y(e)}},x=function(e){return"function"==typeof e},S=function(e){return e.getContext("2d")},C=function(e,t,n){return e.width=t,e.height=n,e},k=window.Promise||(i=function(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],f(e,n(T,this),n(A,this))},v=window,o=i.immediateFn||"function"==typeof v.setImmediate&&v.setImmediate||function(e){return setTimeout(e,1)},n=function(n,r){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.apply(r,e)}},c=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},f=function(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(e){if(r)return;r=!0,n(e)}},i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(n,r){var o=this;return new i(function(e,t){O.call(o,new D(n,r,e,t))})},i.all=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var u=Array.prototype.slice.call(1===e.length&&c(e[0])?e[0]:e);return new i(function(r,o){if(0===u.length)return r([]);for(var i=u.length,a=function(t,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if("function"==typeof n)return void n.call(e,function(e){a(t,e)},o)}u[t]=e,0==--i&&r(u)}catch(e){o(e)}},e=0;e<u.length;e++)a(e,u[e])})},i.resolve=function(t){return t&&"object"==typeof t&&t.constructor===i?t:new i(function(e){e(t)})},i.reject=function(n){return new i(function(e,t){t(n)})},i.race=function(o){return new i(function(e,t){for(var n=0,r=o;n<r.length;n++)r[n].then(e,t)})},i);function O(n){var r=this;null!==this._state?o(function(){var e,t=r._state?n.onFulfilled:n.onRejected;if(null!==t){try{e=t(r._value)}catch(e){return void n.reject(e)}n.resolve(e)}else(r._state?n.resolve:n.reject)(r._value)}):this._deferreds.push(n)}function T(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void f(n(t,e),n(T,this),n(A,this))}this._state=!0,this._value=e,R.call(this)}catch(e){A.call(this,e)}}function A(e){this._state=!1,this._value=e,R.call(this)}function R(){for(var e=0,t=this._deferreds;e<t.length;e++){var n=t[e];O.call(this,n)}this._deferreds=[]}function D(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function _(u){return new k(function(e,t){function n(){o.removeEventListener("load",i),o.removeEventListener("error",a)}var r=URL.createObjectURL(u),o=new Image,i=function(){n(),e(o)},a=function(){n(),t("Unable to load data of type "+u.type+": "+r)};o.addEventListener("load",i),o.addEventListener("error",a),o.src=r,o.complete&&setTimeout(i,0)})}function N(d){return new k(function(e,t){(function(){var e=d.split(","),t=/data:([^;]+)/.exec(e[0]);if(!t)return w.none();for(var t=t[1],e=e[1],n=atob(e),r=n.length,o=Math.ceil(r/1024),i=new Array(o),a=0;a<o;++a){for(var u=1024*a,c=Math.min(1024+u,r),s=new Array(c-u),l=u,f=0;l<c;++f,++l)s[f]=n[l].charCodeAt(0);i[a]=new Uint8Array(s)}return w.some(new Blob(i,{type:t}))})().fold(function(){t("uri is not base64: "+d)},e)})}function P(e,r,o){return r=r||"image/png",x(HTMLCanvasElement.prototype.toBlob)?new k(function(t,n){e.toBlob(function(e){e?t(e):n()},r,o)}):N(e.toDataURL(r,o))}function E(e){return(0===(e=e.src).indexOf("data:")?N:function(r){return new k(function(e,t){var n=new XMLHttpRequest;n.open("GET",r,!0),n.responseType="blob",n.onload=function(){200===this.status&&e(this.response)},n.onerror=function(){var e;t(0===this.status?((e=new Error("No access to download image")).code=18,e.name="SecurityError",e):new Error("Error "+this.status+" downloading image"))},n.send()})})(e)}function I(e,t){return function(e,t,n){for(var r=0,o=e.length;r<o;r++){var i=e[r];if(t(i,r))return w.some(i);if(n(i,r))break}return w.none()}(e,t,p)}function B(e,t,n){function r(n,r){return e.then(function(e){return t=n||"image/png",e.toDataURL(t,r);var t})}var o=t.type,i=a(o),o=a(n);return{getType:i,toBlob:function(){return k.resolve(t)},toDataURL:o,toBase64:function(){return n.split(",")[1]},toAdjustedBlob:function(t,n){return e.then(function(e){return P(e,t,n)})},toAdjustedDataURL:r,toAdjustedBase64:function(e,t){return r(e,t).then(function(e){return e.split(",")[1]})},toCanvas:function(){return e.then(u)}}}function M(t,e){return P(t,e).then(function(e){return B(k.resolve(t),e,t.toDataURL())})}function L(e,t){return a=t,(i=e).toCanvas().then(function(e){return t=e,n=i.getType(),r=a,o=s(t.width,t.height),e=S(o),"v"===r?(e.scale(1,-1),e.drawImage(t,0,-o.height)):(e.scale(-1,1),e.drawImage(t,-o.width,0)),M(o,n);var t,n,r,o});var i,a}function j(e,t){return c=t,(u=e).toCanvas().then(function(e){return t=e,n=u.getType(),r=c,o=s(t.width,t.height),i=S(o),90!==(r=r<(e=a=0)?360+r:r)&&270!==r||C(o,o.height,o.width),90!==r&&180!==r||(a=o.width),270!==r&&180!==r||(e=o.height),i.translate(a,e),i.rotate(r*Math.PI/180),i.drawImage(t,0,0),M(o,n);var t,n,r,o,i,a});var u,c}function F(t,n,r){return void 0===r&&(r=!1),new k(function(e){var a=new XMLHttpRequest;a.onreadystatechange=function(){4===a.readyState&&e({status:a.status,blob:a.response})},a.open("GET",t,!0),a.withCredentials=r,function(e){for(var t,n=me(e),r=0,o=n.length;r<o;r++){var i=n[r];t=e[i],i=i,a.setRequestHeader(i,t)}}(n),a.responseType="blob",a.send()})}function z(e,t){var o,i,t=(o=function(e,t){return g(e)?e[t]:void 0},i=e,function(e){for(var t,n=0,r=e.length;n<r;n++)t=e[n],i=o(i,t)}(t),i);return w.from(t)}function U(e){var t,e=(t=e,"ImageProxy HTTP error: "+I(ge,function(e){return t===e.code}).fold(a("Unknown ImageProxy error"),function(e){return e.message}));return k.reject(e)}function q(t){return I(pe,function(e){return e.type===t}).fold(a("Unknown service error"),function(e){return e.message})}function $(e){return r=e,new k(function(e,t){var n=new FileReader;n.onload=function(){e(n.result)},n.onerror=function(e){t(e)},n.readAsText(r)}).then(function(e){e="ImageProxy Service error: "+function(e){try{return w.some(JSON.parse(e))}catch(e){return w.none()}}(e).bind(function(e){return z(e,["error","type"]).map(q)}).getOr("Invalid JSON in service error message");return k.reject(e)});var r}function W(e){return e<200||300<=e}function H(e,t,n){return void 0===n&&(n=!1),t?(i={"Content-Type":"application/json;charset=UTF-8","tiny-api-key":r=t},F((o=r,t=-1===(r=t=e).indexOf("?")?"?":"&",/[?&]apiKey=/.test(r)?r:r+t+"apiKey="+encodeURIComponent(o)),i).then(function(e){return W(e.status)?(t=e.status,"application/json"!==(null==(n=e.blob)?void 0:n.type)||400!==t&&403!==t&&404!==t&&500!==t?U(t):$(n)):k.resolve(e.blob);var t,n})):F(e,{},n).then(function(e){return W(e.status)?U(e.status):k.resolve(e.blob)});var r,o,i}function V(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}}function K(e){return e.getParam("imagetools_proxy")}function G(e){function t(e){return/^[0-9\.]+px$/.test(e)}var n=e.style.width,r=e.style.height;return n||r?t(n)&&t(r)?{w:parseInt(n,10),h:parseInt(r,10)}:null:(n=e.width,r=e.height,n&&r?{w:parseInt(n,10),h:parseInt(r,10)}:null)}function Z(e){return{w:e.naturalWidth,h:e.naturalHeight}}function X(e){return be(ve(e),"img")}function Y(e,t){return e.dom.is(t,"figure")}function J(e,t){return e.dom.is(t,"img:not([data-mce-object],[data-mce-placeholder])")}function Q(t,e){function n(e){return J(t,e)&&(Ce(t,e)||ke(t,e)||g(K(t)))}return Y(t,e)?X(e).bind(function(e){return n(e.dom)?w.some(e.dom):w.none()}):n(e)?w.some(e):w.none()}function ee(e,t){e.notificationManager.open({text:t,type:"error"})}function te(e){var t=e.selection.getNode(),n=e.dom.getParent(t,"figure.image");return null!==n&&Y(e,n)?X(n):J(e,t)?w.some(ve(t)):w.none()}function ne(e,t,n){return t=t.match(/(?:\/|^)(([^\/\?]+)\.(?:[a-z0-9.]+))(?:\?|$)/i),g(t)?e.dom.encode(t[n]):null}function re(e,t){return w.from(e.getParam("imagetools_fetch_image",null,"function")).fold(function(){return function(e,t){if(ke(e,t))return H(t.src,null,(n=t,-1!==m.inArray(e.getParam("imagetools_credentials_hosts",[],"string[]"),new xe(n.src).host)));if(Ce(e,t))return E(t);var n=K(e),t=n+(-1===n.indexOf("?")?"?":"&")+"url="+encodeURIComponent(t.src),e=e.getParam("api_key",e.getParam("imagetools_api_key","","string"),"string");return H(t,e,!1)}(e,t)},function(e){return e(t)})}function oe(e,t){var n=e.editorUpload.blobCache.getByUri(t.src);return n?we.resolve(n.blob()):re(e,t)}function ie(e){ye.clearTimeout(e.get())}function ae(u,c,s,l,f,d,m){return s.toBlob().then(function(e){var t,n,o,r=u.editorUpload.blobCache,i=d.src,a=c.type===e.type;return u.getParam("images_reuse_filename",!1,"boolean")&&(o=r.getByUri(i),n=g(o)?(i=o.uri(),t=o.name(),o.filename()):(t=ne(u,i,2),ne(u,i,1))),o=r.create({id:"imagetools"+Se++,blob:e,base64:s.toBase64(),uri:i,name:t,filename:a?n:void 0}),r.add(o),u.undoManager.transact(function(){var r=function(){var e,t,n;u.$(d).off("load",r),u.nodeChanged(),l?u.editorUpload.uploadImagesAuto():(ie(f),e=u,t=f,n=ye.setEditorTimeout(e,function(){e.editorUpload.uploadImagesAuto()},e.getParam("images_upload_timeout",3e4,"number")),t.set(n))};u.$(d).on("load",r),m&&u.$(d).attr({width:m.w,height:m.h}),u.$(d).attr({src:o.blobUri()}).removeAttr("data-mce-src")}),o})}function ue(r,o,e,i){return function(){return te(r).fold(function(){ee(r,"Could not find selected image")},function(n){return r._scanForImages().then(function(){return oe(r,n.dom)}).then(function(t){return he(t).then(e).then(function(e){return ae(r,t,e,!1,o,n.dom,i)})}).catch(function(e){ee(r,e)})})}}function ce(t,n,r){return function(){var e=te(t).fold(function(){return null},function(e){e=G(e.dom);return e?{w:e.h,h:e.w}:null});return ue(t,n,function(e){return j(e,r)},e)()}}function se(e,t,n){return function(){return ue(e,t,function(e){return L(e,n)})()}}function le(c,s){return function(){var n=te(c),i=n.map(function(e){return Z(e.dom)});n.each(function(t){Q(c,t.dom).each(function(e){oe(c,t.dom).then(function(e){e={blob:e,url:URL.createObjectURL(e)};c.windowManager.open({title:"Edit Image",size:"large",body:{type:"panel",items:[{type:"imagetools",name:"imagetools",label:"Edit Image",currentState:e}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0,disabled:!0}],onSubmit:function(e){var o=e.getData().imagetools.blob;n.each(function(r){i.each(function(e){var t,n,i,a,u;t=c,n=s,i=r.dom,a=e,de(u=o).then(function(e){var t,n,r,o=Z(e);return a.w===o.w&&a.h===o.h||G(i)&&(t=i,(n=o)&&(r=t.style.width,o=t.style.height,(r||o)&&(t.style.width=n.w+"px",t.style.height=n.h+"px",t.removeAttribute("data-mce-style")),r=t.width,o=t.height,(r||o)&&(t.setAttribute("width",String(n.w)),t.setAttribute("height",String(n.h))))),URL.revokeObjectURL(e.src),u}).then(he).then(function(e){return ae(t,u,e,!0,n,i)})})}),e.close()},onCancel:r,onAction:function(e,t){switch(t.name){case"save-state":t.value?e.enable("save"):e.disable("save");break;case"disable":e.disable("save"),e.disable("cancel");break;case"enable":e.enable("cancel")}}})})})})}}var fe=function(e){URL.revokeObjectURL(e.src)},de=_,me=Object.keys,ge=[{code:404,message:"Could not find Image Proxy"},{code:403,message:"Rejected request"},{code:0,message:"Incorrect Image Proxy URL"}],pe=[{type:"not_found",message:"Failed to load image."},{type:"key_missing",message:"The request did not include an api key."},{type:"key_not_found",message:"The provided api key could not be found."},{type:"domain_not_trusted",message:"The api key is not valid for the request origins."}],he=function(t){return n=t,new k(function(e){var t=new FileReader;t.onloadend=function(){e(t.result)},t.readAsDataURL(n)}).then(function(e){return B(_(t).then(function(e){fe(e);var t=s(e.naturalWidth||e.width,e.naturalHeight||e.height);return S(t).drawImage(e,0,0),t}),t,e)});var n},ve=V,be=("undefined"!=typeof window||Function("return this;")(),function(e,t){return n=function(n){return function(e){var t=n.dom;if(1!==t.nodeType)return!1;if(void 0!==t.matches)return t.matches(e);if(void 0!==t.msMatchesSelector)return t.msMatchesSelector(e);if(void 0!==t.webkitMatchesSelector)return t.webkitMatchesSelector(e);if(void 0!==t.mozMatchesSelector)return t.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}(t)},I(e.dom.childNodes,function(e){return n(ve(e))}).map(ve);var n}),ye=tinymce.util.Tools.resolve("tinymce.util.Delay"),we=tinymce.util.Tools.resolve("tinymce.util.Promise"),xe=tinymce.util.Tools.resolve("tinymce.util.URI"),Se=0,Ce=function(e,t){t=t.src;return 0===t.indexOf("data:")||0===t.indexOf("blob:")||new xe(t).host===e.documentBaseURI.host},ke=function(e,t){return-1!==m.inArray(e.getParam("imagetools_cors_hosts",[],"string[]"),new xe(t.src).host)};d.add("imagetools",function(e){var n,t,r,o,i,a,u=l(0),c=l(null),s=e;m.each({mceImageRotateLeft:ce(s,u,-90),mceImageRotateRight:ce(s,u,90),mceImageFlipVertical:se(s,u,"v"),mceImageFlipHorizontal:se(s,u,"h"),mceEditImage:le(s,u)},function(e,t){s.addCommand(t,e)}),t=function(e){return function(){return n.execCommand(e)}},(n=e).ui.registry.addButton("rotateleft",{tooltip:"Rotate counterclockwise",icon:"rotate-left",onAction:t("mceImageRotateLeft")}),n.ui.registry.addButton("rotateright",{tooltip:"Rotate clockwise",icon:"rotate-right",onAction:t("mceImageRotateRight")}),n.ui.registry.addButton("flipv",{tooltip:"Flip vertically",icon:"flip-vertically",onAction:t("mceImageFlipVertical")}),n.ui.registry.addButton("fliph",{tooltip:"Flip horizontally",icon:"flip-horizontally",onAction:t("mceImageFlipHorizontal")}),n.ui.registry.addButton("editimage",{tooltip:"Edit image",icon:"edit-image",onAction:t("mceEditImage"),onSetup:function(t){function e(){var e=te(n).forall(function(e){return Q(n,e.dom).isNone()});t.setDisabled(e)}return n.on("NodeChange",e),function(){n.off("NodeChange",e)}}}),n.ui.registry.addButton("imageoptions",{tooltip:"Image options",icon:"image",onAction:t("mceImage")}),n.ui.registry.addContextMenu("imagetools",{update:function(e){return Q(n,e).fold(function(){return[]},function(e){return[{text:"Edit image",icon:"edit-image",onAction:t("mceEditImage")}]})}}),(r=e).ui.registry.addContextToolbar("imagetools",{items:r.getParam("imagetools_toolbar","rotateleft rotateright flipv fliph editimage imageoptions"),predicate:function(e){return Q(r,e).isSome()},position:"node",scope:"node"}),i=u,a=c,(o=e).on("NodeChange",function(e){var t=a.get(),e=Q(o,e.element);t&&!e.exists(function(e){return t.src===e.src})&&(ie(i),o.editorUpload.uploadImagesAuto(),a.set(null)),e.each(a.set)})})}(),function(){"use strict";function e(){}function i(e){return function(){return e}}function t(e){return e}function f(e,t){return-1<J.call(e,t)}function o(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r}function c(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}function n(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n}function a(e,r,o){return function(e){for(var t,n=e.length-1;0<=n;n--)t=e[n],o=r(o,t)}(e),o}function s(e,t){for(var n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n))return;return 1}function r(e){return"inline-command"===e.type||"inline-format"===e.type}function u(e){return"block-command"===e.type||"block-format"===e.type}function l(r){function o(e){return oe.error({message:e,pattern:r})}function e(e,t,n){if(void 0===r.format)return void 0!==r.cmd?G(r.cmd)?oe.value(n(r.cmd,r.value)):o(e+" pattern has non-string `cmd` parameter"):o(e+" pattern is missing both `format` and `cmd` parameters");if(n=void 0,X(r.format)){if(!s(r.format,G))return o(e+" pattern has non-string items in the `format` array");n=r.format}else{if(!G(r.format))return o(e+" pattern has non-string `format` parameter");n=[r.format]}return oe.value(t(n))}if(!Z(r))return o("Raw pattern is not an object");if(!G(r.start))return o("Raw pattern is missing `start` parameter");if(void 0===r.end)return void 0!==r.replacement?G(r.replacement)?0===r.start.length?o("Replacement pattern has empty `start` parameter"):oe.value({type:"inline-command",start:"",end:r.start,cmd:"mceInsertContent",value:r.replacement}):o("Replacement pattern has non-string `replacement` parameter"):0===r.start.length?o("Block pattern has empty `start` parameter"):e("Block",function(e){return{type:"block-format",start:r.start,format:e[0]}},function(e,t){return{type:"block-command",start:r.start,cmd:e,value:t}});if(!G(r.end))return o("Inline pattern has non-string `end` parameter");if(0===r.start.length&&0===r.end.length)return o("Inline pattern has empty `start` and `end` parameters");var n=r.start,i=r.end;return 0===i.length&&(i=n,n=""),e("Inline",function(e){return{type:"inline-format",start:n,end:i,format:e}},function(e,t){return{type:"inline-command",start:n,end:i,cmd:e,value:t}})}function d(e){return"block-command"===e.type?{start:e.start,cmd:e.cmd,value:e.value}:"block-format"===e.type?{start:e.start,format:e.format}:"inline-command"===e.type?"mceInsertContent"===e.cmd&&""===e.start?{start:e.end,replacement:e.value}:{start:e.start,end:e.end,cmd:e.cmd,value:e.value}:"inline-format"===e.type?{start:e.start,end:e.end,format:1===e.format.length?e.format[0]:e.format}:void 0}function m(e){return{inlinePatterns:n(e,r),blockPatterns:(t=n(e,u),e=function(e,t){return e.start.length===t.start.length?0:e.start.length>t.start.length?-1:1},(t=Y.call(t,0)).sort(e),t)};var t}function g(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=ie.console;n&&(n.error||n.log).apply(n,e)}function p(e){return!1===(e=e.getParam("forced_root_block","p"))?"":!0===e?"p":e}function h(e,t){return{container:e,offset:t}}function v(e){return e.nodeType===Node.TEXT_NODE}function b(e,t,n,r){void 0===r&&(r=!0);var o=t.startContainer.parentNode,i=t.endContainer.parentNode;t.deleteContents(),r&&!n(t.startContainer)&&(v(t.startContainer)&&0===t.startContainer.data.length&&e.remove(t.startContainer),v(t.endContainer)&&0===t.endContainer.data.length&&e.remove(t.endContainer),de(e,o,n),o!==i&&de(e,i,n))}function y(e,t){return e=t.get(e),X(e)&&(0<(e=e).length?K.some(e[0]):K.none()).exists(function(e){return ee.call(e,"block")})}function w(e){return 0===e.start.length}function x(e,t){return t=K.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),""===p(e)?t.orThunk(function(){return K.some(e.getBody())}):t}function S(t){return function(e){return t===e?-1:0}}function C(e,t,n){if(v(e)&&0<=t)return K.some(h(e,t));var r=fe(me);return K.from(r.backwards(e,t,S(e),n)).map(function(e){return h(e.container,e.container.data.length)})}function k(e,t,n){if(v(t)&&(n<0||n>t.data.length))return[];for(var r=[n],o=t;o!==e&&o.parentNode;){for(var i=o.parentNode,a=0;a<i.childNodes.length;a++)if(i.childNodes[a]===o){r.push(a);break}o=i}return o===e?r.reverse():[]}function O(e,t,n,r,o){return{start:k(e,t,n),end:k(e,r,o)}}function T(e,t){var n=(t=t.slice()).pop(),t=t,r=function(e,t){return e.bind(function(e){return K.from(e.childNodes[t])})},o=K.some(e);return c(t,function(e){o=r(o,e)}),o.bind(function(e){return v(e)&&(n<0||n>e.data.length)?K.none():K.some({node:e,offset:n})})}function A(t,n){return T(t,n.start).bind(function(e){var r=e.node,o=e.offset;return T(t,n.end).map(function(e){var t=e.node,n=e.offset,e=document.createRange();return e.setStart(r,o),e.setEnd(t,n),e})})}function R(r,o,t){(function(e,t){if(v(e)&&e.length<=0)return K.some(h(e,0));var n=fe(me);return K.from(n.forwards(e,0,S(e),t)).map(function(e){return h(e.container,0)})})(o,o).each(function(e){var n=e.container;pe(n,t.start.length,o).each(function(e){var t=r.createRng();t.setStart(n,0),t.setEnd(e.container,e.offset),b(r,t,function(e){return e===o})})})}function D(n,i){var a=n.dom,e=n.selection.getRng();return x(n,e).filter(function(e){var t=p(n),t=""===t&&a.is(e,"body")||a.is(e,t);return null!==e&&t}).bind(function(t){var n,r=t.textContent,e=i,o=(n=r).replace(" "," ");return function(e,t,n){for(var r=0,o=e.length;r<o;r++){var i=e[r];if(t(i,r))return K.some(i);if(n(i,r))break}return K.none()}(e,function(e){return 0===n.indexOf(e.start)||0===o.indexOf(e.start)},$).map(function(e){return se.trim(r).length===e.start.length?[]:[{pattern:e,range:O(a.getRoot(),t,0,t,0)}]})}).getOr([])}function _(e,t){return e.create("span",{"data-mce-type":"bookmark",id:t})}function N(e,t){return(e=e.createRng()).setStartAfter(t.start),e.setEndBefore(t.end),e}function P(e,t,n){var r=(o=A(e.getRoot(),n).getOrDie("Unable to resolve path range")).startContainer,n=o.endContainer,n=0===o.endOffset?n:n.splitText(o.endOffset),o=0===o.startOffset?r:r.splitText(o.startOffset);return{prefix:t,end:n.parentNode.insertBefore(_(e,t+"-end"),n),start:o.parentNode.insertBefore(_(e,t+"-start"),o)}}function E(e,t,n){de(e,e.get(t.prefix+"-end"),n),de(e,e.get(t.prefix+"-start"),n)}function I(t,e,n){t.selection.setRng(n),"inline-format"===e.type?c(e.format,function(e){t.formatter.apply(e)}):t.execCommand(e.cmd,!1,e.value)}function B(n,r,o){var i=n.selection.getRng();return!1===i.collapsed?[]:x(n,i).bind(function(e){var t=i.startOffset-(o?1:0);return be(n,r,i.startContainer,t,e)}).fold(function(){return[]},function(e){return e.matches})}function M(f,e){var d,t,r,n,o,i;0!==e.length&&(d=f.dom,t=f.selection.getBookmark(),r=d,n=e,e=(new Date).getTime(),o="mce_textpattern_"+Math.floor(1e9*Math.random())+ ++he+String(e),i=a(n,function(e,t){var n=P(r,o+"_end"+e.length,t.endRng);return e.concat([q(q({},t),{endMarker:n})])},[]),n=a(i,function(e,t){var n=i.length-e.length-1,n=w(t.pattern)?t.endMarker:P(r,o+"_start"+n,t.startRng);return e.concat([q(q({},t),{startMarker:n})])},[]),c(n,function(e){function t(e){return e===l}var n,r,o,i,a,u,c,s,l=d.getParent(e.startMarker.start,d.isBlock);w(e.pattern)?(u=f,c=e.pattern,i=e.endMarker,a=t,s=N(u.dom,i),b(u.dom,s,a),I(u,c,s)):(n=f,r=e.pattern,o=e.startMarker,i=e.endMarker,a=t,u=n.dom,c=N(u,i),s=N(u,o),b(u,s,a),b(u,c,a),i={prefix:o.prefix,start:o.end,end:i.start},i=N(u,i),I(n,r,i)),E(d,e.endMarker,t),E(d,e.startMarker,t)}),f.selection.moveToBookmark(t))}function L(e,t){var n=B(e,t.inlinePatterns,!0);0<n.length&&e.undoManager.transact(function(){M(e,n)})}function j(e,t,n){for(var r=0;r<e.length;r++)if(n(e[r],t))return 1}function F(t,n){var r=[",",".",";",":","!","?"],o=[32];t.on("keydown",function(e){13!==e.keyCode||ce.modifierPressed(e)||!function(n,e){if(n.selection.isCollapsed()){var r=B(n,e.inlinePatterns,!1),i=D(n,e.blockPatterns);return(0<i.length||0<r.length)&&(n.undoManager.add(),n.undoManager.extra(function(){n.execCommand("mceInsertNewLine")},function(){var o,e;n.insertContent("\ufeff"),M(n,r),o=n,0!==(e=i).length&&(t=o.selection.getBookmark(),c(e,function(e){return r=e,e=(t=o).dom,n=r.pattern,r=A(e.getRoot(),r.range).getOrDie("Unable to resolve path range"),x(t,r).each(function(e){"block-format"===n.type?y(n.format,t.formatter)&&t.undoManager.transact(function(){R(t.dom,e,n),t.formatter.apply(n.format)}):"block-command"===n.type&&t.undoManager.transact(function(){R(t.dom,e,n),t.execCommand(n.cmd,!1,n.value)})}),1;var t,n,r}),o.selection.moveToBookmark(t));var t=n.selection.getRng(),t=C(t.startContainer,t.startOffset,n.dom.getRoot());n.execCommand("mceInsertNewLine"),t.each(function(e){var t=e.container;"\ufeff"===t.data.charAt(e.offset-1)&&(t.deleteData(e.offset-1,1),de(n.dom,t.parentNode,function(e){return e===n.dom.getRoot()}))})}),1)}}(t,n.get())||e.preventDefault()},!0),t.on("keyup",function(e){j(o,e,function(e,t){return e===t.keyCode&&!1===ce.modifierPressed(t)})&&L(t,n.get())}),t.on("keypress",function(e){j(r,e,function(e,t){return e.charCodeAt(0)===t.charCode})&&ue.setEditorTimeout(t,function(){L(t,n.get())})})}var z,U=tinymce.util.Tools.resolve("tinymce.PluginManager"),q=function(){return(q=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},$=i(!1),W=i(!0),H={fold:function(e,t){return e()},is:$,isSome:$,isNone:W,getOr:le=function(e){return e},getOrThunk:z=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:i(null),getOrUndefined:i(void 0),or:le,orThunk:z,map:le=function(){return H},each:e,bind:le,exists:$,forall:W,filter:le,equals:z=function(e){return e.isNone()},equals_:z,toArray:function(){return[]},toString:i("none()")},V=function(n){function e(){return o}function t(e){return e(n)}var r=i(n),o={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:W,isNone:$,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return V(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:H},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold($,function(e){return t(n,e)})}};return o},K={some:V,none:le,from:function(e){return null==e?H:V(e)}},G=(le=function(n){return function(e){return e=typeof(t=e),(null===t?"null":"object"==e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"==e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e)===n;var t}})("string"),Z=le("object"),X=le("array"),Y=Array.prototype.slice,J=Array.prototype.indexOf,Q=Object.keys,ee=Object.hasOwnProperty,te=(function(a){if(!X(a))throw new Error("cases must be an array");if(0===a.length)throw new Error("there must be at least one case");var u=[],n={};c(a,function(e,r){var t=Q(e);if(1!==t.length)throw new Error("one and only one name per case");var o=t[0],i=e[o];if(void 0!==n[o])throw new Error("duplicate key detected:"+o);if("cata"===o)throw new Error("cannot have a case named cata (sorry)");if(!X(i))throw new Error("case arguments must be an array");u.push(o),n[o]=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.length;if(t!==i.length)throw new Error("Wrong number of arguments to case "+o+". Expected "+i.length+" ("+i+"), got "+t);return{fold:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length!==a.length)throw new Error("Wrong number of arguments to fold. Expected "+a.length+", got "+e.length);return e[r].apply(null,n)},match:function(e){var t=Q(e);if(u.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+u.join(",")+"\nActual: "+t.join(","));if(!s(u,function(e){return f(t,e)}))throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+u.join(", "));return e[o].apply(null,n)},log:function(e){console.log(e,{constructors:u,constructor:o,params:n})}}}})}([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),function(e){var t=[],n=[];return c(e,function(e){e.fold(function(e){t.push(e)},function(e){n.push(e)})}),{errors:t,values:n}}),ne=function(n){return{is:function(e){return n===e},isValue:W,isError:$,getOr:i(n),getOrThunk:i(n),getOrDie:i(n),or:function(e){return ne(n)},orThunk:function(e){return ne(n)},fold:function(e,t){return t(n)},map:function(e){return ne(e(n))},mapError:function(e){return ne(n)},each:function(e){e(n)},bind:function(e){return e(n)},exists:function(e){return e(n)},forall:function(e){return e(n)},toOptional:function(){return K.some(n)}}},re=function(n){return{is:$,isValue:$,isError:W,getOr:t,getOrThunk:function(e){return e()},getOrDie:function(){return e=String(n),function(){throw new Error(e)}();var e},or:function(e){return e},orThunk:function(e){return e()},fold:function(e,t){return e(n)},map:function(e){return re(n)},mapError:function(e){return re(e(n))},each:e,bind:function(e){return re(n)},exists:$,forall:W,toOptional:K.none}},oe={value:ne,error:re,fromOption:function(e,t){return e.fold(function(){return re(t)},ne)}},ie="undefined"!=typeof window?window:Function("return this;")(),ae=[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}],ue=tinymce.util.Tools.resolve("tinymce.util.Delay"),ce=tinymce.util.Tools.resolve("tinymce.util.VK"),se=tinymce.util.Tools.resolve("tinymce.util.Tools"),le=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),fe=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker"),de=function(e,t,n){var r;t&&e.isEmpty(t)&&!n(t)&&(r=t.parentNode,e.remove(t),de(e,r,n))},me=le.DOM,ge=function(e,n,r){if(!v(e))return K.none();var t=e.textContent;if(0<=n&&n<=t.length)return K.some(h(e,n));t=fe(me);return K.from(t.backwards(e,n,S(e),r)).bind(function(e){var t=e.container.data;return ge(e.container,n+t.length,r)})},pe=function(e,t,n){if(!v(e))return K.none();var r=e.textContent;if(t<=r.length)return K.some(h(e,t));var o=fe(me);return K.from(o.forwards(e,t,S(e),n)).bind(function(e){return pe(e.container,t-r.length,n)})},he=0,ve=function(r,t,o,e){var n,i,a,u,c,s,l=t.start;return i=r,a=e.container,u=e.offset,n=l,c=function(e,t){e=e.data.substring(0,t),t=e.lastIndexOf(n.charAt(n.length-1)),e=e.lastIndexOf(n);return-1!==e?e+n.length:-1!==t?t+1:-1},e=o,i=fe(i,(s=i,function(e){return s.isBlock(e)||f(["BR","IMG","HR","INPUT"],e.nodeName)||"false"===s.getContentEditable(e)})),K.from(i.backwards(a,u,c,e)).bind(function(n){if(n.offset>=l.length){var e=r.createRng();return e.setStart(n.container,n.offset-l.length),e.setEnd(n.container,n.offset),K.some(e)}e=n.offset-l.length;return ge(n.container,e,o).map(function(e){var t=r.createRng();return t.setStart(e.container,e.offset),t.setEnd(n.container,n.offset),t}).filter(function(e){return e.toString()===l}).orThunk(function(){return ve(r,t,o,h(n.container,0))})})},be=function(s,l,f,d,m){var g=s.dom;return C(f,d,g.getRoot()).bind(function(e){var t=g.createRng();t.setStart(m,0),t.setEnd(f,d);for(var n,r=t.toString(),o=0;o<l.length;o++){var i,a=l[o],u=c=n=void 0,c=i=a.end;if(u=(n=r).length-i.length,""===c||n.length>=c.length&&n.substr(u,u+c.length)===c){c=l.slice();c.splice(o,1);c=function(o,i,a){var u=o.dom,c=u.getRoot(),s=a.pattern,l=a.position.container,f=a.position.offset;return ge(l,f-a.pattern.end.length,i).bind(function(e){var n=O(c,e.container,e.offset,l,f);if(w(s))return K.some({matches:[{pattern:s,startRng:n,endRng:n}],position:e});var t=be(o,a.remainingPatterns,e.container,e.offset,i),r=t.getOr({matches:[],position:e}),e=r.position;return function(e,n,t,r,o,i){if(void 0===i&&(i=!1),0!==n.start.length||i)return C(t,r,o).bind(function(t){return ve(e,n,o,t).bind(function(e){if(i){if(e.endContainer===t.container&&e.endOffset===t.offset)return K.none();if(0===t.offset&&e.endContainer.textContent.length===e.endOffset)return K.none()}return K.some(e)})});var a=e.createRng();return a.setStart(t,r),a.setEnd(t,r),K.some(a)}(u,s,e.container,e.offset,i,t.isNone()).map(function(e){var t=O(c,e.startContainer,e.startOffset,e.endContainer,e.endOffset);return{matches:r.matches.concat([{pattern:s,startRng:t,endRng:n}]),position:h(e.startContainer,e.startOffset)}})})}(s,m,{pattern:a,remainingPatterns:c,position:e});if(c.isSome())return c}}return K.none()})};U.add("textpattern",function(t){var n,r,e=(e=function(){var e=t.getParam("textpattern_patterns",ae,"array");if(!X(e))return g("The setting textpattern_patterns should be an array"),{inlinePatterns:[],blockPatterns:[]};e=te(o(e,l));return c(e.errors,function(e){return g(e.message,e.pattern),0}),m(e.values)}(),n=e,{get:function(){return n},set:function(e){n=e}});return F(t,e),r=e,{setPatterns:function(e){var t=te(o(e,l));if(0<t.errors.length){e=t.errors[0];throw new Error(e.message+":\n"+JSON.stringify(e.pattern,null,2))}r.set(m(t.values))},getPatterns:function(){return function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r}(o(r.get().inlinePatterns,d),o(r.get().blockPatterns,d))}}})}(),function(){"use strict";function i(e,t){return((t=/^(\d+)([ms]?)$/.exec(""+(e=e||t)))[2]?{s:1e3,m:6e4}[t[2]]:1)*parseInt(e,10)}function r(e){var t=document.location;return e.getParam("autosave_prefix","tinymce-autosave-{path}{query}{hash}-{id}-").replace(/{path}/g,t.pathname).replace(/{query}/g,t.search).replace(/{hash}/g,t.hash).replace(/{id}/g,e.id)}function a(e,t){return n(t)?e.dom.isEmpty(e.getBody()):""===(t=m.trim(t))||(t=(new DOMParser).parseFromString(t,"text/html"),e.dom.isEmpty(t))}function u(e){var t=parseInt(o.getItem(r(e)+"time"),10)||0;return!((new Date).getTime()-t>i(e.getParam("autosave_retention"),"20m")&&(g(e,!1),1))}function c(e){var t=r(e);!a(e)&&e.isDirty()&&(o.setItem(t+"draft",e.getContent({format:"raw",no_events:!0})),o.setItem(t+"time",(new Date).getTime().toString()),e.fire("StoreDraft"))}function s(e){var t=r(e);u(e)&&(e.setContent(o.getItem(t+"draft"),{format:"raw"}),e.fire("RestoreDraft"))}function l(e){e.undoManager.transact(function(){s(e),g(e)}),e.focus()}function f(n){return function(e){e.setDisabled(!u(n));function t(){return e.setDisabled(!u(n))}return n.on("StoreDraft RestoreDraft RemoveDraft",t),function(){return n.off("StoreDraft RestoreDraft RemoveDraft",t)}}}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(e){return void 0===e},d=tinymce.util.Tools.resolve("tinymce.util.Delay"),o=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),m=tinymce.util.Tools.resolve("tinymce.util.Tools"),g=function(e,t){var n=r(e);o.removeItem(n+"draft"),o.removeItem(n+"time"),!1!==t&&e.fire("RemoveDraft")},p=tinymce.util.Tools.resolve("tinymce.EditorManager");e.add("autosave",function(e){var t,n,r,o;return e.editorManager.on("BeforeUnload",function(e){var t;m.each(p.get(),function(e){e.plugins.autosave&&e.plugins.autosave.storeDraft(),!t&&e.isDirty()&&e.getParam("autosave_ask_before_unload",!0)&&(t=e.translate("You have unsaved changes are you sure you want to navigate away?"))}),t&&(e.preventDefault(),e.returnValue=t)}),r=t=e,o=i(r.getParam("autosave_interval"),"30s"),d.setEditorInterval(r,function(){c(r)},o),t.ui.registry.addButton("restoredraft",{tooltip:"Restore last draft",icon:"restore-draft",onAction:function(){l(t)},onSetup:f(t)}),t.ui.registry.addMenuItem("restoredraft",{text:"Restore last draft",icon:"restore-draft",onAction:function(){l(t)},onSetup:f(t)}),e.on("init",function(){e.getParam("autosave_restore_when_empty",!1)&&e.dom.isEmpty(e.getBody())&&s(e)}),n=e,{hasDraft:function(){return u(n)},storeDraft:function(){return c(n)},restoreDraft:function(){return s(n)},removeDraft:function(e){return g(n,e)},isEmpty:function(e){return a(n,e)}}})}(),function(){"use strict";function c(e){return e.getParam("min_height",e.getElement().offsetHeight,"number")}function s(e,t){(e=e.getBody())&&(e.style.overflowY=t?"":"hidden",t||(e.scrollTop=0))}function l(e,t,n,r){return r=parseInt(e.getStyle(t,n,r),10),isNaN(r)?0:r}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),f=tinymce.util.Tools.resolve("tinymce.Env"),i=tinymce.util.Tools.resolve("tinymce.util.Delay"),u=function(e,t,n,r,o){i.setEditorTimeout(e,function(){d(e,t),n--?u(e,t,n,r,o):o&&o()},r)},d=function(e,t){var n,r,o,i,a=e.dom,u=e.getDoc();u&&(e.plugins.fullscreen&&e.plugins.fullscreen.isFullscreen()?s(e,!0):(n=u.documentElement,o=e.getParam("autoresize_bottom_margin",50,"number"),i=c(e),r=l(a,n,"margin-top",!0),u=l(a,n,"margin-bottom",!0),(u=(u=n.offsetHeight+r+u+o)<0?0:u)+(o=e.getContainer().offsetHeight-e.getContentAreaContainer().offsetHeight)>c(e)&&(i=u+o),(o=e.getParam("max_height",0,"number"))&&o<i?(i=o,s(e,!0)):s(e,!1),i!==t.get()&&(o=i-t.get(),a.setStyle(e.getContainer(),"height",i+"px"),t.set(i),e.fire("ResizeEditor"),f.browser.isSafari()&&f.mac&&(i=e.getWin()).scrollTo(i.pageXOffset,i.pageYOffset),e.hasFocus()&&e.selection.scrollIntoView(e.selection.getNode()),f.webkit&&o<0&&d(e,t))))};e.add("autoresize",function(e){var t,n,r,o,i,a;e.settings.hasOwnProperty("resize")||(e.settings.resize=!1),e.inline||(a=0,i=t={get:function(){return a},set:function(e){a=e}},(o=e).addCommand("mceAutoResize",function(){d(o,i)}),r=t,(n=e).on("init",function(){var e=n.getParam("autoresize_overflow_padding",1,"number"),t=n.dom;t.setStyles(n.getDoc().documentElement,{height:"auto"}),t.setStyles(n.getBody(),{paddingLeft:e,paddingRight:e,"min-height":0})}),n.on("NodeChange SetContent keyup FullscreenStateChanged ResizeContent",function(){d(n,r)}),n.getParam("autoresize_on_init",!0,"boolean")&&n.on("init",function(){u(n,r,20,100,function(){u(n,r,5,1e3)})}))})}(),function(l){"use strict";function t(e){return parseInt(e,10)}function n(e,t,n){return{major:e,minor:t,patch:n}}function f(e){return(e=/([0-9]+)\.([0-9]+)\.([0-9]+)(?:(\-.+)?)/.exec(e))?n(t(e[1]),t(e[2]),t(e[3])):n(0,0,0)}function d(e,t){return 0==(t=e-t)?0:0<t?1:-1}function m(e){return function(){return e}}function i(){return L}function c(e,t){return-1<W(e,t)}function s(e,t){return H(e,t).isSome()}function o(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o,e)}return r}function a(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r,e)&&n.push(i)}return n}function u(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];if(t(o,n,e))return F.some(o)}return F.none()}function g(e,t){return function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!Array.prototype.isPrototypeOf(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);K.apply(t,e[n])}return t}(o(e,t))}function p(e,t){for(var n=G(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i,e)}}function r(n,r){var o={};return p(n,function(e,t){t=r(e,t,n);o[t.k]=t.v}),o}function h(e){return n=[],p(e,function(e,t){n.push(e)}),n;var n}function v(e,t){return X(e,t)?F.from(e[t]):F.none()}function b(e,t,n){!function(e,t,n){if(!(z(n)||U(n)||$(n)))throw l.console.error("Invalid call to Attr.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")}(e.dom(),t,n)}function y(e,t){return null===(t=e.dom().getAttribute(t))?void 0:t}function w(e,t){e.dom().removeAttribute(t)}function x(e,t){return void 0===(t=y(e,t))||""===t?[]:t.split(" ")}function S(e){return void 0!==e.dom().classList}function C(e){return x(e,"class")}function k(e,t){var n,r;S(e)?e.dom().classList.remove(t):(r=n=t,0<(t=a(x(n=t=e,"class"),function(e){return e!==r})).length?b(n,"class",t.join(" ")):w(n,"class")),0===(S(e=e)?e.dom().classList:C(e)).length&&w(e,"class")}function e(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:m(e)}}function O(e,t){e.fire("FormatPainterToggle",{state:t})}var T,A,R,D,_,N,P=function(e){var t=e,e=function(){return t};return{get:e,set:function(e){t=e},clone:function(){return P(t)}}},E=m(!1),I=m(!0),B=E,M=I,L=(Y={fold:function(e,t){return e()},is:B,isSome:B,isNone:M,getOr:Y=function(e){return e},getOrThunk:E=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:Y,orThunk:E,map:i,ap:i,each:function(){},bind:i,flatten:i,exists:B,forall:M,filter:i,equals:I=function(e){return e.isNone()},equals_:I,toArray:function(){return[]},toString:m("none()")},Object.freeze&&Object.freeze(Y),Y),j=function(n){function e(){return n}function t(){return o}function r(e){return e(n)}var o={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:M,isNone:B,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return j(e(n))},ap:function(e){return e.fold(i,function(e){return j(e(n))})},each:function(e){e(n)},bind:r,flatten:e,exists:r,forall:r,filter:function(e){return e(n)?o:L},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(B,function(e){return t(n,e)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o},F={some:j,none:i,from:function(e){return null==e?L:j(e)}},E=function(t){return function(e){return function(e){if(null===e)return"null";var t=typeof e;return"object"==t&&Array.prototype.isPrototypeOf(e)?"array":"object"==t&&String.prototype.isPrototypeOf(e)?"string":t}(e)===t}},z=E("string"),U=E("boolean"),q=E("function"),$=E("number"),W=void 0===(T=Array.prototype.indexOf)?function(e,t){return V(e,t)}:function(e,t){return T.call(e,t)},H=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n,e))return F.some(n);return F.none()},V=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},K=Array.prototype.push,G=(Array.prototype.slice,q(Array.from)&&Array.from,Object.keys),Z=Object.hasOwnProperty,X=function(e,t){return Z.call(e,t)},I=(l.Node.ATTRIBUTE_NODE,l.Node.CDATA_SECTION_NODE,l.Node.COMMENT_NODE,l.Node.DOCUMENT_NODE,l.Node.DOCUMENT_TYPE_NODE,l.Node.DOCUMENT_FRAGMENT_NODE,l.Node.ELEMENT_NODE),Y=l.Node.TEXT_NODE,J=(l.Node.PROCESSING_INSTRUCTION_NODE,l.Node.ENTITY_REFERENCE_NODE,l.Node.ENTITY_NODE,l.Node.NOTATION_NODE,A=Y,function(e){return e.dom().nodeType===A}),Q=e;(E=R=R||{}).Retrival="Retrieval",E.Application="Application",(Y=D=D||{}).ListSchema="ListSchema",Y.SubstitutionSchema="SubstitionSchema",(E=_=_||{}).InsertUnorderedList="InsertUnorderedList",E.InsertOrderedList="InsertOrderedList",E.InsertDefinitionList="InsertDefinitionList",(Y=N=N||{}).Table="Table",Y.Unspecified="Unspecified";function ee(e){var t=Q(e.getBody()),e="tox-cursor-format-painter";S(t)?t.dom().classList.add(e):(e=e=e,e=x(t=t=t,"class").concat([e]),b(t,"class",e.join(" ")))}function te(e,t){k(Q(e.getBody()),"tox-cursor-format-painter"),t.set(R.Retrival),O(e,!1)}function ne(e,t){(t.get()===R.Application?te:function(t,n){ee(t),n.set(R.Application),O(t,!0),t.execCommand("mceRetrieveFormats");function e(){n.get()===R.Application&&(t.execCommand("mcePaintFormats"),te(t,n)),o()}function r(e){27===e.keyCode&&(te(t,n),o())}t.on("click",e),t.on("keydown",r);var o=function(){t.off("click",e),t.off("keydown",r)}})(e,t)}function re(e,t){return function(){return t===e}}function oe(e){var t=e.current;return{current:t,version:e.version,isEdge:re("Edge",t),isChrome:re("Chrome",t),isIE:re("IE",t),isOpera:re("Opera",t),isFirefox:re("Firefox",t),isSafari:re("Safari",t)}}function ie(e,t){return function(){return t===e}}function ae(e){var t=e.current;return{current:t,version:e.version,isWindows:ie("Windows",t),isiOS:ie("iOS",t),isAndroid:ie("Android",t),isOSX:ie("OSX",t),isLinux:ie("Linux",t),isSolaris:ie("Solaris",t),isFreeBSD:ie("FreeBSD",t)}}function ue(e,t){var n=String(t).toLowerCase();return u(e,function(e){return e.search(n)})}function ce(e,t){return-1!==e.indexOf(t)}function se(e){var t,n,r,o,i,a=Be.browsers(),u=Be.oses(),c=ue(a,i=e).map(function(e){var t=_e.detect(e.versionRegexes,i);return{current:e.name,version:t}}).fold(Ne,Pe),s=ue(u,o=e).map(function(e){var t=_e.detect(e.versionRegexes,o);return{current:e.name,version:t}}).fold(Ee,Ie);return{browser:c,os:s,deviceType:(n=c,r=e,a=(t=s).isiOS()&&!0===/ipad/i.test(r),u=t.isiOS()&&!a,c=t.isAndroid()&&3===t.version.major,e=t.isAndroid()&&4===t.version.major,s=a||c||e&&!0===/mobile/i.test(r),e=(c=t.isiOS()||t.isAndroid())&&!s,r=n.isSafari()&&t.isiOS()&&!1===/safari/i.test(r),{isiPad:m(a),isiPhone:m(u),isTablet:m(s),isPhone:m(e),isTouch:m(c),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:m(r)})}}function le(e,t,n){for(var r=e.dom(),o=q(n)?n:m(!1);r.parentNode;){r=r.parentNode;var i=Q(r);if(t(i))return F.some(i);if(o(i))break}return F.none()}function fe(e,t,n){var r=le,n=n;return(t=t)(e=e)?F.some(e):q(n)&&n(e)?F.none():r(e,t,n)}function de(r,e){return v(e,"selector").exists(function(e){var t=r.getBody(),n=r.selection.getStart(),n=r.dom.getParents(n,m(!0),t),t=r.selection.getSelectedBlocks();return r.dom.is(n.concat(t),e)})}function me(e){return 1<e.length&&"%"===e.charAt(0)}function ge(e){return Le(e,"OL,UL,DL")}function pe(e){return Le(e,"LI,DT,DD")}function he(e,t,n){var r,o,i=e.formatter,a=(o=e,u=n.formatName,s(o.formatter.get(u),function(e){return t=o,X(e=e,"inline")&&!de(t,e);var t})),u=(r=e,u=i,e=n.formatName,s(u.get(e),function(e){return t=r,X(e=e,"block")||de(t,e);var t})),e=(e=n.formatName,c(["formatpainter_borderstyle","formatpainter_bordercolor","formatpainter_backgroundcolor"],e));(t.table&&e||t.inline&&a||t.block&&u&&!e)&&i.apply(n.formatName,n.substitutedVariables)}function ve(e){var t,n=(t=e.selection).getRng(),r=Q(e.getBody()),e=a(e.selection.getSelectedBlocks().map(Q),pe),n=n.collapsed&&e.length,o=e.length&&(o=r,!function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(!r.isSome())return F.none();t.push(r.getOrDie())}return F.some(function(e,t){return n=t,e.dom()===n.dom();var n}.apply(null,t))}([fe(Q((t=t).getStart()),ge,o),fe(Q(t.getEnd()),ge,o)]).getOr(!1));return 1<e.length||n||o}function be(t,e){var o=t,n=e.context;o.formatter.remove("formatpainter_removeformat"),n===N.Table&&function(e){for(var t,n=0,r=e.length;n<r;n++)t=e[n],o.formatter.remove(t)}(["formatpainter_borderstyle","formatpainter_bordercolor","formatpainter_backgroundcolor"]),ve(o)&&o.execCommand("RemoveList");var r,i,a,u=(a=(r=t).selection.getStart(),i=r.selection.getRng().collapsed,n=0<r.dom.select("td[data-mce-selected]").length,a=!!r.dom.getParent(a,"TABLE"),{inline:!0,table:i&&a||n,block:i||1<r.selection.getSelectedBlocks().length||n});e.schemas.forEach(function(e){switch(e.kind){case D.ListSchema:u.block&&t.execCommand(e.command);break;case D.SubstitutionSchema:he(t,u,e)}})}function ye(n,e){return r(e,function(e,t){return{k:e.slice(1,e.length),v:(e=n,"class"===(t=t)?(S(r=e)?function(){for(var e=r.dom().classList,t=new Array(e.length),n=0;n<e.length;n++)t[n]=e.item(n);return t}():C(r)).filter(function(e){return!/^(mce-.*)/.test(e)}).join(" "):y(e,t))};var r})}function we(e){return n=function(e){return 1<e.length&&"%"===e.charAt(0)},r={},o={},p(e,function(e,t){(n(e)?r:o)[t]=e}),r;var n,r,o}function xe(e,t){var n=v(e,"styles").map(function(e){return o=t,e=we(e),r(e,function(e,t){return{k:e.slice(1,e.length),v:(n=o,r=t.replace(/([A-Z])/g,function(e){return"-"+e[0].toLowerCase()}),e=n.dom(),t=l.window.getComputedStyle(e).getPropertyValue(r),null===(r=""!==t||null!=(n=J(n=n)?n.dom().parentNode:n.dom())&&n.ownerDocument.body.contains(n)?t:Fe(e,r))?void 0:r)};var n,r});var o}),e=v(e,"attributes").map(function(e){return ye(t,we(e))}),e=ze({},n.getOr({}),e.getOr({}));return h(e).every(function(e){return""!==e})?F.some(e):F.none()}function Se(n,r){return t=(e=n).getParam("formatpainter_blacklisted_formats","link,address,removeformat,formatpainter_removeformat","string").split(/[ ,]/),G(e.formatter.get()).filter(function(e){return!c(t,e)}).filter(function(e){var t,t=(t=e,s(n.formatter.get(t),function(e){return e=v(t=e,"styles").exists(function(e){return s(h(e),me)}),t=v(t,"attributes").exists(function(e){return s(h(e),me)}),e||t;var t}));return n.formatter.matchNode(r.dom(),e,{},t)});var e,t}function Ce(e){var i,t,n=e.dom,r=e.selection.getStart();return{schemas:(t=e,u(h(_),function(e){return t.queryCommandState(e)}).map(function(e){return{kind:D.ListSchema,command:e}}).toArray().concat((e=(i=e).dom.getParents(r,m(!0)),g(o(e,Q),function(o){return g(Se(i,o),function(e){return t=i.formatter,n=e,r=o,(0===(t=t.get(n)).length?F.none():F.some(t[0])).bind(function(e){return xe(e,r)}).map(function(e){return{kind:D.SubstitutionSchema,formatName:n,substitutedVariables:e}}).toArray();var t,n,r})})))),context:n.getParent(r,"TABLE")?N.Table:N.Unspecified}}function ke(e){if(c=tinymce,s="4.9.0",!!c&&-1===function(e,t){var n=d(e.major,t.major);if(0!==n)return n;n=d(e.minor,t.minor);if(0!==n)return n;t=d(e.patch,t.patch);return 0!==t?t:0}(f([c.majorVersion,c.minorVersion].join(".").split(".").slice(0,3).join(".")),f(s)))return l.window.console.error("The format painter plugin requires at least version 4.9.0 of TinyMCE."),{};var n,t,r,o,i,a,u,c=P(R.Retrival),s=P({schemas:[],context:N.Unspecified});return(n=e).on("PreInit",function(){p(je,function(e,t){n.formatter.get(t)||n.formatter.register(t,e)})}),r=c,o=s,(t=e).addCommand("mceToggleFormatPainter",function(){ne(t,r)}),t.addCommand("mcePaintFormats",function(){t.undoManager.transact(function(){be(t,o.get())})}),t.addCommand("mceRetrieveFormats",function(){o.set(Ce(t))}),(s=e).ui?(a=s).ui.registry.addToggleButton("formatpainter",{active:!1,icon:"format-painter",tooltip:"Format Painter",onAction:function(){return a.execCommand("mceToggleFormatPainter")},onSetup:function(t){function e(e){t.setActive(e.state)}return a.on("FormatPainterToggle",e),function(){return a.off("FormatPainterToggle",e)}}}):(i=s).addButton("formatpainter",{active:!1,icon:"format-painter",tooltip:"Format Painter",cmd:"mceToggleFormatPainter",onPostRender:function(t){i.on("FormatPainterToggle",function(e){t.control.active(e.state)})}}),(u=e).addShortcut("Meta+alt+C","",function(){u.execCommand("mceRetrieveFormats")}),u.addShortcut("Meta+alt+V","",function(){u.execCommand("mcePaintFormats")}),{}}var Oe,Te,Ae,Re=(void 0!==l.window?l.window:Function("return this;")(),function(){return De(0,0)}),De=function(e,t){return{major:e,minor:t}},_e={nu:De,detect:function(r,e){e=String(e).toLowerCase();return 0===r.length?Re():function(t){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(r,t);if(!n)return{major:0,minor:0};function e(e){return Number(t.replace(n,"$"+e))}return De(e(1),e(2))}(e)},unknown:Re},Ne=function(){return oe({current:void 0,version:_e.unknown()})},Pe=oe,Ee=(m("Edge"),m("Chrome"),m("IE"),m("Opera"),m("Firefox"),m("Safari"),function(){return ae({current:void 0,version:_e.unknown()})}),Ie=ae,E=(m("Windows"),m("iOS"),m("Android"),m("Linux"),m("OSX"),m("Solaris"),m("FreeBSD"),/.*?version\/\ ?([0-9]+)\.([0-9]+).*/),Y=function(t){return function(e){return ce(e,t)}},E=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return ce(e,"edge/")&&ce(e,"chrome")&&ce(e,"safari")&&ce(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,E],search:function(e){return ce(e,"chrome")&&!ce(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return ce(e,"msie")||ce(e,"trident")}},{name:"Opera",versionRegexes:[E,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Y("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Y("firefox")},{name:"Safari",versionRegexes:[E,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(ce(e,"safari")||ce(e,"mobile/"))&&ce(e,"applewebkit")}}],Y=[{name:"Windows",search:Y("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return ce(e,"iphone")||ce(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Y("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Y("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Y("linux"),versionRegexes:[]},{name:"Solaris",search:Y("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Y("freebsd"),versionRegexes:[]}],Be={browsers:m(E),oses:m(Y)},Y=(Ae=!(Oe=function(){var e=l.navigator.userAgent;return se(e)}),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Ae||(Ae=!0,Te=Oe.apply(null,e)),Te}),Me=I,Le=(Y().browser.isIE(),function(e,t){e=e.dom();if(e.nodeType!==Me)return!1;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}),je={formatpainter_checklist:{selector:"ul",classes:"tox-checklist"},formatpainter_liststyletype:{selector:"ul,ol",styles:{listStyleType:"%value"}},formatpainter_borderstyle:{selector:"td,th",styles:{borderTopStyle:"%valueTop",borderRightStyle:"%valueRight",borderBottomStyle:"%valueBottom",borderLeftStyle:"%valueLeft"},remove_similar:!0},formatpainter_bordercolor:{selector:"td,th",styles:{borderTopColor:"%valueTop",borderRightColor:"%valueRight",borderBottomColor:"%valueBottom",borderLeftColor:"%valueLeft"},remove_similar:!0},formatpainter_backgroundcolor:{selector:"td,th",styles:{backgroundColor:"%value"},remove_similar:!0},formatpainter_removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*:not(tr,td,th,table)",attributes:["style","class"],split:!1,expand:!1,deep:!0}]},Fe=function(e,t){return void 0!==e.style?e.style.getPropertyValue(t):""},ze=function(){return(ze=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};return function(){tinymce.PluginManager.add("formatpainter",ke)}}(window)();